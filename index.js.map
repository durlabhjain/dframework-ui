{"version":3,"file":"index.js","sources":["../src/lib/components/SnackBar/index.js","../src/lib/components/Dialog/index.js","../src/lib/components/useRouter/actions.js","../src/lib/components/Grid/httpRequest.js","../src/lib/components/Grid/crud-helper.js","../src/lib/components/Grid/footer.js","../src/lib/components/Grid/template.js","../src/lib/components/Typography/index.js","../src/lib/components/useMobile.js","../src/lib/components/useRouter/stateReducer.js","../src/lib/components/useRouter/initialState.js","../src/lib/components/mui/locale/data-grid/daDK.js","../src/lib/components/mui/locale/data-grid/deDE.js","../src/lib/components/mui/locale/data-grid/elGR.js","../src/lib/components/mui/locale/data-grid/esES.js","../src/lib/components/mui/locale/data-grid/frFR.js","../src/lib/components/mui/locale/data-grid/itIT.js","../src/lib/components/mui/locale/data-grid/trTR.js","../src/lib/components/mui/locale/data-grid/ptPT.js","../src/lib/components/mui/locale/data-grid/enUS.js","../src/lib/components/mui/locale/localization.js","../src/lib/components/useRouter/StateProvider.js","../src/lib/components/HelpModal/index.js","../src/lib/components/PageTitle/index.js","../src/lib/components/utils.js","../src/lib/components/Grid/LocalizedDatePicker.js","../src/lib/components/Grid/GridPreference.js","../src/lib/components/Grid/CustomDropdownMenu.js","../src/lib/components/Grid/helper.js","../src/lib/components/Grid/index.js","../src/lib/components/Form/fields/boolean.js","../src/lib/components/Form/fields/string.js","../src/lib/hooks/useDebounce.js","../src/lib/components/Form/fields/number.js","../src/lib/components/Form/fields/password.js","../src/lib/components/Form/fields/date.js","../src/lib/components/Form/fields/dateTime.js","../src/lib/components/Form/fields/time.js","../src/lib/hooks/useCascadingLookup.js","../src/lib/components/Form/fields/select.js","../src/lib/components/Form/fields/grid-transfer.js","../src/lib/components/Form/fields/radio.js","../src/lib/components/Form/fields/autocomplete.js","../src/lib/components/Form/fields/CustomRenderCell.js","../src/lib/components/Form/fields/dayRadio.js","../src/lib/components/Form/fields/chipInput.js","../src/lib/components/Form/fields/treeCheckBox.js","../src/lib/components/Form/fields/fileUpload.js","../src/lib/components/Form/fields/jsonInput.js","../src/lib/components/Form/field-mapper.js","../src/lib/components/Form/relations.js","../src/lib/components/Form/Form.js","../src/lib/components/Grid/ui-models.js"],"sourcesContent":["import React, { useState, useContext, createContext } from 'react'\nimport Snackbar from '@mui/material/Snackbar'\nimport MuiAlert from '@mui/material/Alert';\n\nconst SnackbarContext = createContext(null);\nconst vertical = 'bottom';\nconst horizontal = 'center';\n\nconst Alert = React.forwardRef(function Alert(props, ref) {\n    return <MuiAlert elevation={6} ref={ref} variant=\"filled\" {...props} />;\n});\nconst SnackbarProvider = ({ children }) => {\n    const [message, setMessage] = useState(null);\n    const [open, setOpen] = useState(false);\n    const [severity, setSeverity] = useState(null);\n    const [handleAction, setHandleAction] = useState(null);\n\n    const showMessage = function (title, message, severity = \"info\", onAction) {\n        if (typeof title !== 'string') {\n            title = title.toString();\n        }\n        if (message && typeof message !== 'string') {\n            message = message.toString();\n        }\n        setMessage(message ? `${title}: ${message}` : title);\n        setSeverity(severity);\n        setOpen(true);\n        setHandleAction(onAction);\n    }\n\n    const showError = function (title, message, severity = \"error\", onAction) {\n        showMessage(title, message, severity, onAction);\n    }\n\n    const handleClose = function () {\n        setOpen(false);\n        setHandleAction(null);\n        if (handleAction) {\n            handleAction()\n        }\n    }\n    return (\n        <>\n            <SnackbarContext.Provider\n                value={{ showMessage, showError }}\n            >\n                {children}\n            </SnackbarContext.Provider>\n            <Snackbar open={open} autoHideDuration={6000} onClose={handleClose} anchorOrigin={{ vertical, horizontal }}>\n                <Alert severity={severity}>{message}</Alert>\n            </Snackbar>\n        </>\n    )\n}\nconst useSnackbar = function () {\n    return useContext(SnackbarContext)\n}\n\nexport { SnackbarProvider, SnackbarContext, useSnackbar }","import React from 'react';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport DialogActions from '@mui/material/DialogActions';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogContentText from '@mui/material/DialogContentText';\nimport DialogTitle from '@mui/material/DialogTitle';\n\n/**\n * DialogComponent is a reusable dialog/modal component based on Material-UI's Dialog.\n *\n * @param {Object} props - The props for the DialogComponent.\n * @param {boolean} props.open - Controls whether the dialog is open.\n * @param {function} props.onConfirm - Callback fired when the confirm/ok button is clicked.\n * @param {string} [props.title=\"Confirm\"] - The title of the dialog.\n * @param {function} props.onCancel - Callback fired when the cancel button or dialog close is triggered.\n * @param {string} [props.okText] - Custom text for the confirm/ok button.\n * @param {string} [props.cancelText] - Custom text for the cancel button.\n * @param {boolean} [props.yesNo=false] - If true, uses \"Yes\"/\"No\" for button texts instead of \"Ok\"/\"Cancel\".\n * @param {React.ReactNode} props.children - The content of the dialog.\n * @param {string} [props.maxWidth='sm'] - The maxWidth of the dialog (xs, sm, md, lg, xl).\n * @param {boolean} [props.fullWidth=true] - If true, the dialog stretches to the full width of its container.\n * @param {Object} [props.props] - Additional props passed to the MUI Dialog component.\n * @returns {JSX.Element} The rendered Dialog component.\n */\n\nconst DialogComponent = ({ open, onConfirm, title = \"Confirm\", onCancel, okText, cancelText, yesNo = false, children, maxWidth = 'sm', fullWidth = true, ...props }) => {\n    okText = okText || (yesNo ? 'Yes' : 'Ok');\n    cancelText = cancelText || (yesNo ? 'No' : 'Cancel');\n    return (\n        <Dialog\n            {...props}\n            open={open}\n            onClose={onCancel}\n            aria-labelledby=\"alert-dialog-title\"\n            aria-describedby=\"alert-dialog-description\"\n            maxWidth={maxWidth}\n            fullWidth={fullWidth}\n        >\n            <DialogTitle id=\"alert-dialog-title\" sx={{ fontSize: children ? 'inherit' : '1.25rem' }} >\n                {title}\n            </DialogTitle>\n            {children && (\n                <DialogContent dividers>\n                    <DialogContentText>{children}</DialogContentText>\n                </DialogContent>\n            )}\n            {(onCancel || onConfirm) && (\n                < DialogActions >\n                    {onCancel && <Button onClick={onCancel}>{cancelText}</Button>}\n                    {onConfirm && <Button onClick={onConfirm} autoFocus>{okText}</Button>}\n                </DialogActions>\n            )}\n        </Dialog >\n    )\n}\nexport { DialogComponent }\n","const actionsStateProvider = {\n    UPDATE_FORM_MODE:'UPDATE_FORM_MODE',\n    UPDATE_DATE_TIME:'UPDATE_DATE_TIME',\n    UPDATE_LOCALIZATION: 'UPDATE_LOCALIZATION',\n    PAGE_TITLE_DETAILS:'PAGE_TITLE_DETAILS',\n    OPEN_MODAL:'OPEN_MODAL',\n    SET_PAGE_BACK_BUTTON:'SET_PAGE_BACK_BUTTON',\n    SET_GRID_SETTINGS:'SET_GRID_SETTINGS',\n    SET_LOCAL_LOCALIZATION:'SET_LOCAL_LOCALIZATION',\n    USER_DATA:'USER_DATA',\n    UDPATE_PREFERENCES: 'UDPATE_PREFERENCES',\n    TOTAL_PREFERENCES: 'TOTAL_PREFERENCES',\n    SET_CURRENT_PREFERENCE_NAME: 'SET_CURRENT_PREFERENCE_NAME',\n    UPDATE_LOADER_STATE: 'UPDATE_LOADER_STATE',\n    PASS_FILTERS_TO_HEADER: 'PASS_FILTERS_TO_HEADER',\n    SET_TIMEZONE: 'SET_TIMEZONE'\n  };\n  export default actionsStateProvider;","import actionsStateProvider from '../useRouter/actions';\nlet pendingRequests = 0;\n\nconst HTTP_STATUS_CODES = {\n    OK: 200,\n    SESSION_EXPIRED: 401,\n    FORBIDDEN: 403,\n    NOT_FOUND: 404,\n    INTERNAL_SERVER_ERROR: 500\n};\n\nconst getFormData = (props) => {\n    const formData = new FormData();\n    for (const key in props) {\n        if (typeof props[key] === \"object\") {\n            formData.append(key, JSON.stringify(props[key]));\n        } else {\n            formData.append(key, props[key]);\n        }\n    }\n    return formData;\n};\n\nconst exportRequest = (url, query) => {\n    const newURL = new URL(url);\n    for (const key in query) {\n        const value = typeof query[key] === 'object' ? JSON.stringify(query[key]) : query[key];\n        newURL.searchParams.append(key, value);\n    }\n    window.open(newURL, '_blank').focus();\n};\n\nconst transport = async (config) => {\n    const {\n        method = 'GET',\n        url,\n        data,\n        headers = {},\n        credentials = 'include',\n        ...rest\n    } = config;\n\n    const fetchOptions = {\n        method,\n        credentials,\n        headers: {\n            ...headers\n        },\n        ...rest\n    };\n\n    if (data) {\n        if (headers['Content-Type'] === 'multipart/form-data') {\n            delete fetchOptions.headers['Content-Type']; // Let browser set it\n            fetchOptions.body = data instanceof FormData ? data : getFormData(data);\n        } else {\n            fetchOptions.headers['Content-Type'] = headers['Content-Type'] || 'application/json';\n            fetchOptions.body = typeof data === 'string' ? data : JSON.stringify(data);\n        }\n    }\n\n    const response = await fetch(url, fetchOptions);\n    const contentType = response.headers.get('content-type') || {};\n    const responseObj = {\n        status: response.status,\n        data: contentType.includes('application/json') ? await response.json() : await response.text(),\n        headers: Object.fromEntries(response.headers.entries())\n    };\n\n    return responseObj;\n};\n\n/**\n * Default data parsers for different response types\n * Use these to normalize API responses to a consistent type\n */\nconst DATA_PARSERS = {\n    /**\n     * Parse JSON string or return object as-is\n     * Automatically handles string JSON responses\n     */\n    json: (data) => {\n        if (typeof data === 'string') {\n            return JSON.parse(data);\n        }\n        return data;\n    },\n    /**\n     * Convert to string\n     */\n    text: (data) => String(data),\n    /**\n     * Return data as-is without parsing\n     */\n    raw: (data) => data\n};\n\n/**\n * Enhanced HTTP request handler with automatic data parsing\n * \n * @param {Object} config - Request configuration\n * @param {string} config.url - API endpoint URL\n * @param {Object} config.params - Request parameters\n * @param {Function} config.history - Navigation function for redirects\n * @param {boolean} config.jsonPayload - Whether to send JSON payload instead of FormData\n * @param {Object} config.additionalParams - Additional fetch parameters\n * @param {Object} config.additionalHeaders - Additional request headers\n * @param {boolean} config.disableLoader - Whether to disable the loading indicator\n * @param {Function} config.dispatchData - Redux dispatch function\n * @param {Function} config.dataParser - Parser function to normalize response data (default: DATA_PARSERS.raw)\n * @param {Function} config.onParseError - Custom error handler for parse failures\n * \n * @returns {Promise<any>} Parsed response data or error object\n * \n * @example\n * // Basic usage with automatic JSON parsing\n * const data = await request({ \n *   url: '/api/data', \n *   params: { id: 1 },\n *   dispatchData \n * });\n * \n * @example\n * // With custom error handling\n * const data = await request({ \n *   url: '/api/data',\n *   params: { id: 1 },\n *   dispatchData,\n *   onParseError: (error, rawData) => {\n *     console.error('Parse failed:', error);\n *     return { error: true, message: 'Custom error message' };\n *   }\n * });\n * \n * @example\n * // Using text parser\n * const text = await request({ \n *   url: '/api/text', \n *   params: {},\n *   dispatchData,\n *   dataParser: DATA_PARSERS.text\n * });\n */\n\nconst request = async ({ \n    url, \n    params = {}, \n    history, \n    jsonPayload = false, \n    additionalParams = {}, \n    additionalHeaders = {}, \n    disableLoader = false, \n    dispatchData,\n    dataParser = DATA_PARSERS.raw,\n    onParseError\n}) => {\n    if (params.exportData) {\n        return exportRequest(url, params);\n    }\n    disableLoader = disableLoader || typeof dispatchData !== 'function';\n    if (!disableLoader) {\n        dispatchData({ type: actionsStateProvider.UPDATE_LOADER_STATE, payload: true });\n    }\n    pendingRequests++;\n\n    const reqParams = {\n        method: 'POST',\n        credentials: 'include',\n        url: url,\n        headers: jsonPayload ? { ...additionalHeaders } : { 'Content-Type': 'multipart/form-data', ...additionalHeaders },\n        ...additionalParams\n    };\n\n    if (params) {\n        reqParams.data = jsonPayload ? params : getFormData(params);\n    }\n\n    try {\n        const response = await transport(reqParams);\n        pendingRequests--;\n        let data = response.data;\n\n        if (pendingRequests === 0 && !disableLoader) {\n            dispatchData({ type: 'UPDATE_LOADER_STATE', payload: false });\n        }\n\n        // Handle HTTP errors here\n        if (response.status === HTTP_STATUS_CODES.SESSION_EXPIRED && history) {\n            history('/login');\n            return;\n        }\n        if (response.status !== HTTP_STATUS_CODES.OK) {\n            // You can return the error object or handle as needed\n            return { error: true, message: data.message || 'An error occurred' };\n        }\n\n        // Apply data parser to normalize response\n        try {\n            data = dataParser(data);\n        } catch (parseError) {\n            if (onParseError) {\n                return onParseError(parseError, data);\n            }\n            // Return error in standard format\n            return { \n                error: true, \n                message: 'Failed to parse response data', \n                parseError: parseError.message,\n                rawData: data \n            };\n        }\n\n        return data;\n    } catch (ex) {\n        pendingRequests--;\n        if (pendingRequests === 0 && !disableLoader) {\n            dispatchData({ type: 'UPDATE_LOADER_STATE', payload: false });\n        }\n        // Only network errors will be caught here\n        return { error: true, message: ex.message || 'Network error' };\n    }\n};\n\nexport {\n    HTTP_STATUS_CODES,\n    transport,\n    DATA_PARSERS\n};\n\nexport default request;","import actionsStateProvider from \"../useRouter/actions\";\nimport { transport, HTTP_STATUS_CODES } from \"./httpRequest\";\n\nconst dateDataTypes = ['date', 'dateTime'];\nconst lookupDataTypes = ['singleSelect'];\nconst timeInterval = 200;\n\nconst isLocalTime = (dateValue) => new Date().getTimezoneOffset() === new Date(dateValue).getTimezoneOffset();\n\n/**\n * Handles common HTTP error responses such as session expiration and forbidden access.\n * If an error is detected, sets an appropriate error message and redirects the user after a delay.\n * Returns true if a common error was handled, otherwise false.\n * \n * @param {Object} response - The HTTP response object containing the status code.\n * @param {Function} setError - Callback function to set the error message.\n * @returns {boolean} Returns true if a common error was handled and a redirect is triggered, otherwise false.\n */\nconst handleCommonErrors = (response, setError) => {\n    if (response.status === HTTP_STATUS_CODES.SESSION_EXPIRED) {\n        setError('Session Expired!');\n        setTimeout(() => {\n            window.location.href = '/';\n        }, timeInterval);\n        return true;\n    } else if (response.status === HTTP_STATUS_CODES.FORBIDDEN) {\n        setError('Access Denied!');\n        setTimeout(() => {\n            window.location.href = '/';\n        }, timeInterval);\n        return true;\n    } else if (response.status === HTTP_STATUS_CODES.INTERNAL_SERVER_ERROR) {\n        setError('Internal Server Error');\n    }\n    return false;\n};\n\nfunction shouldApplyFilter(filter) {\n    const { operator, value, type } = filter;\n\n    const isUnaryOperator = [\"isEmpty\", \"isNotEmpty\"].includes(operator);\n    const hasValidValue = value !== undefined &&\n        value !== null &&\n        (value !== '' || (type === 'number' && value === 0) || (type === 'boolean' && value === false));\n\n    return isUnaryOperator || hasValidValue;\n}\n\nconst getList = async ({ gridColumns, setIsLoading, setData, page, pageSize, sortModel, filterModel, api, parentFilters, action = 'list', setError, extraParams, contentType, columns, controllerType = 'node', template = null, configFileName = null, dispatchData, showFullScreenLoader = false, model, baseFilters = null, isElasticExport }) => {\n    if (!contentType) {\n        if (showFullScreenLoader) {\n            dispatchData({ type: actionsStateProvider.UPDATE_LOADER_STATE, payload: true });\n        }\n    }\n\n    const lookups = [];\n    const lookupWithDeps = []; // for backward compatibility having two lookups arrays\n    const dateColumns = [];\n    gridColumns.forEach(({ lookup, type, field, keepLocal = false, keepLocalDate, filterable = true, dependsOn }) => {\n        if (dateDataTypes.includes(type)) {\n            dateColumns.push({ field, keepLocal, keepLocalDate });\n        }\n        if (!lookup) {\n            return;\n        }\n        if (!lookups.includes(lookup) && lookupDataTypes.includes(type) && filterable) {\n            lookups.push(lookup);\n            lookupWithDeps.push({ lookup, dependsOn });\n        }\n    });\n\n    const where = [];\n    if (filterModel?.items?.length) {\n        filterModel.items.forEach(filter => {\n            if (shouldApplyFilter(filter)) {\n                const { field, operator, filterField } = filter;\n                let { value } = filter;\n                const column = gridColumns.filter((item) => item?.field === filter.field);\n                const type = column[0]?.type;\n                if (type === 'boolean') {\n                    value = (value === 'true' || value === true) ? 1 : 0;\n                } else if (type === 'number') {\n                    value = Array.isArray(value) ? value.filter(e => e) : value;\n                }\n                value = filter.filterValues || value;\n                where.push({\n                    field: filterField || field,\n                    operator,\n                    value,\n                    type\n                });\n            }\n        });\n    }\n    if (parentFilters) {\n        where.push(...parentFilters);\n    }\n\n    if (baseFilters) {\n        where.push(...baseFilters);\n    }\n    const requestData = {\n        start: page * pageSize,\n        limit: isElasticExport ? model.exportSize : pageSize,\n        ...extraParams,\n        logicalOperator: filterModel.logicOperator,\n        sort: sortModel.map(sort => (sort.filterField || sort.field) + ' ' + sort.sort).join(','),\n        where,\n        isElasticExport,\n        model: model.module,\n        fileName: model.overrideFileName\n    };\n\n    if (lookups.length) {\n        requestData.lookups = lookups.join(',');\n    }\n\n    if (lookupWithDeps.length) {\n        requestData.lookupWithDeps = JSON.stringify(lookupWithDeps);\n    }\n\n    if (model?.limitToSurveyed) {\n        requestData.limitToSurveyed = model?.limitToSurveyed;\n    }\n\n    const headers = {};\n    let url = controllerType === 'cs' ? `${api}?action=${action}&asArray=0` : `${api}/${action}`;\n\n    if (template !== null) {\n        url += `&template=${template}`;\n    }\n    if (configFileName !== null) {\n        url += `&configFileName=${configFileName}`;\n    }\n    if (contentType) {\n        const form = document.createElement(\"form\");\n        requestData.responseType = contentType;\n        requestData.columns = columns;\n        requestData.userTimezoneOffset = -new Date().getTimezoneOffset(); // Negate to get the correct offset for conversion\n        form.setAttribute(\"method\", \"POST\");\n        form.setAttribute(\"id\", \"exportForm\");\n        form.setAttribute(\"target\", \"_blank\");\n        if (template === null) {\n            for (const key in requestData) {\n                let v = requestData[key];\n                if (v === undefined || v === null) {\n                    continue;\n                } else if (typeof v !== 'string') {\n                    v = JSON.stringify(v);\n                }\n                const hiddenTag = document.createElement('input');\n                hiddenTag.type = \"hidden\";\n                hiddenTag.name = key;\n                hiddenTag.value = v;\n                form.append(hiddenTag);\n            }\n        }\n        form.setAttribute('action', url);\n        document.body.appendChild(form);\n        form.submit();\n        setTimeout(() => {\n            document.getElementById(\"exportForm\").remove();\n        }, 3000);\n        return;\n    }\n    try {\n        setIsLoading(true);\n        const params = {\n            url,\n            method: 'POST',\n            data: requestData,\n            headers: {\n                \"Content-Type\": \"application/json\",\n                ...headers\n            },\n            credentials: 'include'\n        };\n        setData(prevData => ({\n            ...prevData,\n            records: [] // reset records to empty array before fetching new data\n        }));\n        const response = await transport(params);\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            const { records } = response.data;\n            if (records) {\n                records.forEach(record => {\n                    dateColumns.forEach(column => {\n                        const { field, keepLocal, keepLocalDate } = column;\n                        if (record[field]) {\n                            record[field] = new Date(record[field]);\n                            if (keepLocalDate) {\n                                const userTimezoneOffset = record[field].getTimezoneOffset() * 60000;\n                                record[field] = new Date(record[field].getTime() + userTimezoneOffset);\n                            }\n                            if (keepLocal && !isLocalTime(record[field])) {\n                                const userTimezoneOffset = record[field].getTimezoneOffset() * 60000;\n                                record[field] = new Date(record[field].getTime() + userTimezoneOffset);\n                            }\n                        }\n                    });\n                    model.columns.forEach(({ field, displayIndex }) => {\n                        if (!displayIndex) return;\n                        record[field] = record[displayIndex];\n                    });\n                });\n            }\n            setData(response.data);\n        } else if (!handleCommonErrors(response, setError)) {\n            setError(response.statusText);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not list record', error.message || error.toString());\n        } else{\n            setError('Network failure or server unreachable. Please try again.');\n        }\n    } finally {\n        setIsLoading(false);\n        if (!contentType && showFullScreenLoader) {\n            dispatchData({ type: actionsStateProvider.UPDATE_LOADER_STATE, payload: false });\n        }\n    }\n};\n\nconst getRecord = async ({ api, id, setIsLoading, setActiveRecord, model, parentFilters, where = {}, setError }) => {\n    api = api || model.api;\n    setIsLoading(true);\n    const searchParams = new URLSearchParams();\n    const url = `${api}/${id === undefined || id === null ? '-' : id}`;\n    const lookupsToFetch = [];\n    const fields = model.formDef || model.columns;\n    fields?.forEach(field => {\n        if (field.lookup && !lookupsToFetch.includes(field.lookup) && !field.dependsOn) {\n            lookupsToFetch.push(field.lookup);\n        }\n    });\n    searchParams.set(\"lookups\", lookupsToFetch);\n    if (where && Object.keys(where)?.length) {\n        searchParams.set(\"where\", JSON.stringify(where));\n    }\n    try {\n        const response = await transport({\n            url: `${url}?${searchParams.toString()}`,\n            method: 'GET',\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            const { data: record, lookups } = response.data;\n            let title = record[model.linkColumn];\n            const columnConfig = model.columns.find(a => a.field === model.linkColumn);\n            if (columnConfig && columnConfig.lookup) {\n                if (lookups && lookups[columnConfig.lookup] && lookups[columnConfig.lookup]?.length) {\n                    const lookupValue = lookups[columnConfig.lookup].find(a => a.value === title);\n                    if (lookupValue) {\n                        title = lookupValue.label;\n                    }\n                }\n            }\n            const defaultValues = { ...model.defaultValues };\n            setActiveRecord({ id, title: title, record: { ...defaultValues, ...record, ...parentFilters }, lookups });\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Could not load record', response.body.toString());\n        }\n    } catch (error) {\n        if (error.response && handleCommonErrors(error.response, setError)) {\n            setError('Could not load record', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n};\n\nconst deleteRecord = async function ({ id, api, setIsLoading, setError }) {\n    const result = { success: false, error: '' };\n    if (!id) {\n        setError('Deleted failed. No active record.');\n        return;\n    }\n    setIsLoading(true);\n    try {\n        const response = await transport({\n            url: `${api}/${id}`,\n            method: 'DELETE',\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            if (response.data && !response.data.success) {\n                result.success = false;\n                setError('Delete failed', response.data.message);\n                return false;\n            }\n            result.success = true;\n            return true;\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Delete failed', response.body);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not delete record', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n    return result;\n};\n\nconst saveRecord = async function ({ id, api, values, setIsLoading, setError }) {\n    let url, method;\n\n    if (id !== 0) {\n        url = `${api}/${id}`;\n        method = 'PUT';\n    } else {\n        url = api;\n        method = 'POST';\n    }\n\n\n    try {\n        setIsLoading(true);\n        const response = await transport({\n            url,\n            method,\n            data: values,\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            const data = response.data;\n            if (data.success) {\n                return data;\n            }\n            setError('Save failed', data.err || data.message);\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Save failed', response.body);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not save record', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n\n    return false;\n};\n\nconst getLookups = async ({ api, setIsLoading, setActiveRecord, model, setError, lookups, scopeId }) => {\n    api = api || model.api;\n    setIsLoading(true);\n    const searchParams = new URLSearchParams();\n    const url = `${api}/lookups`;\n    searchParams.set(\"lookups\", lookups);\n    searchParams.set(\"scopeId\", scopeId);\n    try {\n        const response = await transport({\n            url: `${url}?${searchParams.toString()}`,\n            method: 'GET',\n            credentials: 'include'\n        });\n        if (response.status === HTTP_STATUS_CODES.OK) {\n            setActiveRecord(response.data);\n        } else if (!handleCommonErrors(response, setError)) {\n            setError('Could not load lookups', response.statusText);\n        }\n    } catch (error) {\n        if (error.response && !handleCommonErrors(error.response, setError)) {\n            setError('Could not load lookups', error.message || error.toString());\n        }\n    } finally {\n        setIsLoading(false);\n    }\n};\nexport {\n    getList,\n    getRecord,\n    deleteRecord,\n    saveRecord,\n    getLookups,\n};\n\nconst crudHelper = {\n    getList,\n    getRecord,\n    deleteRecord,\n    saveRecord,\n    getLookups,\n};\n\nexport default crudHelper;\n","import {\n    GridFooterContainer,\n    GridFooter\n} from '@mui/x-data-grid-premium';\nimport Box from '@mui/material/Box';\nimport Typography from '@mui/material/Typography';\nimport TextField from '@mui/material/TextField';\nimport Button from '@mui/material/Button';\nimport { useTranslation } from 'react-i18next';\nimport React, { useEffect, useState } from 'react';\nconst Footer = ({ pagination, apiRef, tTranslate = (key) => key }) => {\n    const page = apiRef.current.state.pagination.paginationModel.page;\n    const rowsPerPage = apiRef.current.state.pagination.paginationModel.pageSize;\n    const totalRows = apiRef.current.state.rows.totalRowCount;\n    const totalPages = Math.ceil(totalRows / rowsPerPage);\n    const { t: translate, i18n } = useTranslation();\n    const tOpts = { t: translate, i18n };\n    const [pageNumber, setPageNumber] = useState(page + 1);\n\n    const handleChange = function (e) {\n        let value = e.target?.value;\n\n        if (value === '') {\n            setPageNumber('');\n        } else {\n            value = parseInt(value);\n            value = isNaN(value) || value < 1 ? 1 : value;\n            setPageNumber(value);\n        }\n    };\n\n    useEffect(() => {\n        setPageNumber(page + 1);\n    }, [page, rowsPerPage]);\n\n    const onPageChange = function () {\n        let targetPage = pageNumber === '' ? 1 : pageNumber;\n        targetPage = Math.max(targetPage, 1);\n        targetPage = Math.min(targetPage, totalPages);\n        apiRef.current.setPage(targetPage - 1);\n        setPageNumber(targetPage);\n        if (pageNumber === '') {\n            setPageNumber(1);\n        }\n    };\n    const handleKeyPress = (event) => {\n        const keyCode = event.which || event.keyCode;\n        const keyValue = String.fromCharCode(keyCode);\n        if (!/\\d/.test(keyValue)) event.preventDefault();\n    };\n\n    return (\n        <GridFooterContainer>\n            <Box sx={{ pl: 5 }}>\n                {pagination &&\n                    <>\n                        <Typography variant=\"p\">{tTranslate('Jump to page', tOpts)}:</Typography>\n                        <TextField\n                            sx={{\n                                width: 70,\n                                pl: 1,\n                                '& input[type=number]::-webkit-inner-spin-button': {\n                                    cursor: 'pointer'\n                                },\n                                '& input[type=number]::-webkit-outer-spin-button': {\n                                    cursor: 'pointer'\n                                }\n                            }}\n                            variant=\"standard\"\n                            type='number'\n                            min={1}\n                            value={pageNumber}\n                            onChange={handleChange}\n                            onKeyPress={handleKeyPress}\n                            disabled={!totalRows}\n                        />\n                        <Button disabled={!totalRows} size='small' onClick={onPageChange}>{tTranslate('Go', tOpts)}</Button>\n                    </>\n                }\n            </Box>\n            <GridFooter />\n        </GridFooterContainer>\n    );\n};\nexport { Footer };","const defaultTemplate = /\\${((\\w+)\\.)?(\\w+)}/g;\n\n/**\n * @description Replaces the given tags in the given source with the given values.\n * @param {string} source The source to replace the tags in.\n * @param {object} values The values to replace the tags with.\n * @param {object} options template - Regex to use for matching tags, keepMissingTags - Whether to keep tags that are not replaced.\n * @returns {string} The source with the tags replaced.\n * @example\n * // Replaces all tags in the given source with the given values.\n * console.log(template(\"${firstName} ${lastName}\", { firstName: \"John\", lastName: \"Doe\" }));\n * // -> \"John Doe\"\n * // Two level tags are supported.\n * console.log(template(\"${user.firstName} ${user.lastName}\", { user: { firstName: \"John\", lastName: \"Doe\" } }));\n * // -> \"John Doe\"\n **/\nconst replaceTags = function (source, tags, { template = defaultTemplate, keepMissingTags = false } = {}) {\n    if (!source || !tags) {\n        return source;\n    }\n\n    return source.replace(template, function (match, g1, g2, g3) {\n        const container = g2 ? tags[g2] || {} : tags;\n        return container[g3] === undefined ? (keepMissingTags ? match : \"\") : container[g3];\n    });\n};\n\nexport default {\n    replaceTags\n};","import React from 'react';\nimport { Typography } from \"@mui/material\";\n\nexport default function MuiTypography({ variant = \"h2\", component = \"h2\", text = '', name = null, ...rest }) {\n    return (\n        <Typography variant={variant} component={component} {...rest}>\n            {text}\n            {name && ` ${name}`}\n        </Typography>\n    );\n}","import { useState, useEffect } from 'react';\n\nfunction useMobile(onlyMobile = false) {\n  const initialValue = checkDevice();\n  const [view, setView] = useState(initialValue);\n\n  function handleWindowSizeChange() {\n    setTimeout(() => {\n      setView(checkDevice())\n    }, 10);\n  }\n\n  useEffect(() => {\n    window.addEventListener('resize', handleWindowSizeChange);\n    return () => {\n      window.removeEventListener('resize', handleWindowSizeChange);\n    }\n  }, []);\n\n\n  function checkDevice() {\n    let userAgent = typeof window.navigator === \"undefined\" ? \"\" : navigator.userAgent;\n    const mobile = Boolean(userAgent.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile|WPDesktop/i));\n    userAgent = userAgent.toLowerCase();\n    const tablet = /(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(userAgent);\n    let currentOrientation = null;\n    if (window.innerWidth <= window.innerHeight) {\n      currentOrientation = \"portrait\";\n    } else {\n      currentOrientation = \"landscape\";\n    }\n    return { mobile, tablet, portrait: currentOrientation === 'portrait', landscape: currentOrientation === 'landscape' };\n  }\n\n  return onlyMobile ? view.mobile : view;\n}\n\nexport default useMobile;","import actionsStateProvider from \"./actions\";\nconst stateReducer = (state, action) => {\n    switch (action.type) {\n        case actionsStateProvider.UPDATE_LOCALIZATION:\n            return { ...state, dataLocalization: action.payload };\n        case actionsStateProvider.UPDATE_DATE_TIME:\n            return { ...state, dateTime: action.payload };\n        case actionsStateProvider.UPDATE_FORM_MODE:\n            return { ...state, dataForm: action.payload };\n        case actionsStateProvider.PAGE_TITLE_DETAILS:\n            return { ...state, pageTitleDetails: action.payload };\n        case actionsStateProvider.OPEN_MODAL:\n            return { ...state, modal: action.payload };\n        case actionsStateProvider.SET_PAGE_BACK_BUTTON:\n            return { ...state, pageBackButton: action.payload };\n        case actionsStateProvider.SET_GRID_SETTINGS:\n            return { ...state, gridSettings: action.payload };\n        case actionsStateProvider.SET_LOCAL_LOCALIZATION:\n            return { ...state, getLocal: action.payload };\n        case actionsStateProvider.USER_DATA:\n            return { ...state, getUserData: action.payload };\n        case actionsStateProvider.UDPATE_PREFERENCES:\n            return { ...state, preferences: action.payload };\n        case actionsStateProvider.SET_CURRENT_PREFERENCE_NAME:\n            return { ...state, currentPreference: action.payload };\n        case actionsStateProvider.TOTAL_PREFERENCES:\n            return { ...state, totalPreferences: action.payload };\n        case actionsStateProvider.UPDATE_LOADER_STATE:\n            return { ...state, loaderOpen: action.payload };\n        case actionsStateProvider.PASS_FILTERS_TO_HEADER:\n            return { ...state, filtersInHeader: action.payload };\n        case actionsStateProvider.SET_TIMEZONE:\n            return { ...state, timeZone: action.payload };\n        default:\n            return state;\n    }\n};\nexport default stateReducer;","const initialState = {\n    dataLocalization: 'en',\n    dateTime: 'MM/DD/YYYY hh:mm:ss A',\n    dataForm: '',\n    pageTitleDetails:null,\n    modal:null,\n    pageBackButton:null,\n    gridSettings:{},\n    getLocal:{},\n    getUserData:null,\n    preferences: [],\n    currentPreference: null,\n    totalPreferences: null,\n    loaderOpen: false,\n    filtersInHeader: {},\n    timeZone: \"\"\n  };\n\n  export default initialState;","import * as locales from '@mui/x-data-grid-premium';\nexport const daDKGrid = {\n\n    Jumptopage: 'Gå til side',\n    Go: 'Gå',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'I dette rum vil vi snart bringe dig et dashboard med hovedoversigt KPIer for nem adgang',\n    Pages: 'sider',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Rækker pr. side',\n    }\n};\nconst mergedLocalizationDatadaDK = {\n    ...locales['daDK'],\n    ...daDKGrid,\n};\nexport default mergedLocalizationDatadaDK;\n","import * as locales from '@mui/x-data-grid-premium';\nexport const deDEGrid = {\n    Jumptopage: 'Zur Seite springen',\n    Go: 'Gehen',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'In diesem Bereich werden wir Ihnen in Kürze ein Dashboard mit den wichtigsten Übersichts-KPIs für einen einfachen Zugriff bereitstellen',\n    Pages: 'Seiten',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Zeilen pro Seite',\n    }\n};\nconst mergedLocalizationDatadeDE= {\n    ...locales['deDE'],\n    ...deDEGrid,\n};\n\nexport default mergedLocalizationDatadeDE;","import * as locales from '@mui/x-data-grid-premium';\nexport const elGRGrid = {\n    Jumptopage: 'Μετάβαση στη σελίδα',\n    Go: 'Πηγαίνω',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'Σε αυτόν τον χώρο θα σας φέρουμε σύντομα έναν πίνακα ελέγχου βασικών επισκόπησης KPI για εύκολη πρόσβαση',\n    Pages: 'Σελίδες',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Σειρές ανά σελίδα',\n    }\n};\nconst mergedLocalizationDataelGR = {\n    ...locales['elGR'],\n    ...elGRGrid,\n};\n\nexport default mergedLocalizationDataelGR;","import * as locales from '@mui/x-data-grid-premium';\nexport const esESGrid = {\n    Jumptopage: 'Saltar a la página',\n    Go: 'Ir',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'En este espacio pronto le ofreceremos un panel con los principales KPI generales para un fácil acceso.',\n    Pages: 'paginas',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Filas por página',\n    }\n};\nconst mergedLocalizationDataesES = {\n    ...locales['esES'],\n    ...esESGrid,\n};\n\nexport default mergedLocalizationDataesES;","\n\nimport * as locales from '@mui/x-data-grid-premium';\nexport const frFRGrid = {\n    Jumptopage: 'Aller à la page',\n    Go: 'Aller',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'Dans cet espace, nous vous proposerons bientôt un tableau de bord des principaux KPI pour un accès facile.',\n    Pages: 'Pages',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Lignes par page',\n    }\n};\nconst mergedLocalizationDatafrFR = {\n    ...locales['frFR'],\n    ...frFRGrid,\n};\nexport default mergedLocalizationDatafrFR;","\nimport * as locales from '@mui/x-data-grid-premium';\nexport const itITGrid = {\n    Jumptopage: 'Vai alla pagina',\n    Go: 'Andare',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'In questo spazio presto ti forniremo una dashboard con i principali KPI generali per un facile accesso',\n    Pages: 'Pagine',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Righe per pagina',\n    }\n};\nconst mergedLocalizationDataitIT = {\n    ...locales['itIT'],\n    ...itITGrid,\n};\n\nexport default mergedLocalizationDataitIT;","\nimport * as locales from '@mui/x-data-grid-premium';\nexport const trTRGrid = {\n  Jumptopage: 'Sayfaya atla',\n  Go: 'Gitmek',\n  InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'Bu alanda yakında size kolay erişim için ana genel bakış KPI larının bir kontrol panelini sunacağız',\n  Pages: 'Sayfalar',\n  MuiTablePagination: {\n    labelRowsPerPage: 'Sayfa başına satır',\n  },\n};\nconst mergedLocalizationDatatrTR = {\n  ...locales['trTR'],\n  ...trTRGrid,\n};\nexport default mergedLocalizationDatatrTR;\n","export default {\n  components: {\n    MuiDataGrid: {\n      defaultProps: {\n        localeText: {\n          Add: \"createew\",\n          noRowsLabel: 'Sem resultados',\n          noResultsOverlayLabel: 'Nenhum resultado encontrado.',\n\n          // Density selector toolbar button text\n          toolbarDensity: 'Densidade',\n          toolbarDensityLabel: 'Densidade',\n          toolbarDensityCompact: 'Compacto',\n          toolbarDensityStandard: 'Padrão',\n          toolbarDensityComfortable: 'Confortável',\n\n          // Columns selector toolbar button text\n          toolbarColumns: 'Colunas',\n          toolbarColumnsLabel: 'Selecionar colunas',\n\n          // Filters toolbar button text\n          toolbarFilters: 'Filtros',\n          toolbarFiltersLabel: 'Mostrar filtros',\n          toolbarFiltersTooltipHide: 'Esconder filtros',\n          toolbarFiltersTooltipShow: 'Mostrar filtros',\n          toolbarFiltersTooltipActive: (count) =>\n            count !== 1 ? `${count} filtros ativos` : `${count} filtro ativo`,\n\n          // Quick filter toolbar field\n          toolbarQuickFilterPlaceholder: 'Pesquisar...',\n          toolbarQuickFilterLabel: 'Pesquisar',\n          toolbarQuickFilterDeleteIconLabel: 'Limpar',\n\n          // Export selector toolbar button text\n          toolbarExport: 'Exportar',\n          toolbarExportLabel: 'Exportar',\n          toolbarExportCSV: 'Baixar como CSV',\n          toolbarExportPrint: 'Imprimir',\n          toolbarExportExcel: 'Baixar como Excel',\n\n          // Columns panel text\n          columnsPanelTextFieldLabel: 'Encontrar coluna',\n          columnsPanelTextFieldPlaceholder: 'Título da coluna',\n          columnsPanelDragIconLabel: 'Reorganizar coluna',\n          columnsPanelShowAllButton: 'Mostrar todas',\n          columnsPanelHideAllButton: 'Esconder todas',\n\n          // Filter panel text\n          filterPanelAddFilter: 'Adicionar filtro',\n          filterPanelRemoveAll: 'Remover todos',\n          filterPanelDeleteIconLabel: 'Excluir',\n          filterPanelLogicOperator: 'Operador lógico',\n          filterPanelOperator: 'Operador',\n          filterPanelOperatorAnd: 'E',\n          filterPanelOperatorOr: 'Ou',\n          filterPanelColumns: 'Colunas',\n          filterPanelInputLabel: 'Valor',\n          filterPanelInputPlaceholder: 'Valor do filtro',\n\n          // Filter operators text\n          filterOperatorContains: 'contém',\n          filterOperatorEquals: 'é igual a',\n          filterOperatorStartsWith: 'começa com',\n          filterOperatorEndsWith: 'termina com',\n          filterOperatorIs: 'é',\n          filterOperatorNot: 'não é',\n          filterOperatorAfter: 'é posterior a',\n          filterOperatorOnOrAfter: 'é em ou depois de',\n          filterOperatorBefore: 'é anterior a',\n          filterOperatorOnOrBefore: 'é em ou antes de',\n          filterOperatorIsEmpty: 'está vazio',\n          filterOperatorIsNotEmpty: 'não está vazio',\n          filterOperatorIsAnyOf: 'é algum de',\n          'filterOperator=': '=',\n          'filterOperator!=': '!=',\n          'filterOperator>': '>',\n          'filterOperator>=': '>=',\n          'filterOperator<': '<',\n          'filterOperator<=': '<=',\n\n          // Header filter operators text\n          headerFilterOperatorContains: 'Contém',\n          headerFilterOperatorEquals: 'É igual a',\n          headerFilterOperatorStartsWith: 'Começa com',\n          headerFilterOperatorEndsWith: 'Termina com',\n          headerFilterOperatorIs: 'É',\n          headerFilterOperatorNot: 'Não é',\n          headerFilterOperatorAfter: 'É depois de',\n          headerFilterOperatorOnOrAfter: 'É em ou depois de',\n          headerFilterOperatorBefore: 'É antes de',\n          headerFilterOperatorOnOrBefore: 'É em ou antes de',\n          headerFilterOperatorIsEmpty: 'Está vazio',\n          headerFilterOperatorIsNotEmpty: 'Não está vazio',\n          headerFilterOperatorIsAnyOf: 'É algum de',\n          'headerFilterOperator=': 'É igual a',\n          'headerFilterOperator!=': 'Não é igual a',\n          'headerFilterOperator>': 'Maior que',\n          'headerFilterOperator>=': 'Maior ou igual a',\n          'headerFilterOperator<': 'Menor que',\n          'headerFilterOperator<=': 'Menor ou igual a',\n\n          // Filter values text\n          filterValueAny: 'qualquer',\n          filterValueTrue: 'verdadeiro',\n          filterValueFalse: 'falso',\n\n          // Column menu text\n          columnMenuLabel: 'Menu',\n          columnMenuShowColumns: 'Mostrar colunas',\n          columnMenuManageColumns: 'Gerenciar colunas',\n          columnMenuFilter: 'Filtro',\n          columnMenuHideColumn: 'Esconder coluna',\n          columnMenuUnsort: 'Desfazer ordenação',\n          columnMenuSortAsc: 'Ordenar por ASC',\n          columnMenuSortDesc: 'Ordenar por DESC',\n\n          // Column header text\n          columnHeaderFiltersTooltipActive: (count) =>\n            count !== 1 ? `${count} filtros ativos` : `${count} filtro ativo`,\n          columnHeaderFiltersLabel: 'Mostrar filtros',\n          columnHeaderSortIconLabel: 'Ordenar',\n\n          // Rows selected footer text\n          footerRowSelected: (count) =>\n            count !== 1\n              ? `${count.toLocaleString()} linhas selecionadas`\n              : `${count.toLocaleString()} linha selecionada`,\n\n          // Total row amount footer text\n          footerTotalRows: 'Total de linhas:',\n\n          // Total visible row amount footer text\n          footerTotalVisibleRows: (visibleCount, totalCount) =>\n            `${visibleCount.toLocaleString()} de ${totalCount.toLocaleString()}`,\n\n          // Checkbox selection text\n          checkboxSelectionHeaderName: 'Seleção de caixa de seleção',\n          checkboxSelectionSelectAllRows: 'Selecionar todas as linhas',\n          checkboxSelectionUnselectAllRows: 'Desselecionar todas as linhas',\n          checkboxSelectionSelectRow: 'Selecionar linha',\n          checkboxSelectionUnselectRow: 'Desselecionar linha',\n\n          // Boolean cell text\n          booleanCellTrueLabel: 'sim',\n          booleanCellFalseLabel: 'não',\n\n          // Actions cell more text\n          actionsCellMore: 'mais',\n\n          // Column pinning text\n          pinToLeft: 'Fixar à esquerda',\n          pinToRight: 'Fixar à direita',\n          unpin: 'Desafixar',\n\n          // Tree Data\n          treeDataGroupingHeaderName: 'Agrupar',\n          treeDataExpand: 'ver filhos',\n          treeDataCollapse: 'esconder filhos',\n\n          // Grouping columns\n          groupingColumnHeaderName: 'Agrupar',\n          groupColumn: (name) => `Agrupar por ${name}`,\n          unGroupColumn: (name) => `Parar de agrupar por ${name}`,\n\n          // Master/detail\n          detailPanelToggle: 'Alternar painel de detalhes',\n          expandDetailPanel: 'Expandir',\n          collapseDetailPanel: 'Recolher',\n\n          // Used core components translation keys\n          MuiTablePagination: {},\n\n          // Row reordering text\n          rowReorderingHeaderName: 'Reorganização de linhas',\n\n          // Aggregation\n          aggregationMenuItemHeader: 'Agregação',\n          aggregationFunctionLabelSum: 'soma',\n          aggregationFunctionLabelAvg: 'média',\n          aggregationFunctionLabelMin: 'mínimo',\n          aggregationFunctionLabelMax: 'máximo',\n          aggregationFunctionLabelSize: 'tamanho',\n          //footer\n          Jumptopage: 'Ir para a página',\n          Go: 'Ir',\n          InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess:'Neste espaço em breve traremos para você um dashboard com os principais KPIs de visão geral para fácil acesso',\n          Pages:'Páginas',\n          MuiTablePagination: {\n            labelRowsPerPage: 'Linhas por página',\n          }\n        }\n      },\n    },\n  },\n};","\nimport * as locales from '@mui/x-data-grid-premium';\n\nexport const enUSGrid = {\n    Jumptopage: 'Jump to page',\n    Go: 'Go',\n    InthisspacewewillsoonbringyouadashboardofmainoverviewKPIsforeasyaccess: 'In this space we will soon bring you a dashboard of main overview KPIs for easy access',\n    Pages: 'Pages',\n    MuiTablePagination: {\n        labelRowsPerPage: 'Rows per page',\n    },\n};\nconst mergedLocalizationDataenUS = {\n    ...locales['enUS'],\n    ...enUSGrid,\n};\nexport default mergedLocalizationDataenUS;","// localization.js\nimport mergedLocalizationDatadaDK from './data-grid/daDK';\nimport mergedLocalizationDatadeDE from './data-grid/deDE';\nimport mergedLocalizationDataelGR from './data-grid/elGR';\nimport mergedLocalizationDataesES from './data-grid/esES';\nimport mergedLocalizationDatafrFR from './data-grid/frFR';\nimport mergedLocalizationDataitIT from './data-grid/itIT';\nimport mergedLocalizationDatatrTR from './data-grid/trTR';\nimport ptPT from './data-grid/ptPT';\nimport mergedLocalizationDataenUS from './data-grid/enUS';\nimport * as React from 'react';\nexport const locales = {\n  'en': mergedLocalizationDataenUS,\n  'tr-TR': mergedLocalizationDatatrTR,\n  'es-ES': mergedLocalizationDataesES,\n  'da-DK': mergedLocalizationDatadaDK,\n  'de-DE': mergedLocalizationDatadeDE,\n  'el-GR': mergedLocalizationDataelGR,\n  'fr-FR': mergedLocalizationDatafrFR,\n  'pt-PT': ptPT,\n  'it-IT': mergedLocalizationDataitIT\n};","import React, { createContext, useReducer, useContext, useRef } from 'react';\nimport stateReducer from './stateReducer';\nimport initialState from './initialState';\nimport { locales } from '../mui/locale/localization';\nimport dayjs from 'dayjs';\nimport utc from 'dayjs/plugin/utc';\nimport timezone from 'dayjs/plugin/timezone';\n\n// Extend dayjs with the plugins\ndayjs.extend(utc);\ndayjs.extend(timezone);\n\nconst StateContext = createContext();\nconst RouterContext = createContext(null);\n\nconst StateProvider = ({ children, apiEndpoints: initialApiEndpoints = {} }) => {\n\n  const [stateData, dispatchData] = useReducer(stateReducer, initialState);\n\n  // Initialize with provided endpoints or empty object\n  const apiEndpoints = useRef(initialApiEndpoints);\n\n  function setApiEndpoint(key, endpoint) {\n    apiEndpoints.current[key] = endpoint;\n  }\n\n  function getApiEndpoint(key) {\n    return apiEndpoints.current[key];\n  }\n\n  function buildUrl(controllerType, url) {\n    const baseUrl = apiEndpoints.current[controllerType || \"default\"] || '';\n    return `${baseUrl}${url}`;\n  }\n\n  /**\n   * Returns the system date and/or time format string based on user preferences and options.\n   *\n   * @param {boolean} isDateFormatOnly - If true, returns only the date format; otherwise, returns date and time format.\n   * @param {boolean} showOnlyDate - If true and isDateFormatOnly is false, returns only the date part in uppercase.\n   * @param {string|null|undefined} state - The user-defined date/time format string (e.g., \"dd-mm-yyyy hh:mm A\").\n   * @returns {string} The formatted date/time format string.\n   */\n  function systemDateTimeFormat(isDateFormatOnly, showOnlyDate, state) {\n    if (state !== undefined && state !== null) {\n      const userData = state; // Access 'state' \n      let userDateFormat = isDateFormatOnly ? 'DD-MM-YYYY' : 'DD-MM-YYYY hh:mm:ss A';\n      if (userData) {\n        userDateFormat = userData.split(' ');\n        userDateFormat[0] = userDateFormat[0].toUpperCase();\n        if (!isDateFormatOnly) {\n          if (showOnlyDate) {\n            userDateFormat = userDateFormat[0].toUpperCase();\n          } else {\n            userDateFormat[1] += !userDateFormat[1].includes(':ss') ? ':ss' : '';\n            userDateFormat = userDateFormat.join(\" \");\n          }\n        } else {\n          userDateFormat = userDateFormat[0];\n        }\n      };\n      return userDateFormat;\n    }\n    return isDateFormatOnly ? 'DD-MM-YYYY' : 'DD-MM-YYYY hh:mm:ss A';\n  }\n\n  /**\n   * Formats a date value using the system or user-defined format and optional timezone.\n   *\n   * @param {Object} params - The parameters object.\n   * @param {string|Date} params.value - The date value to format.\n   * @param {boolean} params.useSystemFormat - Whether to use the system date format.\n   * @param {boolean} [params.showOnlyDate=false] - Whether to show only the date part.\n   * @param {string|null|undefined} params.state - The user-defined date/time format string.\n   * @param {string} [params.timeZone] - The timezone to use for formatting.\n   * @returns {string} The formatted date string or '-' if value is falsy.\n   */\n  function formatDate({ value, useSystemFormat, showOnlyDate = false, state, timeZone }) {\n    if (!value) return '-';\n    const format = systemDateTimeFormat(useSystemFormat, showOnlyDate, state); // Pass 'state' as an argument\n    if (!timeZone) {\n      return dayjs(value).format(format);\n    }\n    return dayjs(value).tz(timeZone).format(format);\n  }\n\n  /**\n   * Provides localization utilities for the current locale.\n   *\n   * @returns {Object} An object with a getLocalizedString function.\n   */\n  function useLocalization() {\n    const currentLocaleData = stateData.dataLocalization;\n    const localeData = locales[currentLocaleData];\n    function getLocalizedString(key) {\n      return currentLocaleData === 'pt-PT' || currentLocaleData === 'ptPT' ? localeData.components.MuiDataGrid.defaultProps.localeText[key] || key : localeData[key] || key;\n    }\n    return { getLocalizedString };\n  }\n\n  return (\n    <StateContext.Provider value={{ stateData, dispatchData, systemDateTimeFormat, formatDate, useLocalization, getApiEndpoint, setApiEndpoint, buildUrl }}>\n      {children}\n    </StateContext.Provider>\n  );\n};\n\nconst RouterProvider = RouterContext.Provider;\n\nconst useRouter = () => {\n  return useContext(RouterContext);\n};\n\nconst useStateContext = () => {\n  const context = useContext(StateContext);\n  if (context === undefined) {\n    throw new Error('useStateContext must be used within a StateProvider');\n  }\n  return context;\n};\n\nexport { StateProvider, useStateContext, useRouter, RouterProvider };\n","import React, { useEffect, useState } from 'react';\nimport {\n    Grid, Typography,\n    Dialog, DialogContent, DialogTitle,\n} from '@mui/material';\nimport { Replay, Close } from '@mui/icons-material';\nimport { useStateContext } from '../useRouter/StateProvider';\nimport actionsStateProvider from '../useRouter/actions';\n\nconst HelpModal = () => {\n    const [height, setHeight] = useState();\n    const [loading, setLoading] = useState(false);\n    const { stateData, dispatchData } = useStateContext()\n    const openModal = stateData.modal; //useSelector(state => state.appReducer.modal);\n    const ratio = 16 / 9;\n    let zoom = ((window.outerWidth - 10) / window.innerWidth) * 100;\n    const updateHeight = () => {\n        let widthPercentage = document.getElementById('tutorial-iframe');\n        if (widthPercentage) {\n            widthPercentage = widthPercentage.offsetWidth;\n            widthPercentage = widthPercentage / window.innerWidth;\n        } else {\n            widthPercentage = 0.9;\n        }\n        const calculatedHeight = window.innerWidth * widthPercentage * (1 / ratio);\n        const maxHeight = window.innerHeight - 180;\n        setHeight(Math.min(calculatedHeight, maxHeight));\n    };\n    useEffect(() => {\n        if (openModal?.status) {\n            setLoading(true);\n            updateHeight();\n        }\n    }, [openModal, zoom])\n\n    useEffect(() => {\n        window.addEventListener(\"resize\", updateHeight);\n\n        return () => {\n            window.removeEventListener(\"resize\", updateHeight);\n        }\n    }, [])\n\n    function resetIframe() {\n        const iframe = document.getElementById('tutorial-iframe');\n        iframe.src = openModal?.data?.url;\n    }\n\n    return (\n        <div>\n            {openModal?.status &&\n                <Dialog fullWidth={true} maxWidth={\"lg\"} open={openModal.status} onClose={() => {\n                    dispatchData({\n                        type: actionsStateProvider.OPEN_MODAL, payload: { status: false, data: {}, }\n                    })\n                }} >\n                    <DialogTitle className='pt-2 pb-0'>\n                        <Grid container spacing={1}>\n                            <Grid size={11} >\n                                <Typography variant=\"h7\" component='div'> {openModal?.data?.title || ''}</Typography>\n                                <Typography variant=\"caption\" component='div'>{openModal?.data?.subTitle || <>&nbsp;</>}</Typography>\n                            </Grid>\n                            <Grid className=\"text-right\" size={1} >\n                                <Replay className='cursor_pointer mt-2 mr-2' onClick={resetIframe} />\n                                <Close className='cursor_pointer mt-2' onClick={() => {\n                                    dispatchData({\n                                        type: actionsStateProvider.OPEN_MODAL, payload: { status: false, data: {} }\n                                    })\n                                }} />\n                            </Grid>\n                        </Grid>\n                    </DialogTitle>\n                    <DialogContent dividers>\n                        {loading && <div>{\"Loading...\"}</div>}\n                        {openModal?.data?.url && <iframe\n                            id='tutorial-iframe'\n                            style={{ width: '100%', height: `${height}px` }}\n                            title={openModal?.data?.title || ''}\n                            src={openModal?.data?.url}\n                            allowfullscreen\n                            frameborder=\"0\"\n                            loading=\"lazy\"\n                            onLoad={() => setLoading(false)}\n                        />}\n                    </DialogContent>\n                </Dialog>}\n        </div>\n    )\n}\n\nexport default HelpModal","import React, { useEffect } from \"react\";\n\nimport { Box } from \"@mui/material\";\nimport { withTranslation } from \"react-i18next\";\nimport MuiTypography from \"../Typography\";\nimport useMobile from \"../useMobile\";\nimport { Breadcrumbs, Typography, Link as MuiLink, Button, IconButton, Grid } from \"@mui/material\";\nimport HelpIcon from '@mui/icons-material/Help';\nimport HelpModal from \"../HelpModal\";\nimport { Card, CardContent } from '@mui/material';\n\nfunction PageTitle({\n  titleHeading,\n  navigate,\n  name = null,\n  RightComponent = null,\n  mobileRightComponent,\n  title = \"\",\n  titleClass = \"text-theme-blue text-max-width\",\n  showBreadcrumbs,\n  breadcrumbs = [],\n  enableBackButton = false,\n  breadcrumbColor,\n  showHelpButton = false\n}) {\n  const isMobile = useMobile(true);\n  const breadcrumbsLasIndex = breadcrumbs.length - 1;\n  const needToShowBreadcrumbs = showBreadcrumbs && breadcrumbs.length;\n  const handleBack = () => {\n    navigate(-1);\n  };\n\n  // Update document title when title prop changes\n  useEffect(() => {\n    if (title) {\n      document.title = title;\n    }\n  }, [title]);\n\n  return (\n    <>\n      <MuiTypography className=\"print-only\" text={titleHeading} />\n      {needToShowBreadcrumbs && (<>\n        <Card sx={{ mb: 3 }}>\n          <CardContent sx={{ backgroundColor: breadcrumbColor || '#fff' }}>\n            {/* Add BreadCrumbs  */}\n            <Grid container>\n              <Grid sx={{ display: 'flex', alignItems: 'center', flex: 1 }}>\n                <Breadcrumbs variant=\"h5\" aria-label=\"breadcrumb\" separator=\">\" className={`${titleClass} breadcrumbs-text-title text-max-width`}>\n                  {breadcrumbs.map((breadcrumb, index) => index < breadcrumbsLasIndex ? (\n                    <MuiLink onClick={handleBack} key={index} className={`${titleClass} breadcrumbs-text-title text-max-width`} variant=\"inherit\" sx={{ textDecoration: 'none', color: '#1976d2' }}>\n                      {breadcrumb.text}\n                    </MuiLink>\n                  ) : <Typography key={index} className={`${titleClass} breadcrumbs-text-title text-max-width`} variant=\"inherit\">\n                    {breadcrumb.text}\n                  </Typography>)}\n                </Breadcrumbs>\n              </Grid>\n              {(breadcrumbs.length > 1 || enableBackButton) && <Grid sx={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\n                <Button variant=\"contained\" onClick={handleBack}>Back</Button>\n              </Grid>}\n              {showHelpButton && <Grid sx={{ display: 'flex', alignItems: 'center', justifyContent: 'flex-end' }}>\n                <IconButton color=\"primary\" title='Help' size=\"large\">\n                  <HelpIcon fontSize=\"inherit\" />\n                </IconButton>\n              </Grid>}\n            </Grid>\n            {/* Title render */}\n            <Box className=\"app-page-title--first\">\n              <div>\n                <div style={{ display: isMobile ? 'block' : \"flex\", alignItems: \"center\" }}>\n                  <div style={{ flex: \"1 0 auto\" }}>\n                    <MuiTypography\n                      className={`${titleClass} page-text-title`}\n                      variant=\"p\"\n                      text={titleHeading}\n                      name={name}\n                    />\n                  </div>\n                </div>\n              </div>\n            </Box>\n            {/* For Mobile */}\n            {!isMobile && (\n              <>\n                <Box> {RightComponent && <RightComponent />} </Box>\n                <Box> {mobileRightComponent} </Box>\n              </>\n            )}\n          </CardContent>\n        </Card>\n        <HelpModal />\n      </>)}\n    </>\n  );\n}\n\nexport default withTranslation()(PageTitle);\n","const utils = {\n    filterFieldDataTypes: {\n        Number: 'number',\n        String: 'string',\n        Boolean: 'boolean'\n    },\n    fixedFilterFormat: {\n        date: \"YYYY-MM-DD\",\n        datetime: \"YYYY-MM-DD hh:mm:ss a\",\n        dateTimeLocal: \"YYYY-MM-DD hh:mm:ss a\",\n        OverrideDateFormat: \"DD-MMM-YYYY\"\n    },\n    errorMapping: {\n        413: \"Upload failed: The file exceeds the 30 MB size limit. Please select a smaller file.\"\n    },\n    permissionsMapper: {\n        add: \"Permission2\",\n        edit: \"Permission3\",\n        delete: \"Permission4\"\n    },\n    emptyIdValues: [null, undefined, '', '0', 0]\n}\nexport const getPermissions = ({ userData = {}, model, userDefinedPermissions }) => {\n    const { permissions = [] } = userData;\n    userDefinedPermissions = userDefinedPermissions || { add: true, edit: true, delete: true };\n    const userPermissions = permissions.find(item => item.Module === model.module);\n    if (!userPermissions) {\n        return { canAdd: userDefinedPermissions.add, canEdit: userDefinedPermissions.edit, canDelete: userDefinedPermissions.delete };\n    }\n    return {\n        canAdd: userDefinedPermissions.add && Boolean(userPermissions[utils.permissionsMapper.add]),\n        canEdit: userDefinedPermissions.edit && Boolean(userPermissions[utils.permissionsMapper.edit]),\n        canDelete: userDefinedPermissions.delete && Boolean(userPermissions[[utils.permissionsMapper.delete]])\n    };\n};\nexport default utils;","import React from 'react';\nimport dayjs from 'dayjs';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport { DateTimePicker } from '@mui/x-date-pickers/DateTimePicker';\nimport { getGridDateOperators } from '@mui/x-data-grid-premium';\nimport utcPlugin from 'dayjs/plugin/utc.js';\nimport { LocalizationProvider } from '@mui/x-date-pickers/LocalizationProvider';\nimport { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs';\nimport { useStateContext } from '../useRouter/StateProvider';\nimport utils from '../utils';\n\ndayjs.extend(utcPlugin);\nconst componentMap = {\n    date: DatePicker,\n    datetime: DateTimePicker,\n    dateTimeLocal: DateTimePicker\n};\nconst DATEPICKER_MARGIN_TOP = '-10px';\nconst DATEPICKER_MARGIN_BOTTOM = '-16px';\n\nconst LocalizedDatePicker = (props) => {\n    const { fixedFilterFormat } = utils;\n    const { item, applyValue, convert } = props;\n    const { systemDateTimeFormat, stateData } = useStateContext();\n    const columnType = props?.type || 'date';\n    const filterFormat = fixedFilterFormat[columnType];\n    const isValidDate = (date) => {\n        const parsedDate = dayjs(date);\n        return parsedDate.isValid() && parsedDate.year() > 1900;\n    };\n    const format = (systemDateTimeFormat((columnType !== \"datetime\" && columnType !== \"dateTimeLocal\", false, stateData.dateTime)));\n\n    const handleFilterChange = (newValue) => {\n        if (columnType !== \"date\" && columnType !== \"datetime\" && columnType !== \"dateTimeLocal\") return;\n        const isPartialDate = (value) => {\n            if (typeof value !== 'string') return false;\n            return !dayjs(value, format, true).isValid();\n        };\n        if (isPartialDate(newValue)) {\n            return;\n        }\n        if (convert) {\n            newValue = dayjs(newValue).utc();\n            applyValue({ ...item, value: newValue });\n            return;\n        }\n        if (!isValidDate(newValue)) {\n            applyValue({ ...item, value: null });\n            return;\n        }\n        applyValue({ ...item, value: newValue.format(filterFormat) });\n    };\n    const getMonthAbbreviation = (format) => {\n        if (format && format === fixedFilterFormat.OverrideDateFormat) {\n            const parts = format.split('-');\n            return parts.length === 3 ? parts[1] : null;\n        }\n    };\n    const ComponentToRender = componentMap[columnType];\n    const Dateformatvalue = columnType === \"dateTimeLocal\"\n        ? item?.value ? dayjs(item?.value.$d) : null\n        : item?.value ? dayjs(item.value) : null;\n    return (\n        <LocalizationProvider dateAdapter={AdapterDayjs}>\n            <ComponentToRender\n                fullWidth\n                format={format}\n                value={Dateformatvalue}\n                onChange={handleFilterChange}\n                slotProps={{\n                    textField: {\n                        variant: \"standard\", label: props.label,\n                        sx: {\n                            marginTop: DATEPICKER_MARGIN_TOP,\n                            marginBottom: DATEPICKER_MARGIN_BOTTOM\n                        }\n                    }\n                }}\n                localeText={{\n                    fieldMonthPlaceholder: () => {\n                        const monthAbbreviation = getMonthAbbreviation(format);\n                        return monthAbbreviation === \"MMM\" ? 'MMM' : 'MM';\n                    }\n                }}\n            />\n        </LocalizationProvider>\n    );\n};\n\nconst localizedDateFormat = (colProps) => getGridDateOperators().map((operator) => ({\n    ...operator,\n    InputComponent: operator.InputComponent\n        ? (props) => <LocalizedDatePicker {...props} {...colProps} />\n        : undefined\n}));\n\nexport default localizedDateFormat;","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport CloseIcon from '@mui/icons-material/Close';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport EditIcon from '@mui/icons-material/Edit';\nimport SaveIcon from '@mui/icons-material/Save';\nimport SettingsIcon from '@mui/icons-material/Settings';\nimport { Box, Button, Checkbox, FormControlLabel, Grid, List, ListItem, ListItemButton, ListItemText, Menu, MenuItem, Stack, TextField, Typography, Tooltip, ListItemIcon } from '@mui/material';\nimport { DataGridPremium, GridActionsCellItem, useGridApiRef } from '@mui/x-data-grid-premium';\nimport { useFormik } from 'formik';\nimport * as yup from 'yup';\nimport { useSnackbar } from '../SnackBar';\nimport { useTranslation } from 'react-i18next';\nimport request, { DATA_PARSERS } from './httpRequest';\nimport { useStateContext } from '../useRouter/StateProvider';\nimport { DialogComponent } from '../Dialog';\n\nconst actionTypes = {\n    Edit: \"Edit\",\n    Delete: \"Delete\"\n};\n\nconst DIALOG_TYPES = {\n    ADD: \"Add\",\n    EDIT: \"Edit\",\n    MANAGE: \"Manage\",\n    NONE: null\n};\n\nconst gridColumns = [\n    { field: \"prefName\", type: 'string', width: 300, headerName: \"Preference Name\", sortable: false, filterable: false },\n    { field: \"prefDesc\", type: 'string', width: 300, headerName: \"Preference Description\", sortable: false, filterable: false },\n    { field: \"isDefault\", type: \"boolean\", width: 100, headerName: \"Default\", sortable: false, filterable: false },\n    { field: 'editAction', type: 'actions', headerName: '', width: 20, getActions: () => [<GridActionsCellItem key={1} icon={<Tooltip title={actionTypes.Edit}><EditIcon /></Tooltip>} tabIndex={1} data-action={actionTypes.Edit} label=\"Edit\" color=\"primary\" />] },\n    { field: 'deleteAction', type: 'actions', headerName: '', width: 20, getActions: () => [<GridActionsCellItem key={2} icon={<Tooltip title={actionTypes.Delete}><DeleteIcon /></Tooltip>} tabIndex={2} data-action={actionTypes.Delete} label=\"Delete\" color=\"error\" />] }\n];\n\nconst initialValues = {\n    prefName: '',\n    prefDesc: '',\n    isDefault: false\n};\n\nconst paginationModel = { pageSize: 50, page: 0 };\n\nconst pageSizeOptions = [5, 10, 20, 50, 100];\n\nconst GridPreferences = ({ gridRef, onPreferenceChange, t, tOpts }) => {\n    const { getApiEndpoint } = useStateContext();\n    const preferenceApi = getApiEndpoint(\"GridPreferenceManager\");\n    const preferenceKey = gridRef.current?.prefKey;\n    const apiRef = useGridApiRef();\n    const snackbar = useSnackbar();\n    //const { t } = useTranslation(); // To do: to fix useTranslation directly in next release\n    const [dialogState, setDialogState] = useState(DIALOG_TYPES.NONE);\n    const [menuAnchorEl, setMenuAnchorEl] = useState(null);\n    const [openPreferenceExistsModal, setOpenPreferenceExistsModal] = useState(false);\n    const [openConfirmDeleteDialog, setOpenConfirmDeleteDialog] = useState({});\n    const [preferences, setPreferences] = useState(null);\n    const [currentPreference, setCurrentPreference] = useState(null);\n\n    // Filter out the default preference (prefId === 0) for the management grid\n    const nonDefaultPreferences = useMemo(() =>\n        preferences == null ? [] : preferences.filter(pref => pref.prefId !== 0),\n        [preferences]\n    );\n\n    const validationSchema = useMemo(() => \n        yup.object({\n            prefName: yup.string().trim(true).required(t('Preference Name is Required')).max(20, t('Maximum Length is ', tOpts) + '20'),\n            prefDesc: yup.string().max(100, t('Maximum Length is ', tOpts) + '100')\n        }), [t, tOpts]);\n\n    const handleOpen = (event) => setMenuAnchorEl(event?.currentTarget);\n    const handleClose = () => setMenuAnchorEl(null);\n    const handleDialogClose = () => {\n        setDialogState(DIALOG_TYPES.NONE);\n        handleClose();\n    };\n\n    const resetToDefault = () => {\n        if (gridRef.current?.initialGridState) {\n            gridRef.current.restoreState(gridRef.current.initialGridState);\n            setCurrentPreference(null);\n            if (onPreferenceChange) onPreferenceChange(null);\n            handleClose();\n        }\n    };\n\n    // Only memoize functions used in useEffect dependencies\n    const loadPreferences = useCallback(async ({ applyDefault = false }) => {\n        const response = await request({\n            url: preferenceApi,\n            params: { action: 'list', id: preferenceKey },\n            dataParser: DATA_PARSERS.json\n        });\n        \n        if (!response?.preferences) {\n            snackbar.showMessage(t('Failed to load preferences.', tOpts));\n            if (onPreferenceChange) onPreferenceChange(null);\n            return;\n        }\n\n        const preferences = response.preferences.filter(pref => pref.prefName.trim() !== '');\n        \n        setPreferences(preferences);\n        \n        if (applyDefault) {\n            const defaultPref = preferences.find(pref => pref.isDefault);\n            if (defaultPref) {\n                return { defaultPrefId: defaultPref.prefId, preferences };\n            } else {\n                if (onPreferenceChange) onPreferenceChange(null);\n            }\n        }\n        \n        return { preferences };\n    }, [preferenceApi, preferenceKey, snackbar, t, tOpts, onPreferenceChange]);\n\n    const applyPreference = useCallback(async (prefId, preferencesArray = null) => {\n        // Store initial state before applying first preference\n        if (!gridRef.current?.initialGridState && gridRef.current?.exportState) {\n            gridRef.current.initialGridState = gridRef.current.exportState();\n        }\n\n        if (prefId === 0) {\n            resetToDefault();\n            return;\n        }\n\n        // Use provided preferences array or fall back to state\n        const prefsToSearch = preferencesArray || preferences;\n        if (!prefsToSearch) {\n            snackbar.showMessage(t('Preferences not loaded yet.', tOpts));\n            return;\n        }\n\n        const preference = prefsToSearch.find(ele => ele.prefId === prefId);\n        if (!preference?.prefValue) {\n            snackbar.showMessage(t('Failed to load preference.', tOpts));\n            return;\n        }\n\n        let gridState;\n        try {\n            gridState = typeof preference.prefValue === 'string' ? JSON.parse(preference.prefValue) : preference.prefValue;\n        } catch (error) {\n            snackbar.showMessage(t('Failed to parse preference data.', tOpts));\n            return;\n        }\n\n        gridRef.current.restoreState(gridState);\n        setCurrentPreference(preference.prefName);\n        if (onPreferenceChange) onPreferenceChange(preference.prefName);\n        handleClose();\n    }, [gridRef, resetToDefault, preferences, onPreferenceChange, snackbar, t, tOpts]);\n\n    const savePreference = async (values) => {\n        const prefName = values.prefName.trim();\n        const caseInsensitivePrefName = prefName.toLocaleLowerCase();\n\n        if (preferences.find(ele => ele.prefName.toLocaleLowerCase() === caseInsensitivePrefName && ele.prefId !== values.prefId)) {\n            setOpenPreferenceExistsModal(true);\n            return;\n        }\n\n        const response = await request({ \n            url: preferenceApi, \n            params: {\n                action: 'save',\n                id: preferenceKey,\n                prefId: values.prefId,\n                prefName,\n                prefDesc: values.prefDesc,\n                prefValue: JSON.stringify(gridRef.current.exportState()),\n                isDefault: values.isDefault\n            },\n            dataParser: DATA_PARSERS.json \n        });\n\n        if (response === true || response?.success === true) {\n            snackbar.showMessage(t(`Preference ${dialogState === DIALOG_TYPES.ADD ? \"added\" : \"saved\"} successfully.`, tOpts));\n            handleDialogClose();\n            await loadPreferences({ applyDefault: false });\n            return;\n        }\n\n        snackbar.showMessage(t('Error saving preference: ', tOpts) + (response?.message || t('Unknown error', tOpts)));\n    };\n\n    const deletePreference = async () => {\n        const response = await request({ \n            url: preferenceApi, \n            params: {\n                action: 'delete',\n                id: preferenceKey,\n                prefIdArray: openConfirmDeleteDialog.prefId\n            },\n            dataParser: DATA_PARSERS.json \n        });\n\n        if (response === true || response?.success === true) {\n            snackbar.showMessage(t('Preference deleted successfully.', tOpts));\n            await loadPreferences({ applyDefault: false });\n            setOpenConfirmDeleteDialog({});\n            return;\n        }\n\n        snackbar.showMessage(t('Error deleting preference: ', tOpts) + (response?.message || t('Unknown error', tOpts)));\n    };\n\n    const onCellClick = (cellParams) => {\n        const action = cellParams.field === 'editAction' ? actionTypes.Edit : cellParams.field === 'deleteAction' ? actionTypes.Delete : null;\n        if (cellParams.id === 0 && action) {\n            snackbar.showMessage(t(`Default preference cannot be ${action === actionTypes.Edit ? 'edited' : 'deleted'}`, tOpts));\n            return;\n        }\n        if (action === actionTypes.Edit) {\n            setDialogState(DIALOG_TYPES.EDIT);\n            formik.setValues(cellParams?.row);\n        }\n        if (action === actionTypes.Delete) {\n            setOpenConfirmDeleteDialog({\n                prefId: cellParams.id,\n                preferenceName: cellParams.row.prefName\n            });\n        }\n    };\n\n    const openDialog = (type) => {\n        setDialogState(type);\n        handleClose();\n        if (type === DIALOG_TYPES.ADD) {\n            formik.resetForm();\n        }\n    };\n\n    const formik = useFormik({\n        initialValues,\n        validationSchema,\n        onSubmit: savePreference,\n        mode: \"onBlur\"\n    });\n\n    // Load preferences on mount\n    useEffect(() => {\n        if (!preferenceKey) return;\n        \n        const loadAndApply = async () => {\n            const result = await loadPreferences({ applyDefault: true });\n            if (result?.defaultPrefId && result?.preferences) {\n                await applyPreference(result.defaultPrefId, result.preferences);\n            }\n        };\n        \n        loadAndApply();\n    }, [preferenceKey]);\n\n    const isManageDialog = dialogState === DIALOG_TYPES.MANAGE;\n    const isFormDialog = dialogState === DIALOG_TYPES.ADD || dialogState === DIALOG_TYPES.EDIT;\n\n    return (\n        <Box>\n            <Button\n                id=\"grid-preferences-btn\"\n                aria-controls={menuAnchorEl ? 'basic-menu' : undefined}\n                aria-haspopup=\"true\"\n                aria-expanded={menuAnchorEl ? 'true' : undefined}\n                onClick={handleOpen}\n                title={t('Preference', tOpts)}\n                startIcon={<SettingsIcon />}\n            >\n                {t('Preferences', tOpts)} {currentPreference && `(${currentPreference})`}\n            </Button>\n            <Menu\n                id={`grid-preference-menu`}\n                anchorEl={menuAnchorEl}\n                open={!!menuAnchorEl}\n                onClose={handleClose}\n                component={List}\n                dense\n                MenuListProps={{\n                    'aria-labelledby': 'grid-preferences-btn'\n                }}\n                sx={{\n                    '& .MuiMenu-paper': { minWidth: 240, maxHeight: 320 },\n                    '& .MuiListItemSecondaryAction-root': {\n                        display: 'flex'\n                    },\n                    '& .Mui-selected': {\n                        color: 'text.primary',\n                        '&:hover': {\n                            backgroundColor: 'success.main'\n                        }\n                    }\n                }}\n            >\n                <MenuItem component={ListItemButton} dense onClick={() => openDialog(DIALOG_TYPES.ADD)}>\n                    {t('Add Preference', tOpts)}\n                </MenuItem>\n                <MenuItem component={ListItemButton} dense onClick={() => openDialog(DIALOG_TYPES.MANAGE)}>\n                    <ListItemIcon>\n                        <SettingsIcon />\n                    </ListItemIcon>\n                    {t('Manage Preferences', tOpts)}\n                </MenuItem>\n                {gridRef.current?.initialGridState && (\n                    <MenuItem component={ListItemButton} dense divider={preferences?.length > 0} onClick={() => applyPreference(0)}>\n                        {t('Reset to Default', tOpts)}\n                    </MenuItem>\n                )}\n\n                {preferences?.length > 0 && preferences?.map((ele) => {\n                    const { prefName, prefDesc, prefId } = ele;\n                    return (\n                        <MenuItem\n                            onClick={() => applyPreference(prefId)}\n                            component={ListItem}\n                            selected={currentPreference === prefName}\n                            key={`pref-item-${prefId}`}\n                            title={t(prefDesc, tOpts)}\n                            dense\n                        >\n                            <ListItemText primary={prefName} />\n                        </MenuItem>\n                    );\n                })}\n            </Menu>\n            <DialogComponent\n                open={dialogState !== DIALOG_TYPES.NONE}\n                disableRestoreFocus\n                title={\n                    <Typography variant=\"h5\">\n                        {dialogState} {t(isManageDialog ? 'Preferences' : 'Preference', tOpts)}\n                    </Typography>\n                }\n                maxWidth={isManageDialog ? 'md' : 'sm'}\n                fullWidth\n            >\n                {isFormDialog && (\n                    <Grid\n                        component={'form'}\n                        onSubmit={formik.handleSubmit}\n                        rowGap={2}\n                        container\n                        sx={{\n                            '& .MuiFormLabel-root:not(.MuiTypography-root)': {\n                                fontWeight: 400,\n                                display: 'table',\n                                whiteSpace: 'pre-wrap' /* css-3 */,\n                                wordWrap: 'break-word' /* Internet Explorer 5.5+ */\n                            }\n                        }}\n                    >\n                        <Grid size={12}>\n                            <TextField\n                                value={formik.values.prefName}\n                                variant=\"outlined\"\n                                size=\"small\"\n                                margin=\"dense\"\n                                label={\n                                    <span>\n                                        {t('Preference Name', tOpts)} <span style={{ color: 'red' }}>*</span>\n                                    </span>\n                                }\n                                autoFocus\n                                name=\"prefName\"\n                                onChange={formik.handleChange}\n                                error={!!formik.errors.prefName}\n                                helperText={formik.errors.prefName}\n                                fullWidth\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <TextField\n                                value={formik.values.prefDesc}\n                                variant=\"outlined\"\n                                multiline\n                                rows={2}\n                                size=\"small\"\n                                margin=\"dense\"\n                                label={t('Preference Description', tOpts)}\n                                name=\"prefDesc\"\n                                onChange={formik.handleChange}\n                                error={!!formik.errors.prefDesc}\n                                helperText={formik.errors.prefDesc}\n                                fullWidth\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <FormControlLabel\n                                control={\n                                    <Checkbox\n                                        checked={formik.values.isDefault}\n                                        name=\"isDefault\"\n                                        onChange={formik.handleChange}\n                                    />\n                                }\n                                label={t('Default', tOpts)}\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <Stack direction=\"row\" columnGap={1} style={{ justifyContent: 'end' }}>\n                                <Button\n                                    type=\"submit\"\n                                    size=\"small\"\n                                    startIcon={<SaveIcon />}\n                                    color=\"primary\"\n                                    variant=\"contained\"\n                                    disableElevation\n                                >\n                                    {t('Save', tOpts)}\n                                </Button>\n                                <Button\n                                    type=\"button\"\n                                    startIcon={<CloseIcon />}\n                                    color=\"error\"\n                                    variant=\"contained\"\n                                    size=\"small\"\n                                    onClick={handleDialogClose}\n                                    disableElevation\n                                >\n                                    {t('Close', tOpts)}\n                                </Button>\n                            </Stack>\n                        </Grid>\n                    </Grid>\n                )}\n\n                {isManageDialog && (\n                    <Grid container rowGap={2}>\n                        <Grid size={12}>\n                            <DataGridPremium\n                                sx={{\n                                    \"& .MuiTablePagination-selectLabel\": {\n                                        marginTop: 2\n                                    },\n                                    \"& .MuiTablePagination-displayedRows\": {\n                                        marginTop: 2\n                                    },\n                                    \"& .MuiDataGrid-columnHeader .MuiInputLabel-shrink\": {\n                                        display: \"none\"\n                                    }\n                                }}\n                                className=\"pagination-fix\"\n                                onCellClick={onCellClick}\n                                columns={gridColumns}\n                                pageSizeOptions={pageSizeOptions}\n                                pagination\n                                rowCount={nonDefaultPreferences.length}\n                                rows={nonDefaultPreferences}\n                                getRowId={(row) => row['GridPreferenceId']}\n                                slots={{\n                                    headerFilterMenu: false\n                                }}\n                                density=\"compact\"\n                                disableDensitySelector={true}\n                                apiRef={apiRef}\n                                disableAggregation={true}\n                                disableRowGrouping={true}\n                                disableRowSelectionOnClick={true}\n                                initialState={{\n                                    pagination: {\n                                        paginationModel\n                                    }\n                                }}\n                            />\n                        </Grid>\n                        <Grid size={12}>\n                            <Stack direction=\"row\" columnGap={1} style={{ justifyContent: 'end' }}>\n                                <Button\n                                    type=\"button\"\n                                    startIcon={<CloseIcon />}\n                                    color=\"error\"\n                                    variant=\"contained\"\n                                    size=\"small\"\n                                    onClick={handleDialogClose}\n                                    disableElevation\n                                >\n                                    {t('Close', tOpts)}\n                                </Button>\n                            </Stack>\n                        </Grid>\n                    </Grid>\n                )}\n            </DialogComponent>\n            <DialogComponent\n                open={openPreferenceExistsModal}\n                onConfirm={() => setOpenPreferenceExistsModal(false)}\n                title=\"\"\n                okText={t('Ok', tOpts)}\n                cancelText=\"\"\n            >\n                \"{formik.values.prefName.trim()}\": {t('name already in use, please use another name.', tOpts)}\n            </DialogComponent>\n            <DialogComponent\n                open={!!openConfirmDeleteDialog.preferenceName}\n                onConfirm={deletePreference}\n                onCancel={() => setOpenConfirmDeleteDialog({})}\n                title={t('Confirm delete', tOpts)}\n                yesNo={true}\n            >\n                {t('Are you sure you wish to delete', tOpts)} \"{openConfirmDeleteDialog.preferenceName}\"?\n            </DialogComponent>\n        </Box>\n    );\n};\n\n\nexport default GridPreferences;","import React, { useMemo, useCallback } from 'react';\nimport {\n    useGridSelector,\n    gridFilterModelSelector\n} from '@mui/x-data-grid-premium';\n\nimport { FormControl, InputLabel, MenuItem, Select } from '@mui/material';\n\nconst GridOperators = {\n    IsAnyOf: 'isAnyOf'\n};\n\nconst CustomDropdownMenu = (props) => {\n    const { column, item, applyValue, apiRef } = props;\n    const lookupData = column?.dataRef?.current?.lookups;\n    let options = column.customLookup || lookupData[column.lookup] || [];\n\n    if (typeof column.lookup === 'string') {\n        options = options.map(({ label, value }) => ({\n            label,\n            value\n        }));\n    }\n\n    const filterModel = useGridSelector(apiRef, gridFilterModelSelector);\n    const currentFieldFilters = useMemo(\n        () =>\n            filterModel.items?.filter((value) => {\n                return value.field === column.field;\n            }),\n        [column.field, filterModel.items]\n    );\n\n    const handleFilterChange = useCallback(\n        (event) => {\n            let inputValue = event.target.value;\n            if (filterModel.items.length >= 1) {\n                inputValue = inputValue.length === 1 ? inputValue[0] : inputValue;\n\n                for (const element of filterModel.items) {\n                    if (element.field !== item.field) {\n                        continue;\n                    }\n                    if (element.operator === GridOperators.IsAnyOf) {\n                        inputValue = Array.isArray(inputValue) ? inputValue : [inputValue];\n                    } else {\n                        inputValue = inputValue === 0 ? '0' : inputValue;\n                    }\n                }\n            }\n\n            if (inputValue.length === 0 && currentFieldFilters[0]) {\n                apiRef.current.deleteFilterItem(currentFieldFilters[0]);\n                return;\n            }\n\n            const newValue = inputValue;\n            const newitem = currentFieldFilters[0] ? currentFieldFilters[0] : item;\n            applyValue({ ...newitem, value: newValue });\n        },\n        [apiRef, column.applyZeroFilter, currentFieldFilters, item, applyValue]\n    );\n\n    const value = currentFieldFilters[0]?.value ?? '';\n\n    return (\n        <FormControl variant=\"standard\" className=\"w-100\">\n            <Select\n                label={column.field}\n                variant=\"standard\"\n                value={value}\n                onChange={(e) => handleFilterChange(e)}\n                multiple={Array.isArray(value)}\n                MenuProps={{\n                    PaperProps: {\n                        style: {\n                            height: 'fit-content',\n                            overflow: 'hidden'\n                        }\n                    }\n                }}\n            >\n                {options?.map((option, index) => (\n                    <MenuItem key={index} value={option.value}>\n                        {option.label}\n                    </MenuItem>\n                ))}\n            </Select>\n        </FormControl>\n    );\n};\n\nexport default CustomDropdownMenu;\n","import MenuItem from '@mui/material/MenuItem';\nimport Box from '@mui/material/Box';\nimport { GridToolbarExportContainer } from '@mui/x-data-grid-premium';\nimport { GridOn, Code, Language, TableChart, DataObject as DataObjectIcon } from '@mui/icons-material';\nimport React from 'react';\n\n// Helper to convert default sort string to array\nexport const convertDefaultSort = (defaultSort, constants, sortRegex) => {\n    if (typeof defaultSort !== constants.string) return [];\n    return defaultSort.split(',').map(sortField => {\n        sortRegex.lastIndex = 0;\n        const sortInfo = sortRegex.exec(sortField);\n        if (!sortInfo) return null;\n        const [, field, direction = 'ASC'] = sortInfo;\n        return {\n            field: field.trim(),\n            sort: direction.trim().toLowerCase()\n        };\n    }).filter(Boolean);\n};\n\n// Export menu item component\nexport const ExportMenuItem = ({ tTranslate, tOpts, handleExport, contentType, type, isPivotExport = false, icon }) => (\n    <MenuItem\n        onClick={handleExport}\n        data-type={type}\n        data-content-type={contentType}\n        data-is-pivot-export={isPivotExport}\n    >\n        <Box className=\"grid-icons\" sx={{ pointerEvents: 'none', marginTop: 1 }}>{icon}</Box>\n        {tTranslate(type, tOpts)}\n    </MenuItem>\n);\n\n// Custom export button component\nexport const CustomExportButton = ({ exportFormats, ...props }) => (\n    <GridToolbarExportContainer {...props}>\n        {exportFormats.csv !== false && <ExportMenuItem {...props} icon={<GridOn fontSize=\"small\" />} type=\"CSV\" contentType=\"text/csv\" />}\n        {exportFormats.excel !== false && <ExportMenuItem {...props} icon={<TableChart fontSize=\"small\" />} type=\"Excel\" contentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" />}\n        {props.showPivotExportBtn && <ExportMenuItem {...props} icon={<TableChart fontSize=\"small\" />} type=\"Excel With Pivot\" contentType=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\" isPivotExport={true} />}\n        {exportFormats.xml !== false && <ExportMenuItem {...props} icon={<Code fontSize=\"small\" />} type=\"XML\" contentType=\"text/xml\" />}\n        {exportFormats.html !== false && <ExportMenuItem {...props} icon={<Language fontSize=\"small\" />} type=\"HTML\" contentType=\"text/html\" />}\n        {exportFormats.json !== false && <ExportMenuItem {...props} icon={<DataObjectIcon fontSize=\"small\" />} type=\"JSON\" contentType=\"application/json\" />}\n    </GridToolbarExportContainer>\n);\n\n// Shallow props comparison\nexport const areEqual = (prevProps = {}, nextProps = {}) => {\n    let equal = true;\n    for (const o in prevProps) {\n        if (prevProps[o] !== nextProps[o]) {\n            equal = false;\n        }\n    }\n    for (const o in nextProps) {\n        if (!(o in prevProps)) {\n            equal = false;\n        }\n    }\n    return equal;\n};","import Button from '@mui/material/Button';\nimport {\n    DataGridPremium,\n    Toolbar,\n    ColumnsPanelTrigger,\n    FilterPanelTrigger,\n    getGridDateOperators,\n    GRID_CHECKBOX_SELECTION_COL_DEF,\n    getGridStringOperators,\n    getGridBooleanOperators,\n    GridActionsCellItem,\n    useGridApiRef\n} from '@mui/x-data-grid-premium';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport CopyIcon from '@mui/icons-material/FileCopy';\nimport ArticleIcon from '@mui/icons-material/Article';\nimport EditIcon from '@mui/icons-material/Edit';\nimport FilterListOffIcon from '@mui/icons-material/FilterListOff';\nimport React, { useMemo, useEffect, memo, useRef, useState, useCallback } from 'react';\nimport AddIcon from '@mui/icons-material/Add';\nimport RemoveIcon from '@mui/icons-material/Remove';\nimport Typography from '@mui/material/Typography';\nimport { useSnackbar } from '../SnackBar/index';\nimport { DialogComponent } from '../Dialog/index';\nimport { getList, getRecord, deleteRecord, saveRecord } from './crud-helper';\nimport { Footer } from './footer';\nimport template from './template';\nimport { Tooltip, Box, Badge } from \"@mui/material\";\nimport CheckIcon from '@mui/icons-material/Check';\nimport CloseIcon from '@mui/icons-material/Close';\nimport PageTitle from '../PageTitle';\nimport { useStateContext, useRouter } from '../useRouter/StateProvider';\nimport LocalizedDatePicker from './LocalizedDatePicker';\nimport actionsStateProvider from '../useRouter/actions';\nimport GridPreferences from './GridPreference';\nimport CustomDropdownMenu from './CustomDropdownMenu';\nimport { getPermissions } from '../utils';\nimport HistoryIcon from '@mui/icons-material/History';\nimport FileDownloadIcon from '@mui/icons-material/FileDownload';\nimport Checkbox from '@mui/material/Checkbox';\nimport { useTranslation } from 'react-i18next';\nimport { convertDefaultSort, CustomExportButton, areEqual } from './helper';\nimport { styled } from '@mui/material/styles';\nimport ViewColumnIcon from '@mui/icons-material/ViewColumn';\nimport FilterListIcon from '@mui/icons-material/FilterList';\n\nconst defaultPageSize = 50;\nconst sortRegex = /(\\w+)( ASC| DESC)?/i;\nconst recordCounts = 60000;\nconst actionTypes = {\n    Copy: \"Copy\",\n    Edit: \"Edit\",\n    Delete: \"Delete\",\n    History: \"History\",\n    Download: \"Download\"\n};\nconst iconMapper = {\n    'article': <ArticleIcon />\n};\nconst constants = {\n    gridFilterModel: { items: [], logicOperator: 'and', quickFilterValues: Array(0), quickFilterLogicOperator: 'and' },\n    permissions: { edit: true, add: true, export: true, delete: true, showColumnsOrder: true, filter: true },\n    client: 'client',\n    server: 'server',\n    object: 'object',\n    startDate: 'startDate',\n    endDate: 'endDate',\n    oneToMany: 'oneToMany',\n    lookup: 'lookup',\n    Number: 'number',\n    string: 'string',\n    boolean: 'boolean',\n    right: 'right',\n    left: 'left',\n    dateTime: 'dateTime',\n    actions: 'actions',\n    function: 'function',\n    pageSizeOptions: [5, 10, 20, 50, 100]\n};\nconst auditColumnMappings = [\n    { key: 'addCreatedOnColumn', field: 'CreatedOn', type: 'dateTime', header: 'Created On' },\n    { key: 'addCreatedByColumn', field: 'CreatedByUser', type: 'string', header: 'Created By' },\n    { key: 'addModifiedOnColumn', field: 'ModifiedOn', type: 'dateTime', header: 'Modified On' },\n    { key: 'addModifiedByColumn', field: 'ModifiedByUser', type: 'string', header: 'Modified By' }\n];\nconst booleanIconRenderer = (params) => {\n    if (params.value) {\n        return <CheckIcon style={{ color: 'green' }} />;\n    } else {\n        return <CloseIcon style={{ color: 'gray' }} />;\n    }\n};\n\nconst DeleteContentText = styled('span')({\n    width: '100%',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis'\n});\n\nconst ButtonWithMargin = styled(Button)({\n    margin: '6px'\n});\n\nconst GridToolBar = styled(Toolbar)({\n    display: 'flex',\n    alignItems: 'center',\n    gap: '1.5rem',\n    flexWrap: 'nowrap',\n    whiteSpace: 'nowrap',\n    minHeight: 'auto',\n    borderBottom: 'none'\n});\n\nconst CustomCheckBox = ({ params, selectedSet, handleSelectRow, idProperty }) => {\n    const rowId = params.row[idProperty];\n    const isChecked = selectedSet.has(rowId);\n\n    const handleCheckboxClick = (event) => {\n        event.stopPropagation();\n        handleSelectRow({ row: params.row });\n    };\n\n    return (\n        <Checkbox\n            onClick={handleCheckboxClick}\n            checked={isChecked}\n            color=\"primary\"\n            inputProps={{ 'aria-label': 'checkbox' }}\n        />\n    );\n};\n\nconst CustomToolbar = function (props) {\n    const {\n        model,\n        data,\n        currentPreference,\n        isReadOnly,\n        canAdd,\n        forAssignment,\n        showAddIcon,\n        onAdd,\n        selectionApi,\n        selectedSet,\n        selectAll,\n        available,\n        onAssign,\n        assigned,\n        onUnassign,\n        effectivePermissions,\n        clearFilters,\n        handleExport,\n        preferenceKey,\n        apiRef,\n        tTranslate,\n        tOpts,\n        filterModel,\n        onPreferenceChange,\n        toolbarItems\n    } = props;\n\n    const addText = model.customAddText || (model.title ? `Add ${model.title}` : 'Add');\n    const activeFilterCount = filterModel?.items?.length || 0;\n\n    return (\n        <div\n            style={{\n                display: 'flex',\n                justifyContent: 'space-between',\n                padding: '10px'\n            }}\n        >\n            <div>\n                {model.gridSubTitle && <Typography variant=\"h6\" component=\"h3\" textAlign=\"center\" sx={{ ml: 1 }}> {tTranslate(model.gridSubTitle, tOpts)}</Typography>}\n                {currentPreference && model.showPreferenceInHeader && <Typography className=\"preference-name-text\" variant=\"h6\" component=\"h6\" textAlign=\"center\" sx={{ ml: 1 }} >{tTranslate('Applied Preference', tOpts)}: {currentPreference}</Typography>}\n                {(isReadOnly || (!canAdd && !forAssignment)) && <Typography variant=\"h6\" component=\"h3\" textAlign=\"center\" sx={{ ml: 1 }} > {!canAdd || isReadOnly ? \"\" : model.title}</Typography>}\n                {!forAssignment && canAdd && !isReadOnly && <ButtonWithMargin startIcon={!showAddIcon ? null : <AddIcon />} onClick={onAdd} size=\"medium\" variant=\"contained\" >{tTranslate(addText, tOpts)}</ButtonWithMargin>}\n                {(selectionApi.length && data.records.length) ? (\n                    <ButtonWithMargin\n                        onClick={selectAll}\n                        size=\"medium\"\n                        variant=\"contained\"\n                    >\n                        {selectedSet.size === data.records.length ? tTranslate(\"Deselect All\", tOpts) : tTranslate(\"Select All\", tOpts)}\n                    </ButtonWithMargin>) :\n                    <></>\n                }\n                {available && <ButtonWithMargin startIcon={!showAddIcon ? null : <AddIcon />} onClick={onAssign} size=\"medium\" variant=\"contained\"  >{tTranslate(\"Assign\", tOpts)}</ButtonWithMargin>}\n                {assigned && <ButtonWithMargin startIcon={!showAddIcon ? null : <RemoveIcon />} onClick={onUnassign} size=\"medium\" variant=\"contained\"  >{tTranslate(\"Remove\", tOpts)}</ButtonWithMargin>}\n            </div>\n            <GridToolBar {...props}>\n                {effectivePermissions.showColumnsOrder && (\n                    <ColumnsPanelTrigger\n                        render={(triggerProps) => (\n                            <Button\n                                {...triggerProps}\n                                startIcon={<ViewColumnIcon />}\n                                size=\"small\"\n                                variant=\"text\"\n                            >\n                                {tTranslate(\"COLUMNS\", tOpts)}\n                            </Button>\n                        )}\n                    />\n                )}\n                {effectivePermissions.filter && (<>\n                    <FilterPanelTrigger\n                        render={(triggerProps) => (\n                            <Button\n                                {...triggerProps}\n                                startIcon={\n                                    <Badge badgeContent={activeFilterCount} color=\"primary\">\n                                        <FilterListIcon />\n                                    </Badge>\n                                }\n                                size=\"small\"\n                                variant=\"text\"\n                            >\n                                {tTranslate(\"FILTERS\", tOpts)}\n                            </Button>\n                        )}\n                    />\n                    <Button startIcon={<FilterListOffIcon />} onClick={clearFilters} size=\"small\">{tTranslate(\"CLEAR FILTER\", tOpts)}</Button>\n                </>)}\n\n                {effectivePermissions.export && (\n                    <CustomExportButton handleExport={handleExport} showPivotExportBtn={model.pivotApi} exportFormats={model.exportFormats || {}} tTranslate={tTranslate} tOpts={tOpts} />\n                )}\n                {toolbarItems}\n                {preferenceKey &&\n                    <GridPreferences \n                        gridRef={apiRef} \n                        onPreferenceChange={onPreferenceChange} \n                        t={tTranslate}\n                        tOpts={tOpts}\n                    />\n                }\n            </GridToolBar>\n        </div >\n    );\n};\n\nconst GridBase = memo(({\n    model,\n    columns,\n    api,\n    defaultSort,\n    setActiveRecord,\n    parentFilters,\n    parent,\n    where,\n    title,\n    showPageTitle,\n    permissions,\n    selected,\n    assigned,\n    available,\n    disableCellRedirect = false,\n    onAssignChange,\n    customStyle,\n    onCellClick,\n    showRowsSelected,\n    showFullScreenLoader,\n    customFilters,\n    onRowDoubleClick,\n    onRowClick = () => { },\n    gridStyle,\n    reRenderKey,\n    additionalFilters,\n    onCellDoubleClickOverride,\n    onAddOverride,\n    dynamicColumns,\n    toolbarItems,\n    readOnly = false,\n    onListParamsChange,\n    apiRef: propsApiRef,\n    baseFilters,\n    ...props\n}) => {\n    const [paginationModel, setPaginationModel] = useState({ pageSize: defaultPageSize, page: 0 });\n    const [data, setData] = useState({ recordCount: 0, records: [], lookups: {} });\n    const [isLoading, setIsLoading] = useState(true);\n    const forAssignment = !!onAssignChange;\n    const rowsSelected = showRowsSelected;\n    const [selection, setSelection] = useState([]);\n    const [isDeleting, setIsDeleting] = useState(false);\n    const [record, setRecord] = useState(null);\n    const visibilityModel = { CreatedOn: false, CreatedByUser: false, ...model.columnVisibilityModel };\n    const [showAddConfirmation, setShowAddConfirmation] = useState(false);\n    const snackbar = useSnackbar();\n    const paginationMode = model.paginationMode === constants.client ? constants.client : constants.server;\n    const { t: translate, i18n } = useTranslation();\n    const tOpts = { t: translate, i18n };\n    const [errorMessage, setErrorMessage] = useState('');\n    const [sortModel, setSortModel] = useState(convertDefaultSort(defaultSort || model.defaultSort, constants, sortRegex));\n    const initialFilterModel = { items: [], logicOperator: 'and', quickFilterValues: Array(0), quickFilterLogicOperator: 'and' };\n    if (model.defaultFilters) {\n        initialFilterModel.items = [];\n        model.defaultFilters.forEach((ele) => {\n            initialFilterModel.items.push(ele);\n        });\n    }\n    const [filterModel, setFilterModel] = useState({ ...initialFilterModel });\n    const { navigate, getParams, useParams, pathname } = useRouter();\n    const { id: idWithOptions } = useParams() || getParams;\n    const id = idWithOptions?.split('-')[0];\n    const apiRef = propsApiRef || useGridApiRef();\n    const { idProperty = \"id\", showHeaderFilters = true, disableRowSelectionOnClick = true, hideTopFilters = true, updatePageTitle = true, isElasticScreen = false, navigateBack = false, selectionApi = {} } = model;\n    const isReadOnly = model.readOnly === true || readOnly;\n    const isDoubleClicked = model.allowDoubleClick === false;\n    const dataRef = useRef(data);\n    const showAddIcon = model.showAddIcon === true;\n    const toLink = model.columns.filter(({ link }) => Boolean(link)).map(item => item.link);\n    const { stateData, dispatchData, formatDate, getApiEndpoint, buildUrl } = useStateContext();\n    const { timeZone } = stateData;\n    const effectivePermissions = { ...constants.permissions, ...model.permissions, ...permissions };\n    const emptyIsAnyOfOperatorFilters = [\"isEmpty\", \"isNotEmpty\", \"isAnyOf\"];\n    const userData = stateData.getUserData || {};\n    const documentField = model.columns.find(ele => ele.type === 'fileUpload')?.field || \"\";\n    const userDefinedPermissions = { add: effectivePermissions.add, edit: effectivePermissions.edit, delete: effectivePermissions.delete };\n    const { canAdd, canEdit, canDelete } = getPermissions({ userData, model, userDefinedPermissions });\n    const tTranslate = model.tTranslate ?? ((key) => key);\n    const { addUrlParamKey, searchParamKey, hideBreadcrumb = false, tableName, showHistory = true, hideBreadcrumbInGrid = false, breadcrumbColor, disablePivoting = false, columnHeaderHeight = 70 } = model;\n    const gridTitle = model.gridTitle || model.title;\n    const preferenceKey = getApiEndpoint(\"GridPreferenceManager\") ? (model.preferenceId || model.module?.preferenceId) : null;\n    const searchParams = new URLSearchParams(window.location.search);\n    const [currentPreference, setCurrentPreference] = useState(null);\n    const [preferencesReady, setPreferencesReady] = useState(!preferenceKey);\n    const backendApi = api || model.api;\n\n    useEffect(() => {\n        if (!apiRef.current) return;\n        \n        // Store preferenceKey on apiRef for GridPreferences to access\n        apiRef.current.prefKey = preferenceKey;\n    }, [apiRef, preferenceKey]);\n\n    // Callback when preferences are loaded or changed\n    const onPreferenceChange = (preferenceName) => {\n        setCurrentPreference(preferenceName);\n        setPreferencesReady(true);\n    };\n\n    const baseDataFromParams = searchParams.has('baseData') && searchParams.get('baseData');\n    const baseSaveData = useMemo(() => {\n        if (baseDataFromParams) {\n            try {\n                const parsedData = JSON.parse(baseDataFromParams);\n                if (typeof parsedData === constants.object && parsedData !== null) {\n                    return parsedData;\n                }\n            } catch (error) {\n                console.error('Failed to parse baseData from URL:', error);\n            }\n        }\n        return {};\n    }, [baseDataFromParams]);\n    const [selectedSet, setSelectedSet] = useState(new Set());\n\n    const handleSelectRow = useCallback(({ row }) => {\n        const rowId = row[idProperty];\n        setSelectedSet(prevSet => {\n            const newSet = new Set(prevSet);\n            if (newSet.has(rowId)) {\n                newSet.delete(rowId);\n            } else {\n                newSet.add(rowId);\n            }\n            setSelection(Array.from(newSet));\n            return newSet;\n        });\n    }, [idProperty, setSelectedSet, setSelection]);\n\n    const gridColumnTypes = {\n        \"radio\": {\n            \"type\": \"singleSelect\",\n            \"valueOptions\": \"lookup\"\n        },\n        \"date\": {\n            \"valueFormatter\": (value) => (\n                formatDate({ value, useSystemFormat: true, showOnlyDate: false, state: stateData.dateTime, timeZone })\n            ),\n            \"filterOperators\": LocalizedDatePicker({ columnType: \"date\", label: tTranslate('Value', tOpts) })\n        },\n        \"dateTime\": {\n            \"valueFormatter\": (value) => (\n                formatDate({ value, useSystemFormat: false, showOnlyDate: false, state: stateData.dateTime, timeZone })\n            ),\n            \"filterOperators\": LocalizedDatePicker({ columnType: \"datetime\", label: tTranslate('Value', tOpts) })\n        },\n        \"dateTimeLocal\": {\n            \"valueFormatter\": (value) => (\n                formatDate({ value, useSystemFormat: false, showOnlyDate: false, state: stateData.dateTime, timeZone })\n            ),\n            \"filterOperators\": LocalizedDatePicker({ type: \"dateTimeLocal\", convert: true })\n        },\n        \"boolean\": {\n            renderCell: booleanIconRenderer\n        },\n        \"select\": {\n            \"type\": \"singleSelect\",\n            \"valueOptions\": \"lookup\"\n        },\n        \"selection\": {\n            renderCell: (params) => <CustomCheckBox params={params} selectedSet={selectedSet} handleSelectRow={handleSelectRow} idProperty={idProperty} />\n        }\n    };\n\n    useEffect(() => {\n        dataRef.current = data;\n    }, [data]);\n\n    useEffect(() => {\n        if (!customFilters || !Object.keys(customFilters).length) return;\n        if (customFilters.clear) {\n            setFilterModel({ items: [], logicOperator: \"and\", quickFilterValues: [], quickFilterLogicOperator: \"and\" });\n            return;\n        }\n        const items = Object.entries(customFilters).reduce((acc, [key, value]) => {\n            if (key === constants.startDate || key === constants.endDate) {\n                acc.push(value);\n            } else if (key in customFilters) {\n                acc.push({ field: key, value, operator: \"equals\", type: \"string\" });\n            }\n            return acc;\n        }, []);\n        setFilterModel({ items, logicOperator: \"and\", quickFilterValues: [], quickFilterLogicOperator: \"and\" });\n    }, [customFilters]);\n\n    const lookupOptions = useCallback(({ field, lookupMap: lookupMapParam }) => {\n        const lookupData = dataRef.current.lookups || {};\n        const map = lookupMapParam || {};\n        return lookupData[map[field]?.lookup] || [];\n    }, []);\n\n    useEffect(() => {\n        if (props.isChildGrid || !hideTopFilters) {\n            return;\n        }\n        dispatchData({\n            type: actionsStateProvider.PASS_FILTERS_TO_HEADER, payload: {\n                filterButton: null,\n                hidden: { search: true, operation: true, export: true, print: true, filter: true }\n            }\n        });\n    }, []);\n    const { customActions = [] } = model;\n    const { gridColumns, pinnedColumns, lookupMap } = useMemo(() => {\n        let baseColumnList = columns || model.gridColumns || model.columns;\n        if (dynamicColumns) {\n            baseColumnList = [...dynamicColumns, ...baseColumnList];\n        }\n        const pinnedColumns = { left: [GRID_CHECKBOX_SELECTION_COL_DEF.field], right: [] };\n        const finalColumns = [];\n        const lookupMap = {};\n        for (const column of baseColumnList) {\n            if (column.gridLabel === null || (parent && column.lookup === parent) || (column.type === constants.oneToMany && column.countInList === false)) continue;\n            const overrides = {};\n            if (column.type === constants.oneToMany) {\n                overrides.type = 'number';\n                overrides.field = column.field.replace(/s$/, 'Count');\n            }\n            if (gridColumnTypes[column.type]) {\n                Object.assign(overrides, gridColumnTypes[column.type]);\n            }\n            // Common filter operator pattern\n            if (overrides.valueOptions === constants.lookup || column.type === constants.boolean) {\n                let operators = [];\n\n                if (overrides.valueOptions === constants.lookup) {\n                    overrides.valueOptions = (params) => lookupOptions({ ...params, lookupMap });\n                    const lookupFilters = [...getGridDateOperators(), ...getGridStringOperators()]\n                        .filter((op) => ['is', 'not', 'isAnyOf'].includes(op.value));\n                    operators = lookupFilters;\n                }\n\n                if (column.type === constants.boolean) {\n                    operators = getGridBooleanOperators();\n                }\n\n                overrides.filterOperators = operators.map((operator) => ({\n                    ...operator,\n                    InputComponent: operator.InputComponent\n                        ? (params) => (\n                            <CustomDropdownMenu\n                                column={{\n                                    ...column,\n                                    ...(column.type === constants.boolean\n                                        ? {\n                                            customLookup: [\n                                                { value: true, label: 'Yes' },\n                                                { value: false, label: 'No' }\n                                            ]\n                                        }\n                                        : {}),\n                                    dataRef\n                                }}\n                                {...params}\n                                autoHighlight\n                            />\n                        )\n                        : undefined\n                }));\n            }\n            if (column.linkTo || column.link) {\n                overrides.cellClassName = 'mui-grid-linkColumn';\n            }\n            const headerName = tTranslate(column.gridLabel || column.label, tOpts);\n            finalColumns.push({ ...column, ...overrides,  headerName, description: headerName });\n            if (column.pinned) {\n                pinnedColumns[column.pinned === constants.right ? constants.right : constants.left].push(column.field);\n            }\n            lookupMap[column.field] = column;\n        }\n        let auditColumns = model.standard;\n        if (auditColumns === true) {\n            auditColumns = { addCreatedOnColumn: true, addCreatedByColumn: true, addModifiedOnColumn: true, addModifiedByColumn: true };\n        }\n        if (auditColumns && typeof auditColumns === constants.object) {\n            auditColumnMappings.forEach(({ key, field, type, header }) => {\n                if (auditColumns[key] === true) {\n                    const column = { field, type, headerName: tTranslate(header, tOpts), width: 200 };\n                    if (type === constants.dateTime) {\n                        column.filterOperators = LocalizedDatePicker({ columnType: 'date' });\n                        column.valueFormatter = gridColumnTypes.dateTime.valueFormatter;\n                        column.keepLocal = true;\n                    }\n                    finalColumns.push(column);\n                }\n            });\n        }\n        const actions = [];\n        if (!forAssignment && !isReadOnly) {\n            if (canEdit) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"Edit\"><EditIcon /></Tooltip>} data-action={actionTypes.Edit} label=\"Edit\" color=\"primary\" />);\n            }\n            if (effectivePermissions.copy) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"Copy\"><CopyIcon /> </Tooltip>} data-action={actionTypes.Copy} label=\"Copy\" color=\"primary\" />);\n            }\n            if (canDelete) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"Delete\"><DeleteIcon /> </Tooltip>} data-action={actionTypes.Delete} label=\"Delete\" color=\"error\" />);\n            }\n            if (showHistory) {\n                actions.push(<GridActionsCellItem icon={<Tooltip title=\"History\"><HistoryIcon /> </Tooltip>} data-action={actionTypes.History} label=\"History\" color=\"primary\" />);\n            }\n            if (customActions.length) {\n                customActions.forEach(({ icon, action, color }) => {\n                    actions.push(\n                        <GridActionsCellItem\n                            icon={<Tooltip title={action}>{iconMapper[icon] || <CopyIcon />}</Tooltip>}\n                            data-action={action}\n                            label={action}\n                            color={color || \"primary\"}\n                        />\n                    );\n                });\n            }\n        }\n        if (documentField.length) {\n            actions.push(<GridActionsCellItem icon={<Tooltip title=\"Download document\"><FileDownloadIcon /> </Tooltip>} data-action={actionTypes.Download} label=\"Download document\" color=\"primary\" />);\n        }\n        if (actions.length) {\n            finalColumns.push({\n                field: 'actions',\n                type: 'actions',\n                label: '',\n                width: actions.length * 50,\n                hidable: false,\n                getActions: (params) => {\n                    const rowActions = [...actions];\n                    if (canEdit && !isReadOnly) {\n                        const isDisabled = params.row.canEdit === false;\n                        rowActions[0] = (\n                            <GridActionsCellItem\n                                icon={\n                                    <Tooltip title=\"Edit\">\n                                        <EditIcon />\n                                    </Tooltip>\n                                }\n                                data-action={actionTypes.Edit}\n                                label=\"Edit\"\n                                color=\"primary\"\n                                disabled={isDisabled}\n                            />\n                        );\n                    }\n                    return rowActions;\n                }\n            });\n        }\n        pinnedColumns.right.push('actions');\n        return { gridColumns: finalColumns, pinnedColumns, lookupMap };\n    }, [columns, model, parent, permissions, forAssignment, dynamicColumns, translate]);\n\n    const fetchData = (action = \"list\", extraParams = {}, contentType, columns, isPivotExport, isElasticExport) => {\n        const { pageSize, page } = paginationModel;\n\n        const baseUrl =  buildUrl(model.controllerType, isPivotExport ? model.pivotApi : backendApi);\n\n        if (assigned || available) {\n            extraParams[assigned ? \"include\" : \"exclude\"] = Array.isArray(selected) ? selected.join(\",\") : selected;\n        }\n\n        const filters = { ...filterModel };\n        const finalBaseFilters = Array.isArray(baseFilters) ? [...baseFilters] : [];\n        if (model.joinColumn && id) {\n            finalBaseFilters.push({ field: model.joinColumn, operator: \"is\", type: \"number\", value: Number(id) });\n        }\n\n        if (additionalFilters) {\n            filters.items = [...(filters.items || []), ...additionalFilters];\n        }\n        extraParams = { ...extraParams, ...props.extraParams }; // Merge any custom params passed via component props into extraParams\n        const isValidFilters = !filters.items.length || filters.items.every(item => \"value\" in item && item.value !== undefined);\n        if (!isValidFilters) return;\n\n        const listParams = {\n            action,\n            page: !contentType ? page : 0,\n            pageSize: !contentType ? pageSize : 1000000,\n            sortModel,\n            filterModel: filters,\n            controllerType: model.controllerType,\n            api: baseUrl,\n            gridColumns,\n            model,\n            parentFilters,\n            extraParams,\n            contentType,\n            columns,\n            template: isPivotExport ? model.exportTemplate : null,\n            configFileName: isPivotExport ? model.configFileName : null,\n            baseFilters: finalBaseFilters,\n            isElasticExport\n        };\n        if (typeof onListParamsChange === 'function') {\n            onListParamsChange(listParams);\n        }\n        apiRef.current.listParams = listParams;\n        return getList({\n            ...listParams,\n            setError: snackbar.showError,\n            setIsLoading,\n            setData,\n            dispatchData,\n            showFullScreenLoader,\n            history: navigate,\n        });\n    };\n\n    const openForm = useCallback(({ id, record = {}, mode }) => {\n        if (setActiveRecord) {\n            getRecord({ id, api: backendApi, setIsLoading, setActiveRecord, model, parentFilters, where });\n            return;\n        }\n        let path = pathname;\n        if (!path.endsWith(\"/\")) {\n            path += \"/\";\n        }\n        if (mode === \"copy\") {\n            path += \"0-\" + id;\n            dispatchData({ type: 'UPDATE_FORM_MODE', payload: 'copy' });\n\n        } else {\n            path += id;\n            dispatchData({ type: 'UPDATE_FORM_MODE', payload: '' });\n        }\n        if (addUrlParamKey) {\n            searchParams.set(addUrlParamKey, record[addUrlParamKey]);\n            path += `?${searchParams.toString()}`;\n        }\n        navigate(path);\n    }, [setActiveRecord, backendApi, model, parentFilters, where, pathname, addUrlParamKey, searchParams, navigate, dispatchData, getRecord]);\n\n    const handleDownload = useCallback(({ documentLink }) => {\n        if (!documentLink) return;\n        window.open(documentLink, '_blank');\n    }, []);\n    const onCellClickHandler = useCallback(async (cellParams, event, details) => {\n        let action = cellParams.field === model.linkColumn ? actionTypes.Edit : null;\n        if (!action && cellParams.field === constants.actions) {\n            action = details?.action;\n            if (!action) {\n                const el = event.target.closest('button');\n                if (el) {\n                    action = el.dataset.action;\n                }\n            }\n        }\n        const { row: record } = cellParams;\n        if (!isReadOnly) {\n            if (onCellClick) {\n                const result = await onCellClick({ cellParams, event, details });\n                if (typeof result !== constants.boolean) {\n                    return;\n                }\n            }\n            const columnConfig = lookupMap[cellParams.field] || {};\n            if (columnConfig.linkTo) {\n                navigate({\n                    pathname: template.replaceTags(columnConfig.linkTo, record)\n                });\n                return;\n            }\n            switch (action) {\n                case actionTypes.Edit:\n                    return openForm({ id: record[idProperty], record });\n                case actionTypes.Copy:\n                    return openForm({ id: record[idProperty], mode: 'copy' });\n                case actionTypes.Delete:\n                    setIsDeleting(true);\n                    setRecord({ name: record[model.linkColumn], id: record[idProperty] });\n                    break;\n                case actionTypes.History:\n                    // navigates to history screen, specifying the tablename, id of record and breadcrumb to render title on history screen.\n                    return navigate(`${getApiEndpoint('history')}?tableName=${tableName}&id=${record[idProperty]}&breadCrumb=${searchParamKey ? searchParams.get(searchParamKey) : gridTitle}`);\n                default:\n                    // Check if action matches any customAction and call its onClick if found\n                    const foundCustomAction = customActions.find(ca => ca.action === action && typeof ca.onClick === constants.function);\n                    if (foundCustomAction) {\n                        foundCustomAction.onClick({ row: record, navigate });\n                        return;\n                    }\n                    break;\n            }\n        }\n        if (action === actionTypes.Download) {\n            handleDownload({ documentLink: record[documentField] });\n        }\n        if (!toLink.length) {\n            return;\n        }\n        const { row } = cellParams;\n        const columnConfig = lookupMap[cellParams.field] || {};\n        const historyObject = {\n            pathname: template.replaceTags(columnConfig.linkTo, row)\n        };\n        if (model.addRecordToState) {\n            historyObject.state = row;\n        }\n        navigate(historyObject);\n    }, [isReadOnly, onCellClick, lookupMap, model, idProperty, documentField, navigate, toLink, customActions, tableName, searchParamKey, searchParams, gridTitle, getApiEndpoint, handleDownload, openForm]);\n\n    const handleDelete = async function () {\n        const baseUrl =  buildUrl(model.controllerType, backendApi);\n        const result = await deleteRecord({ id: record.id, api: baseUrl, setIsLoading, setError: snackbar.showError, setErrorMessage });\n        if (result === true) {\n            setIsDeleting(false);\n            snackbar.showMessage('Record Deleted Successfully.');\n            fetchData();\n        } else {\n            setIsDeleting(false);\n        }\n    };\n    const clearError = () => {\n        setErrorMessage(null);\n        setIsDeleting(false);\n    };\n\n    const processRowUpdate = (updatedRow) => {\n        if (typeof props.processRowUpdate === \"function\") {\n            props.processRowUpdate(updatedRow, data);\n        }\n        return updatedRow;\n    };\n\n    const onCellDoubleClick = (event) => {\n        if (event.row.canEdit === false) {\n            return;\n        }\n        const { row: record } = event;\n        if (typeof onCellDoubleClickOverride === constants.function) {\n            onCellDoubleClickOverride(event);\n            return;\n        }\n        if (!isReadOnly && !isDoubleClicked && !disableCellRedirect) {\n            openForm({ id: record[idProperty], record });\n        }\n        if (isReadOnly && model.rowRedirectLink) {\n            const historyObject = {\n                pathname: template.replaceTags(model.rowRedirectLink, record)\n            };\n            if (model.addRecordToState) {\n                historyObject.state = record;\n            }\n            navigate(historyObject);\n        }\n        if (typeof onRowDoubleClick === constants.function) {\n            onRowDoubleClick(event);\n        }\n    };\n\n    const handleAddRecords = async () => {\n        if (selectedSet.size < 1) {\n            snackbar.showError(\"Please select at least one record to proceed\");\n            return;\n        }\n\n        const selectedIds = Array.from(selectedSet);\n        const recordMap = new Map(data.records.map(record => [record[idProperty], record]));\n        let selectedRecords = selectedIds.map(id => ({ ...baseSaveData, ...recordMap.get(id) }));\n\n        // If selectionUpdateKeys is defined, filter each record to only those keys\n        if (Array.isArray(model.selectionUpdateKeys) && model.selectionUpdateKeys.length) {\n            selectedRecords = selectedRecords.map(item =>\n                Object.fromEntries(model.selectionUpdateKeys.map(key => [key, item[key]]))\n            );\n        }\n\n        const baseUrl =  buildUrl(model.controllerType, backendApi);\n        try {\n            const result = await saveRecord({\n                id: 0,\n                api: `${baseUrl}${selectionApi || api}/updateMany`,\n                values: { items: selectedRecords },\n                setIsLoading,\n                setError: snackbar.showError\n            });\n\n            if (result) {\n                fetchData();\n                const message = result.info ? result.info : \"Record Added Successfully.\";\n                snackbar.showMessage(message);\n            }\n        } catch (err) {\n            snackbar.showError(err.message || \"An error occurred, please try again later.\");\n        } finally {\n            setSelectedSet(new Set());\n            setIsLoading(false);\n            setShowAddConfirmation(false);\n        }\n    };\n\n    const onAdd = useCallback(() => {\n        if (selectionApi.length > 0) {\n            if (selectedSet.size) {\n                setShowAddConfirmation(true);\n                return;\n            }\n            snackbar.showError(\n                \"Please select at least one record to proceed\"\n            );\n            setIsLoading(false);\n            return;\n        }\n        if (typeof onAddOverride === constants.function) {\n            onAddOverride();\n        } else {\n            openForm({ id: 0 });\n        }\n    }, [selectionApi, selectedSet.size, snackbar, onAddOverride, openForm]);\n\n    const clearFilters = useCallback(() => {\n        if (!filterModel?.items?.length) return;\n        setFilterModel({ ...constants.gridFilterModel });\n    }, [filterModel]);\n    const updateAssignment = ({ unassign, assign }) => {\n        const assignedValues = Array.isArray(selected) ? selected : (selected.length ? selected.split(',') : []);\n        const finalValues = unassign ? assignedValues.filter(id => !unassign.includes(parseInt(id))) : [...assignedValues, ...assign];\n        onAssignChange(typeof selected === constants.string ? finalValues.join(',') : finalValues);\n    };\n\n    const onAssign = () => {\n        updateAssignment({ assign: selection });\n    };\n\n    const onUnassign = () => {\n        updateAssignment({ unassign: selection });\n    };\n\n    const selectAll = useCallback(() => {\n        if (selectedSet.size === data.records.length) {\n            // If all records are selected, deselect all\n            setSelectedSet(new Set());\n            setSelection([]);\n        } else {\n            // Select all records\n            const allIds = data.records.map(record => record[idProperty]);\n            setSelectedSet(new Set(allIds));\n            setSelection(allIds);\n        }\n    }, [selectedSet.size, data.records, idProperty, setSelection, setSelectedSet]);\n\n    const getGridRowId = (row) => {\n        return row[idProperty];\n    };\n    const handleExport = useCallback((e) => {\n        if (data?.recordCount > recordCounts) {\n            snackbar.showMessage('Cannot export more than 60k records, please apply filters or reduce your results using filters');\n            return;\n        }\n        const { orderedFields, columnVisibilityModel, lookup } = apiRef.current.state.columns;\n        const isPivotExport = e.target.dataset.isPivotExport === 'true';\n        const hiddenColumns = Object.keys(columnVisibilityModel).filter(key => columnVisibilityModel[key] === false);\n\n        const nonExportColumns = new Set(gridColumns.filter(col => col.exportable === false).map(col => col.field));\n\n        const visibleColumns = orderedFields.filter(\n            field => !nonExportColumns.has(field) && !hiddenColumns.includes(field) && field !== '__check__' && field !== 'actions'\n        );\n\n        if (visibleColumns.length === 0) {\n            snackbar.showMessage('You cannot export while all columns are hidden... please show at least 1 column before exporting');\n            return;\n        }\n\n        const columns = {};\n        visibleColumns.forEach(field => {\n            const col = lookup[field];\n            columns[field] = { field, width: col.width, headerName: col.headerName || col.field, type: col.type, keepLocal: col.keepLocal === true, isParsable: col.isParsable, lookup: col.lookup };\n        });\n        fetchData(\n            isPivotExport ? 'export' : undefined,\n            undefined,\n            e.target.dataset.contentType,\n            columns,\n            isPivotExport,\n            isElasticScreen\n        );\n    }, [data?.recordCount, apiRef, gridColumns, snackbar, fetchData, isElasticScreen]);\n\n    useEffect(() => {\n        if (!backendApi || !preferencesReady) return;\n        fetchData();\n    }, [paginationModel, model, assigned, available, selected, filterModel, id, additionalFilters, props.extraParams, sortModel, backendApi, gridColumns, parentFilters, isElasticScreen, preferencesReady, baseFilters]);\n\n    useEffect(() => {\n        if (props.isChildGrid || forAssignment || !updatePageTitle) {\n            return;\n        }\n        dispatchData({ type: actionsStateProvider.PAGE_TITLE_DETAILS, payload: { icon: \"\", titleHeading: model.pageTitle || model.title, title: model.title } });\n        return () => {\n            dispatchData({\n                type: actionsStateProvider.PAGE_TITLE_DETAILS, payload: null\n            });\n        };\n    }, []);\n\n    const updateFilters = (e) => {\n        const { items } = e;\n        const updatedItems = items.map(item => {\n            const { field, operator, type, value } = item;\n            const column = gridColumns.find(col => col.field === field) || {};\n            const isNumber = column.type === constants.number;\n\n            if (isNumber && value < 0) {\n                return { ...item, value: null };\n            }\n\n            if ((emptyIsAnyOfOperatorFilters.includes(operator)) || (isNumber && !isNaN(value)) || ((!isNumber))) {\n                const isKeywordField = isElasticScreen && gridColumns.filter(element => element.field === field)[0]?.isKeywordField;\n                if (isKeywordField) {\n                    item.filterField = `${item.field}.keyword`;\n                }\n                item.value = ['isEmpty', 'isNotEmpty'].includes(operator) ? null : value;\n                return { ...item, type: column.type };\n            }\n            const updatedValue = isNumber ? null : value;\n            return { field, operator, type, value: updatedValue };\n        });\n        e.items = updatedItems;\n        setFilterModel(e);\n    };\n\n    const updateSort = (e) => {\n        const sort = e.map((ele) => {\n            const field = gridColumns.filter(element => element.field === ele.field)[0] || {};\n            const isKeywordField = isElasticScreen && field.isKeywordField;\n            const obj = { ...ele, filterField: isKeywordField ? `${ele.field}.keyword` : ele.field };\n            if (field.dataIndex) {\n                obj.filterField = field.dataIndex;\n            }\n            return obj;\n        });\n        setSortModel(sort);\n    };\n    const pageTitle = title || model.gridTitle || model.title;\n    const breadCrumbs = searchParamKey\n        ? [{ text: searchParams.get(searchParamKey) || pageTitle }]\n        : [{ text: pageTitle }];\n    return (\n        <>\n            {showPageTitle !== false && <PageTitle navigate={navigate} showBreadcrumbs={!hideBreadcrumb && !hideBreadcrumbInGrid}\n                breadcrumbs={breadCrumbs} enableBackButton={navigateBack} breadcrumbColor={breadcrumbColor} />}\n            <Box style={gridStyle || customStyle}>\n                <Box sx={{ display: 'flex', maxHeight: '80vh', flexDirection: 'column' }}>\n                    <DataGridPremium\n                        sx={{\n                            \"& .MuiTablePagination-selectLabel\": {\n                                marginTop: 2\n                            },\n                            \"& .MuiTablePagination-displayedRows\": {\n                                marginTop: 2\n                            },\n                            \"& .MuiDataGrid-virtualScroller \": {\n                                zIndex: 2,\n                            }\n                        }}\n                        headerFilters={showHeaderFilters}\n                        unstable_headerFilters={showHeaderFilters} //for older versions of mui\n                        checkboxSelection={forAssignment}\n                        loading={isLoading}\n                        className=\"pagination-fix\"\n                        onCellClick={onCellClickHandler}\n                        onCellDoubleClick={onCellDoubleClick}\n                        columns={gridColumns}\n                        paginationModel={paginationModel}\n                        pageSizeOptions={constants.pageSizeOptions}\n                        onPaginationModelChange={setPaginationModel}\n                        pagination\n                        rowCount={data.recordCount}\n                        rows={data.records}\n                        sortModel={sortModel}\n                        paginationMode={paginationMode}\n                        sortingMode={paginationMode}\n                        filterMode={paginationMode}\n                        processRowUpdate={processRowUpdate}\n                        keepNonExistentRowsSelected\n                        onSortModelChange={updateSort}\n                        onFilterModelChange={updateFilters}\n                        rowSelection={selection}\n                        onRowSelectionModelChange={setSelection}\n                        filterModel={filterModel}\n                        getRowId={getGridRowId}\n                        onRowClick={onRowClick}\n                        slots={{\n                            headerFilterMenu: false,\n                            toolbar: CustomToolbar,\n                            footer: Footer\n                        }}\n                        slotProps={{\n                            toolbar: {\n                                model,\n                                data,\n                                currentPreference,\n                                isReadOnly,\n                                canAdd,\n                                forAssignment,\n                                showAddIcon,\n                                onAdd,\n                                selectionApi,\n                                selectedSet,\n                                selectAll,\n                                available,\n                                onAssign,\n                                assigned,\n                                onUnassign,\n                                effectivePermissions,\n                                clearFilters,\n                                handleExport,\n                                preferenceKey,\n                                apiRef,\n                                gridColumns,\n                                tTranslate,\n                                tOpts,\n                                idProperty,\n                                filterModel,\n                                onPreferenceChange,\n                                toolbarItems\n                            },\n                            footer: {\n                                pagination: true,\n                                apiRef,\n                                tTranslate,\n                                tOpts\n                            },\n                            panel: {\n                                placement: \"bottom-end\"\n                            }\n                        }}\n                        hideFooterSelectedRowCount={rowsSelected}\n                        density=\"compact\"\n                        disableDensitySelector={true}\n                        apiRef={apiRef}\n                        disableAggregation={true}\n                        disableRowGrouping={true}\n                        disableRowSelectionOnClick={disableRowSelectionOnClick}\n                        disablePivoting={disablePivoting}\n                        initialState={{\n                            columns: {\n                                columnVisibilityModel: visibilityModel\n                            },\n                            pinnedColumns: pinnedColumns\n                        }}\n                        localeText={{\n                            filterValueTrue: tTranslate('Yes', tOpts),\n                            filterValueFalse: tTranslate('No', tOpts),\n                            noRowsLabel: tTranslate('No data', tOpts),\n                            footerTotalRows: `${tTranslate('Total rows', tOpts)}:`,\n                            MuiTablePagination: {\n                                labelRowsPerPage: tTranslate('Rows per page', tOpts),\n                                labelDisplayedRows: ({ from, to, count }) => `${from}–${to} ${tTranslate('of', tOpts)} ${count}`,\n                            },\n                            toolbarQuickFilterPlaceholder: tTranslate(model?.searchPlaceholder || 'Search...', tOpts),\n                            toolbarColumns: tTranslate('Columns', tOpts),\n                            toolbarFilters: tTranslate('Filters', tOpts),\n                            toolbarExport: tTranslate('Export', tOpts),\n                            filterPanelAddFilter: tTranslate('Add filter', tOpts),\n                            filterPanelRemoveAll: tTranslate('Remove all', tOpts),\n                            filterPanelDeleteIconLabel: tTranslate('Delete', tOpts),\n                            filterPanelColumns: tTranslate('Columns', tOpts),\n                            filterPanelOperator: tTranslate('Operator', tOpts),\n                            filterPanelValue: tTranslate('Value', tOpts),\n                            filterPanelInputLabel: tTranslate('Value', tOpts),\n                            filterPanelInputPlaceholder: tTranslate('Filter value', tOpts),\n                            columnMenuLabel: tTranslate('Menu', tOpts),\n                            columnMenuShowColumns: tTranslate('Show columns', tOpts),\n                            columnMenuManageColumns: tTranslate('Manage columns', tOpts),\n                            columnMenuFilter: tTranslate('Filter', tOpts),\n                            columnMenuHideColumn: tTranslate('Hide column', tOpts),\n                            columnMenuManagePivot: tTranslate('Manage pivot', tOpts),\n                            toolbarColumnsLabel: tTranslate('Select columns', tOpts),\n                            toolbarExportLabel: tTranslate('Export', tOpts),\n                            pivotDragToColumns: tTranslate('Drag here to pivot by', tOpts),\n                            pivotDragToRows: tTranslate('Drag here to group by', tOpts),\n                            pivotDragToValues: tTranslate('Drag here to create values', tOpts),\n                            pivotColumns: tTranslate('Pivot columns', tOpts),\n                            pivotRows: tTranslate('Row groups', tOpts),\n                            pivotValues: tTranslate('Values', tOpts),\n                            pivotMenuRows: tTranslate('Rows', tOpts),\n                            pivotMenuColumns: tTranslate('Columns', tOpts),\n                            pivotMenuValues: tTranslate('Values', tOpts),\n                            pivotToggleLabel: tTranslate('Pivot', tOpts),\n                            pivotSearchControlPlaceholder: tTranslate('Search pivot columns', tOpts),\n                            columnMenuUnsort: tTranslate('Unsort', tOpts),\n                            columnMenuSortAsc: tTranslate('Sort by ascending', tOpts),\n                            columnMenuSortDesc: tTranslate('Sort by descending', tOpts),\n                            columnMenuUnpin: tTranslate('Unpin', tOpts),\n                            columnsPanelTextFieldLabel: tTranslate('Find column', tOpts),\n                            columnsPanelTextFieldPlaceholder: tTranslate('Column title', tOpts),\n                            columnsPanelHideAllButton: tTranslate('Hide all', tOpts),\n                            columnsPanelShowAllButton: tTranslate('Show all', tOpts),\n                            pinToLeft: tTranslate('Pin to left', tOpts),\n                            pinToRight: tTranslate('Pin to right', tOpts),\n                            unpin: tTranslate('Unpin', tOpts),\n                            filterValueAny: tTranslate('any', tOpts),\n                            filterOperatorIs: tTranslate('is', tOpts),\n                            filterOperatorNot: tTranslate('is not', tOpts),\n                            filterOperatorIsAnyOf: tTranslate('is any of', tOpts),\n                            filterOperatorContains: tTranslate('contains', tOpts),\n                            filterOperatorDoesNotContain: tTranslate('does not contain', tOpts),\n                            filterOperatorEquals: tTranslate('equals', tOpts),\n                            filterOperatorDoesNotEqual: tTranslate('does not equal', tOpts),\n                            filterOperatorStartsWith: tTranslate('starts with', tOpts),\n                            filterOperatorEndsWith: tTranslate('ends with', tOpts),\n                            filterOperatorIsEmpty: tTranslate('is empty', tOpts),\n                            filterOperatorIsNotEmpty: tTranslate('is not empty', tOpts),\n                            filterOperatorAfter: tTranslate('is after', tOpts),\n                            filterOperatorOnOrAfter: tTranslate('is on or after', tOpts),\n                            filterOperatorBefore: tTranslate('is before', tOpts),\n                            filterOperatorOnOrBefore: tTranslate('is on or before', tOpts),\n                            toolbarFiltersTooltipHide: tTranslate('Hide filters', tOpts),\n                            toolbarFiltersTooltipShow: tTranslate('Show filters', tOpts),\n\n                            //filter textfield labels\n                            headerFilterOperatorContains: tTranslate('contains', tOpts),\n                            headerFilterOperatorEquals: tTranslate('equals', tOpts),\n                            headerFilterOperatorStartsWith: tTranslate('starts with', tOpts),\n                            headerFilterOperatorEndsWith: tTranslate('ends with', tOpts),\n                            headerFilterOperatorIsEmpty: tTranslate('is empty', tOpts),\n                            headerFilterOperatorIsNotEmpty: tTranslate('is not empty', tOpts),\n                            headerFilterOperatorAfter: tTranslate('is after', tOpts),\n                            headerFilterOperatorOnOrAfter: tTranslate('is on or after', tOpts),\n                            headerFilterOperatorBefore: tTranslate('is before', tOpts),\n                            headerFilterOperatorOnOrBefore: tTranslate('is on or before', tOpts),\n                            headerFilterOperatorIs: tTranslate('is', tOpts),\n                            'headerFilterOperator=': tTranslate('equals', tOpts),\n                            'headerFilterOperator!=': tTranslate('does not equal', tOpts),\n                            'headerFilterOperator>': tTranslate('greater than', tOpts),\n                            'headerFilterOperator>=': tTranslate('greater than or equal to', tOpts),\n                            'headerFilterOperator<': tTranslate('less than', tOpts),\n                            'headerFilterOperator<=': tTranslate('less than or equal to', tOpts),\n                            columnsManagementSearchTitle: tTranslate('Search', tOpts),\n                            columnsManagementNoColumns: tTranslate('No columns', tOpts),\n                            paginationRowsPerPage: tTranslate('Rows per page', tOpts),\n                            paginationDisplayedRows: ({ from, to, count }) => `${from}–${to} ${tTranslate('of', tOpts)} ${count}`,\n                            toolbarQuickFilterLabel: tTranslate('Search', tOpts),\n                            toolbarFiltersTooltipActive: (count) => {\n                                const key = count === 1 ? 'active filter' : 'active filters';\n                                return `${count} ${tTranslate(key, tOpts)}`;\n                            },\n                            columnHeaderSortIconLabel: tTranslate('Sort', tOpts),\n                            filterPanelOperatorAnd: tTranslate('And', tOpts),\n                            filterPanelOperatorOr: tTranslate('Or', tOpts),\n                            noResultsOverlayLabel: tTranslate('No results found', tOpts),\n                            columnHeaderFiltersTooltipActive: (count) => {\n                                const key = count === 1 ? 'active filter' : 'active filters';\n                                return `${count} ${tTranslate(key, tOpts)}`;\n                            },\n                            detailPanelToggle: tTranslate('Detail panel toggle', tOpts),\n                            checkboxSelectionHeaderName: tTranslate('Checkbox selection', tOpts),\n                            columnsManagementShowHideAllText: tTranslate('Show/Hide all', tOpts),\n                            noColumnsOverlayLabel: tTranslate('No columns', tOpts),\n                            noColumnsOverlayManageColumns: tTranslate('Manage columns', tOpts),\n                            columnsManagementReset: tTranslate('Reset', tOpts),\n                            groupColumn: (name) => `${tTranslate('Group by', tOpts)} ${name}`,\n                            unGroupColumn: (name) => `${tTranslate('Ungroup', tOpts)} ${name}`,\n                            footerRowSelected: (count) => {\n                                const key = count === 1 ? 'item selected' : 'items selected';\n                                return `${count.toLocaleString()} ${tTranslate(key, tOpts)}`;\n                            }\n                        }}\n                        showToolbar={true}\n                        columnHeaderHeight={columnHeaderHeight}\n                    />\n                </Box>\n                {errorMessage && (<DialogComponent open={!!errorMessage} onConfirm={clearError} onCancel={clearError} title=\"Info\" hideCancelButton={true} > {errorMessage}</DialogComponent>)\n                }\n                {isDeleting && !errorMessage && (\n                    <DialogComponent open={isDeleting} onConfirm={handleDelete} onCancel={() => setIsDeleting(false)} title=\"Confirm Delete\">\n                        <DeleteContentText>\n                            {tTranslate(\"Are you sure you want to delete\", tOpts)} {record.name && <Tooltip style={{ display: \"inline\" }} title={record.name} arrow>\n                                {record.name.length > 30 ? `${record.name.slice(0, 30)}...` : record.name}\n                            </Tooltip>} ?\n                        </DeleteContentText>\n                    </DialogComponent>)}\n                {showAddConfirmation && (\n                    <DialogComponent\n                        open={showAddConfirmation}\n                        onConfirm={handleAddRecords}\n                        onCancel={() => setShowAddConfirmation(false)}\n                        title=\"Confirm Add\"\n                    >\n                        <DeleteContentText>\n                            {tTranslate(\"Are you sure you want to add\", tOpts)} {selectedSet.size} {tTranslate(\"records\", { count: selectedSet.size, ...tOpts })}?\n                        </DeleteContentText>\n                    </DialogComponent>\n                )}\n            </Box >\n        </>\n    );\n}, areEqual);\n\nexport default GridBase;","import React, { useMemo } from 'react';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport { FormHelperText } from '@mui/material';\nimport Checkbox from '@mui/material/Checkbox';\n\nconst Field = ({ column, field, formik, otherProps }) => {\n    const handleChange = (event) => {\n        formik.setFieldValue(field, event.target.checked);\n    }\n    const checked = useMemo(()=> formik.values[field] ?? !!column.defaultValue, [formik, column]);\n    const isDisabled = typeof column.readOnly === 'function' ? column.readOnly(formik) : column.readOnly; \n    return <div key={field}>\n        <FormControlLabel\n            control={\n                <Checkbox\n                    {...otherProps}\n                    name={field}\n                    disabled={isDisabled || column.disabled === true}\n                    checked={checked}\n                    onChange={handleChange}\n                    onBlur={formik.handleBlur}\n                    defaultChecked={column.defaultValue}\n                />\n            }\n        />\n        <FormHelperText error={formik.touched[field] && Boolean(formik.errors[field])} >{formik.touched[field] && formik.errors[field]}</FormHelperText>\n    </div>\n}\n\nexport default Field;","import TextField from '@mui/material/TextField';\nimport React from 'react';\nimport { useTheme } from '@mui/material';\n\nconst field = ({ column, field, formik, otherProps }) => {\n    const theme = useTheme();\n    const rows = column.rows || (column.multiline ? 5 : 1);\n    return <TextField\n        type=\"text\"\n        variant={column.variant || \"standard\"}\n        InputProps={{\n            readOnly: column.readOnly === true,\n            sx: column.readOnly\n                ? { backgroundColor: theme.palette?.action?.disabled } // Light grey background for read-only inputs\n                : undefined\n        }}\n        key={field}\n        required={column.required}\n        multiline={column.multiline}\n        rows={rows}\n        fullWidth\n        name={field}\n        value={formik.values[field]}\n        onChange={formik.handleChange}\n        onBlur={formik.handleBlur}\n        error={formik.touched[field] && Boolean(formik.errors[field])}\n        helperText={formik.touched[field] && formik.errors[field]}\n        autoComplete={column.autoComplete}\n        {...otherProps}\n        defaultValue={column.defaultValue}\n    />;\n};\n\nexport default field;","import { useEffect, useState } from 'react';\n\nfunction useDebounce(value, delay) {\n    const [debouncedValue, setDebouncedValue] = useState(value);\n\n    useEffect(() => {\n        // Set a timer to update the debounced value\n        const timer = setTimeout(() => {\n            setDebouncedValue(value);\n        }, delay);\n\n        // Cleanup function to cancel the timer if the value changes again before the delay\n        return () => {\n            clearTimeout(timer);\n        };\n    }, [value, delay]); // Rerun effect only if value or delay changes\n\n    return debouncedValue;\n}\n\nexport default useDebounce;\n","import React, { useMemo, useState, useEffect, useId } from 'react';\nimport { NumberField as BaseNumberField } from '@base-ui/react/number-field';\nimport {\n    IconButton,\n    FormControl,\n    FormHelperText,\n    Input,\n    OutlinedInput,\n    FilledInput,\n    InputAdornment,\n    useTheme\n} from '@mui/material';\nimport KeyboardArrowUpIcon from '@mui/icons-material/KeyboardArrowUp';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport useDebounce from '../../../hooks/useDebounce';\n\nconst resolveValue = ({ value, state }) => {\n    if (typeof value === 'string' && value.startsWith('{') && value.endsWith('}')) {\n        const key = value.slice(1, -1); // Extract key inside the braces\n        return state[key] !== undefined ? state[key] : value;\n    }\n    return value;\n};\n\n\nconst inputComponentMap = {\n    outlined: OutlinedInput,\n    filled: FilledInput,\n    standard: Input,\n};\n\nconst NumberFieldAdornment = () => (\n    <InputAdornment\n        position=\"end\"\n        sx={{\n            flexDirection: 'column',\n            maxHeight: 'unset',\n            alignSelf: 'stretch',\n            ml: 0,\n            '& button': {\n                py: 0,\n                flex: 1,\n                borderRadius: 0.5,\n            },\n        }}\n    >\n        <BaseNumberField.Increment\n            render={<IconButton size=\"small\" aria-label=\"Increase\" />}\n        >\n            <KeyboardArrowUpIcon\n                fontSize=\"small\"\n                sx={{ transform: 'translateY(2px)' }}\n            />\n        </BaseNumberField.Increment>\n\n        <BaseNumberField.Decrement\n            render={<IconButton size=\"small\" aria-label=\"Decrease\" />}\n        >\n            <KeyboardArrowDownIcon\n                fontSize=\"small\"\n                sx={{ transform: 'translateY(-2px)' }}\n            />\n        </BaseNumberField.Decrement>\n    </InputAdornment>\n);\n\nconst Field = ({ column, otherProps, formik, field, ...props }) => {\n    const { min, max, readOnly } = column;\n    const theme = useTheme();\n\n    const resolvedMin = useMemo(\n        () => resolveValue({ value: min, state: formik.values }),\n        [min, formik.values]\n    );\n\n    const resolvedMax = useMemo(\n        () => resolveValue({ value: max, state: formik.values }),\n        [max, formik.values]\n    );\n    const formikFieldValue = useMemo(() => formik.values[field] ?? null, [formik.values[field]]);\n    const [inputValue, setInputValue] = useState(formikFieldValue);\n    const debouncedValue = useDebounce(inputValue, 400);\n\n    useEffect(() => {\n        if (debouncedValue !== formikFieldValue) {\n            formik.setFieldValue(field, debouncedValue);\n        }\n    }, [debouncedValue]);\n\n    // Sync with formik value changes from external sources\n    useEffect(() => {\n        if (formikFieldValue !== inputValue) {\n            setInputValue(formikFieldValue);\n        }\n    }, [formikFieldValue]);\n\n    const handleValueChange = (value) => {\n        setInputValue(value);\n    };\n\n    const handleBlur = (event) => {\n        formik.setFieldTouched(field, true);\n        if (typeof props.onBlur === \"function\") {\n            props.onBlur(event);\n        }\n    };\n\n    const inputId = useId();\n    const id = `number-field-${field}-${inputId}`;\n    const variant = column.variant || 'standard';\n    const InputComponent = inputComponentMap[variant];\n    return (\n        <BaseNumberField.Root\n            value={inputValue}\n            onValueChange={handleValueChange}\n            min={resolvedMin}\n            max={resolvedMax}\n            disabled={readOnly}\n            render={(baseProps, state) => (\n                <FormControl\n                    fullWidth\n                    ref={baseProps.ref}\n                    error={formik.touched[field] && Boolean(formik.errors[field])}\n                    sx={readOnly ? {\n                        backgroundColor: theme.palette?.action?.disabled\n                    } : undefined}\n                >\n                    {baseProps.children}\n                </FormControl>\n            )}\n        >\n            <BaseNumberField.Input\n                render={(inputProps, state) => (\n                    <InputComponent\n                        id={id}\n                        inputRef={inputProps.ref}\n                        value={state.inputValue}\n                        onChange={inputProps.onChange}\n                        onBlur={(e) => {\n                            inputProps.onBlur(e);\n                            handleBlur(e);\n                        }}\n                        inputProps={{\n                            ...inputProps,\n                            'aria-describedby': formik.touched[field] && formik.errors[field] ? `${id}-error` : undefined,\n                        }}\n                        endAdornment={<NumberFieldAdornment />}\n                        sx={{ pr: 0 }}\n                        {...otherProps}\n                    />\n                )}\n            />\n            {formik.touched[field] && formik.errors[field] && <FormHelperText id={`${id}-error`} error={true}> {formik.errors[field]} </FormHelperText>}\n        </BaseNumberField.Root>\n    );\n};\n\nexport default Field;\n","import React from 'react';\nimport StringField from './string';\nimport { IconButton, InputAdornment } from '@mui/material';\nimport VisibilityOffIcon from '@mui/icons-material/VisibilityOff';\nimport VisibilityIcon from '@mui/icons-material/Visibility';\n\nconst Field = ({ otherProps, ...props }) => {\n\tconst [showPassword, setShowPassword] = React.useState(false);\n\tconst handleClickShowPassword = () => setShowPassword((show) => !show);\n\n\tconst handleMouseDownPassword = (event) => {\n\t\tevent.preventDefault();\n\t};\n    const { readOnly = false, disabled = false } = props.column || {};\n    otherProps = {\n\t\ttype: showPassword ? 'text' : 'password',\n\t\tInputProps: {\n\t\t\treadOnly,\n\t\t\tdisabled,\n\t\t\tendAdornment: (\n\t\t\t\t<InputAdornment position=\"end\">\n\t\t\t\t\t<IconButton\n                        aria-label=\"toggle password visibility\"\n                        onClick={handleClickShowPassword}\n                        onMouseDown={handleMouseDownPassword}\n                        edge=\"end\"\n                        disabled={disabled}\n                        readOnly={readOnly}\n                        size=\"large\">\n\t\t\t\t\t\t{showPassword ? <VisibilityOffIcon /> : <VisibilityIcon />}\n\t\t\t\t\t</IconButton>\n\t\t\t\t</InputAdornment>\n\t\t\t)\n\t\t},\n        ...otherProps\n    }\n    return <StringField otherProps={otherProps} {...props} />\n}\n\nexport default Field;","import React from 'react';\nimport { DatePicker } from '@mui/x-date-pickers/DatePicker';\nimport dayjs from 'dayjs';\nimport { useStateContext } from '../../useRouter/StateProvider';\n\nconst Field = ({ column, field, formik, otherProps, fieldConfigs = {}, mode }) => {\n    const isDisabled = mode !== 'copy' && fieldConfigs.disabled;\n    const { systemDateTimeFormat, stateData } = useStateContext(); //provider\n    return <DatePicker\n        {...otherProps}\n        variant=\"standard\"\n        readOnly={column?.readOnly === true}\n        key={field}\n        fullWidth\n        format={systemDateTimeFormat(true, false, stateData.dateTime)}\n        name={field}\n        value={dayjs(formik.values[field])}\n        onChange={(value) => {\n            const adjustedDate = dayjs(value).hour(12);\n            const isoString = adjustedDate.toISOString();\n            formik.setFieldValue(field, isoString);\n        }}\n        onBlur={formik.handleBlur}\n        helperText={formik.touched[field] && formik.errors[field]}\n        minDate={(column.min ? dayjs(column.min) : null)}\n        maxDate={(column.max ? dayjs(column.max) : null)}\n        disabled={isDisabled}\n        slotProps={{ textField: { fullWidth: true, helperText: formik.errors[field], variant: \"standard\" } }}\n    />\n\n}\n\nexport default Field;","import React from 'react';\nimport { DateTimePicker } from '@mui/x-date-pickers/DateTimePicker';\nimport dayjs from 'dayjs';\nimport { useStateContext } from '../../useRouter/StateProvider'\n\nconst Field = ({ column, field, formik, otherProps }) => {\n    const { systemDateTimeFormat, stateData } = useStateContext();\n    return <DateTimePicker\n        {...otherProps}\n        variant=\"standard\"\n        readOnly={column?.readOnly === true}\n        key={field}\n        fullWidth\n        format={systemDateTimeFormat(false, false, stateData.dateTime)}\n        name={field}\n        value={dayjs(formik.values[field])}\n        onChange={(value) => formik.setFieldValue(field, value)}\n        onBlur={formik.handleBlur}\n        helperText={formik.touched[field] && formik.errors[field]}\n        minDateTime={(column.min ? dayjs(column.min) : null)}\n        maxDateTime={(column.max ? dayjs(column.max) : null)}\n        slotProps={{ textField: { fullWidth: true, helperText: formik.errors[field], variant: \"standard\" } }}\n    />\n\n}\n\nexport default Field;","import React from 'react';\nimport { TimePicker } from '@mui/x-date-pickers/TimePicker';\nimport dayjs from 'dayjs';\n\nconst field = ({ column, field, formik, otherProps }) => {\n    let inputValue = formik.values[field];\n    if (column.isUtc) {\n        inputValue = dayjs.utc(inputValue).utcOffset(dayjs().utcOffset(), true).format();\n    }\n    return <TimePicker\n        {...otherProps}\n        variant=\"standard\"\n        readOnly={column.readOnly === true}\n        key={field}\n        fullWidth\n        name={field}\n        value={dayjs(inputValue)}\n        onChange={(value) => {\n            if (column.isUtc) {\n                value = (value && value.isValid()) ? value.format('YYYY-MM-DDTHH:mm:ss') + '.000Z' : null;\n            }\n            return formik.setFieldValue(field, value);\n        }}\n        onBlur={formik.handleBlur}\n        helperText={formik.touched[field] && formik.errors[field]}\n        slotProps={{ textField: { fullWidth: true, helperText: formik.errors[field], variant: \"standard\" } }}\n    />\n}\n\nexport default field;","import { useEffect, useMemo, useState } from 'react';\nimport request from \"../components/Grid/httpRequest\";\nimport { useStateContext } from \"../components/useRouter/StateProvider\";\n\nconst emptyValues = [null, undefined, ''];\n\nexport default function useCascadingLookup({ column, formik, lookups, dependsOn = [], isAutoComplete = false, userSelected, model }) {\n    const [options, setOptions] = useState([]);\n    const { stateData } = useStateContext();\n    const url = stateData?.gridSettings?.permissions?.Url || '';\n    const api = useMemo(() => `${url}${model?.api || ''}`, [url, model?.api]);\n    \n    // Memoize dependency values\n    const dependencyValues = useMemo(() => {\n        const toReturn = {};\n        if (!dependsOn.length) return toReturn;\n        for (const dependency of dependsOn) {\n            toReturn[dependency] = formik.values[dependency];\n        }\n        return toReturn;\n    }, dependsOn.map(dep => formik.values[dep]));\n\n    // Initial options for non-cascading\n    const initialOptions = useMemo(() => {\n        if (dependsOn.length) return [];\n        return typeof column.lookup === 'string' ? lookups[column.lookup] : column.lookup;\n    }, [column.lookup, lookups, dependsOn]);\n\n    const fetchOptions = async () => {\n        if (!column.lookup) return;\n        // Only fetch if all dependencies have values\n        const allDependenciesHaveValues = Object.values(dependencyValues).every(\n            value => !emptyValues.includes(value)\n        );\n        if (!allDependenciesHaveValues) {\n            setOptions([]);\n            return;\n        }\n        let newOptions = [];\n        const requestBody = {\n            lookups: [{ lookup: column.lookup, where: dependencyValues }]\n        };\n        try {\n            const response = await request({ url: `${api}/combo`, params: requestBody, disableLoader: true, jsonPayload: true });\n            if (response && response.success && response.lookups) {\n                newOptions = response.lookups[column.lookup] || [];\n            } else {\n                newOptions = [];\n            }\n        } catch {\n            newOptions = [];\n        } finally {\n            setOptions(newOptions);\n        }\n    };\n\n    // Fetch cascading options\n    useEffect(() => {\n        if (dependsOn.length) {\n            fetchOptions();\n        } else if (isAutoComplete || !userSelected.current) {\n            setOptions(initialOptions);\n        }\n    }, [dependencyValues, initialOptions, api, column.lookup]);\n\n    return options;\n}\n","import React, { useEffect, useMemo, useCallback } from 'react';\nimport { FormHelperText, useTheme } from '@mui/material';\nimport KeyboardArrowDownIcon from '@mui/icons-material/KeyboardArrowDown';\nimport FormControl from '@mui/material/FormControl';\nimport InputLabel from '@mui/material/InputLabel';\nimport Select from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport useCascadingLookup from '../../../hooks/useCascadingLookup';\n\nconst SelectField = React.memo(({ column, field, formik, lookups, dependsOn = [], model, ...otherProps }) => {\n    const userSelected = React.useRef(false);\n    const { placeHolder } = column;\n    const options = useCascadingLookup({ column, formik, lookups, dependsOn, userSelected, model });\n    const theme = useTheme();\n\n    // Memoize input value processing to avoid recalculation on each render\n    const inputValue = useMemo(() => {\n        let value = formik.values[field];\n        \n        // Handle default value selection\n        if (options?.length && !value && !column.multiSelect && \"IsDefault\" in options[0]) {\n            const isDefaultOption = options.find(e => e.IsDefault);\n            if (isDefaultOption) {\n                value = isDefaultOption.value;\n                formik.setFieldValue(field, isDefaultOption.value);\n            }\n        }\n        \n        // Handle multi-select values\n        if (column.multiSelect) {\n            if (!value || value.length === 0) {\n                value = [];\n            } else if (!Array.isArray(value)) {\n                value = value.split(',').map((e) => parseInt(e));\n            }\n        }\n        \n        return value;\n    }, [formik.values[field], options, column.multiSelect, field]);\n\n    // Memoize event handlers to prevent unnecessary re-renders of child components\n    const handleChange = useCallback((event) => {\n        formik.handleChange(event);\n        userSelected.current = true;\n    }, [formik]);\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            error={formik.touched[field] && formik.errors[field]}\n            variant=\"standard\">\n            <InputLabel>{placeHolder ? placeHolder : \"\"}</InputLabel> \n            <Select\n                IconComponent={KeyboardArrowDownIcon}\n                {...otherProps}\n                name={field}\n                multiple={column.multiSelect === true}\n                readOnly={column.readOnly === true}\n                value={`${inputValue}`}\n                onChange={handleChange}\n                onBlur={formik.handleBlur}\n                sx={{\n                    backgroundColor: column.readOnly ? theme.palette?.action?.disabled : ''\n                }}\n            >\n                {Array.isArray(options) && options.map(option => (\n                    <MenuItem key={option.value} value={option.value} disabled={option.isDisabled}>\n                        {option.label}\n                    </MenuItem>\n                ))}\n            </Select>\n            <FormHelperText>{formik.touched[field] && formik.errors[field]}</FormHelperText>\n        </FormControl>\n    );\n});\n\nexport default SelectField;","import { useCallback } from \"react\";\nimport { styled } from \"@mui/material/styles\";\n\nconst DivSpacing = styled('div')({\n    marginTop: '10px',\n    marginBottom: '10px',\n    fontSize: '20px'\n});\nconst TransferField = ({ component, name, formik, field, column }) => {\n    const { value } = formik.getFieldProps(name || field);\n    const { setFieldValue } = formik;\n    const Component = component || column.relation;\n    const onAssignChange = useCallback((value) => {\n        setFieldValue(name || field, value);\n    }, [setFieldValue, name, field]);\n    return (\n        <div>\n            <DivSpacing>{`${\"Available\"} ${column.label}`}</DivSpacing>\n            <Component selected={value} available={true} onAssignChange={onAssignChange} disableCellRedirect={column.disableCellRedirect} readOnly={column.readOnly} />\n            <DivSpacing>{`${\"Assigned\"} ${column.label}`}</DivSpacing>\n            <Component selected={value} assigned={true} onAssignChange={onAssignChange} disableCellRedirect={column.disableCellRedirect} readOnly={column.readOnly} />\n        </div>\n    );\n}\n\nexport default TransferField;","import React from \"react\";\nimport { FormControl, FormControlLabel, FormLabel, Radio, RadioGroup, FormHelperText, useTheme } from \"@mui/material\";\n\nconst Field = ({ field, formik, orientation = \"row\", label, lookups, fieldConfigs={}, mode, ...otherProps }) => {\n    const handleChange = (event) => {\n        formik.setFieldValue(field, event.target.value);\n    }\n\n    const options = lookups ? lookups[otherProps.column.lookup] : [];\n    const theme = useTheme();\n    const isError = formik.touched[field] && Boolean(formik.errors[field]);\n    const isDisabled = mode !== 'copy' && fieldConfigs.disabled;\n    return (\n        <>\n            <FormControl component=\"fieldset\" error={isError}>\n                <FormLabel component=\"legend\">{label}</FormLabel>\n                <RadioGroup\n                    row={orientation === \"row\"}\n                    aria-label={label}\n                    name={field}\n                    value={formik.values[field]}\n                    onChange={handleChange}\n                >\n                    {options?.map((option, index) => (\n                        <FormControlLabel\n                            key={index}\n                            value={option.value}\n                            control={<Radio />}\n                            label={option.label}\n                            disabled={isDisabled}\n                        />\n                    ))}\n                </RadioGroup>\n            </FormControl>\n            {isError && <FormHelperText style={{ color: theme.palette.error.main }}>{formik.errors[field]}</FormHelperText>}\n        </>\n    );\n};\n\nexport default Field;\n","import * as React from 'react';\nimport { FormHelperText } from '@mui/material';\nimport FormControl from '@mui/material/FormControl';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport TextField from '@mui/material/TextField';\nimport useCascadingLookup from '../../../hooks/useCascadingLookup';\n\nconst consts = {\n    limitTags: 5\n}\n\nconst Field = React.memo(({ column, field, formik, lookups, dependsOn = [], fieldConfigs = {}, mode, model, ...otherProps }) => {\n    const options = useCascadingLookup({ column, formik, lookups, dependsOn, model, isAutoComplete: true });\n    let inputValue = formik.values[field] || [];\n    if (!Array.isArray(inputValue)) {\n        inputValue = inputValue.split(\", \").map(Number);\n    }\n    const filteredCombos = options.filter(option => inputValue.includes(option.value)) || [];\n    const isDisabled = mode !== 'copy' && fieldConfigs.disabled;\n    const handleAutoCompleteChange = (_, newValue) => {\n        let toSave = newValue?.map(val => val.value) || [];\n        // multi-select values are stored as array or as comma-separated-string based on dataFormat\n        if (column.dataFormat !== 'array') {\n            toSave = toSave.length ? toSave.join(', ') : '';\n        }\n        formik.setFieldValue(field, toSave);\n    };\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            variant=\"standard\"\n            error={formik.touched[field] && Boolean(formik.errors[field])}\n        >\n            <Autocomplete\n                {...otherProps}\n                multiple\n                id={field}\n                limitTags={column.limitTags || consts.limitTags}\n                options={options || []}\n                getOptionLabel={(option) => option.label || ''}\n                defaultValue={filteredCombos}\n                renderInput={(params) => <TextField {...params} variant=\"standard\" />}\n                onChange={handleAutoCompleteChange}\n                value={filteredCombos}\n                size=\"small\"\n                disabled={isDisabled}\n            />\n            {formik.touched[field] && formik.errors[field] && <FormHelperText>{formik.errors[field]}</FormHelperText>}\n        </FormControl>\n    )\n});\n\nexport default Field;\n\n","import { Avatar, useTheme } from \"@mui/material\";\n\nexport const brandBackgroundColor = '#182eb5';\nexport const brandColor = '#ffffff';\nfunction RenderDayCell({ value }) {\n    const days = ['S', 'M', 'T', 'W', 'T', 'F', 'S'];\n    const dayValues = value.split('');\n\n    const theme = useTheme();\n    return (\n        <div style={{ display: 'flex' }}>\n            {dayValues.map((val, index) => (\n                <Avatar\n                    key={index}\n                    sx={{\n                        backgroundColor: val === '1' ? theme.palette.success.main : brandColor,\n                        color: val === '1' ? 'white' : 'black',\n                        marginRight: '5px',\n                        width: '25px',\n                        height: '25px',\n                        fontSize: '0.65rem',\n                        lineHeight: '25px',\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'center',\n                        border: \"1px solid grey\"\n                    }}\n                >\n                    {days[index]}\n                </Avatar>\n            ))}\n        </div>\n    );\n}\n\nexport {\n    RenderDayCell\n}","import React from 'react';\nimport { useCallback, useState } from 'react';\nimport { Avatar, FormControl, FormControlLabel, FormHelperText, Radio, RadioGroup, styled, useTheme } from '@mui/material';\nimport {  grey } from '@mui/material/colors';\nimport { brandBackgroundColor } from './CustomRenderCell';\n\n\nconst days = [\n    { label: 'Sunday', value: 0, display: 'S' },\n    { label: 'Monday', value: 1, display: 'M' },\n    { label: 'Tuesday', value: 2, display: 'T' },\n    { label: 'Wednesday', value: 3, display: 'W' },\n    { label: 'Thursday', value: 4, display: 'T' },\n    { label: 'Friday', value: 5, display: 'F' },\n    { label: 'Saturday', value: 6, display: 'S' },\n];\n\nconst CustomAvator = styled(Avatar)(({ theme, isSelected }) => ({\n    width: 34,\n    height: 34,\n    padding: 1,\n    margin: 1,\n    backgroundColor: isSelected ? brandBackgroundColor : '#ffffff',\n    border: `1px solid ${grey[500]}`,\n    color: isSelected ? 'white' : 'black',\n}));\n\nconst DayAvatar = ({ day, onClick, isSelected }) => {\n    return (\n        <CustomAvator\n            key={day.value}\n            onClick={() => onClick(day.value)}\n            isSelected={isSelected}\n            style={{ margin: '4px' }}\n        >\n            {day.display}\n        </CustomAvator>\n    );\n};\nconst DaySelection = ({ name, field, formik, expired }) => {\n    const { setFieldValue } = formik;\n    const { value } = formik.getFieldProps(name || field);\n\n    const isWeekend = '1000001';\n    const isWeekdays = '0111110';\n    const defaultVal = \"0\".repeat(7);\n\n    const [selectedDays, setSelectedDays] = useState(value || defaultVal);\n    const [radioValue, setRadioValue] = useState(() => {\n        if (!value) return '';\n        if (value === isWeekend) return isWeekend;\n        if (value === isWeekdays) return isWeekdays;\n        return 'Custom';\n    });\n    const [presetSelected, setPresetSelected] = useState(false);\n    const onAssignChange = useCallback((newValue) => {\n        if (Array.isArray(newValue)) {\n            let finalValue = defaultVal;\n            for (const val of newValue) {\n                finalValue = finalValue.substring(0, val) + \"1\" + finalValue.substring(val + 1);\n            }\n            setSelectedDays(finalValue);\n            setFieldValue(name || field, finalValue);\n            setPresetSelected(true);\n        } else {\n            let baseValue = presetSelected ? defaultVal : selectedDays;\n            const finalValue = baseValue.slice(0, newValue) + (baseValue[newValue] === \"1\" ? \"0\" : \"1\") + baseValue.slice(newValue + 1);\n            setSelectedDays(finalValue);\n            setFieldValue(name || field, finalValue);\n            setRadioValue('Custom');\n            setPresetSelected(false);\n        }\n    }, [presetSelected, defaultVal, selectedDays, name, field, setFieldValue]);\n    const theme = useTheme();\n    const isError = formik.touched[field] && Boolean(formik.errors[field]);\n    return (\n        <>\n            <FormControl component=\"fieldset\" error={isError}>\n                <RadioGroup\n                    row\n                    name={name || field}\n                    value={radioValue}\n                    onChange={event => {\n                        const val = event.target.value;\n                        setRadioValue(val);\n                        if (val !== 'Custom') {\n                            setSelectedDays(val);\n                            setFieldValue(name || field, val);\n                            setPresetSelected(true);\n                        } else {\n                            setSelectedDays(defaultVal);\n                            setFieldValue(name || field, defaultVal);\n                            setPresetSelected(false);\n                        }\n                    }}\n                >\n                    <FormControlLabel value={isWeekend} control={<Radio />} label={\"Weekends (Sat - Sun)\"} onClick={() => onAssignChange([0, 6])} />\n                    <FormControlLabel value={isWeekdays} control={<Radio />} label={\"Weekdays (Mon - Fri)\"} onClick={() => onAssignChange([1, 2, 3, 4, 5])} />\n                    <FormControlLabel value={'Custom'} control={<Radio />} label={\"Specific days\"} />\n                    {days.map((day, index) => (\n                        <DayAvatar\n                            key={day.value}\n                            day={day}\n                            onClick={() => onAssignChange(index)}\n                            isSelected={radioValue === 'Custom' && selectedDays[index] === \"1\"}\n                            disabled={expired}\n                        />\n                    ))}\n                </RadioGroup>\n            </FormControl>\n            {isError && <FormHelperText style={{ color: theme.palette.error.main }}>{formik.errors[field]}</FormHelperText>}\n        </>\n    );\n};\n\nexport default DaySelection;","import * as React from 'react';\nimport { FormHelperText, useTheme } from '@mui/material';\nimport FormControl from '@mui/material/FormControl';\nimport Autocomplete from '@mui/material/Autocomplete';\nimport TextField from '@mui/material/TextField';\nimport Chip from '@mui/material/Chip';\nimport { useCallback } from 'react';\n\nconst Field = ({ isAdd, column, field, formik, otherProps, fieldConfigs = {}, mode }) => {\n    const theme = useTheme();\n    let inputValue = formik.values[field] || [];\n    if (!Array.isArray(inputValue)) {\n        inputValue = inputValue.split(',').map(item => item.trim());\n    }\n    const isDisabled = React.useMemo(() => {\n        if (mode === 'copy') return true;\n        if (typeof fieldConfigs.disabled !== 'undefined') return fieldConfigs.disabled;\n        if (typeof column.disabled === 'function') return column.disabled({ isAdd, formik });\n        return Boolean(column.disabled);\n    }, [mode, fieldConfigs.disabled, column.disabled]);\n    const fixedOptions = column.hasDefault && !isAdd ? [inputValue[0]] : [];\n\n    const handleAutoCompleteChange = useCallback((e, newValue, action, item = {}) => {\n        const lastElement = newValue.pop()?.trim();\n        if (!newValue.includes(lastElement)) {\n            newValue.push(lastElement);\n        }\n        if (fixedOptions && fixedOptions.includes(item.option) && action === \"removeOption\") {\n            newValue = [item.option];\n        }\n        // multi-select values are stored as array or as comma-separated-string based on dataFormat\n        if (column.dataFormat !== 'array') {\n            newValue = newValue.length ? newValue.join(',') : '';\n        }\n        formik.setFieldValue(field, newValue);\n    },[formik, field]);\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            variant=\"standard\"\n            error={formik.touched[field] && Boolean(formik.errors[field])}\n        >\n            <Autocomplete\n                {...otherProps}\n                multiple\n                id={field}\n                freeSolo={true}\n                value={inputValue}\n                options={[]}\n                renderInput={(params) => (\n                    <TextField \n                        {...params} \n                        variant=\"standard\"\n                        InputProps={{\n                            ...params.InputProps,\n                            sx: {\n                                ...params.InputProps?.sx,\n                                ...(isDisabled && { backgroundColor: theme.palette?.action?.disabled })\n                            }\n                        }}\n                    />\n                )}\n                onChange={handleAutoCompleteChange}\n                size=\"small\"\n                renderTags={(tagValue, getTagProps) =>\n                    tagValue.map((option, index) => {\n                        const { key, ...tagProps } = getTagProps({ index });\n                        return (\n                            <Chip\n                                key={key}\n                                label={option}\n                                {...tagProps}\n                                disabled={fixedOptions.includes(option)}\n                            />\n                        );\n                    })\n                }\n                disabled={isDisabled}\n            />\n            {formik.touched[field] && formik.errors[field] && <FormHelperText>{formik.errors[field]}</FormHelperText>}\n        </FormControl>\n    )\n}\n\nexport default Field;\n\n","import React from 'react';\nimport Box from '@mui/material/Box';\nimport { SimpleTreeView } from '@mui/x-tree-view/SimpleTreeView';\nimport { TreeItem } from '@mui/x-tree-view/TreeItem';\n\n/**\n * Builds a tree structure from a flat array of data.\n * \n * @param {Array<Object>} data - The array of items to build the tree from.\n * @param {string|number} data[].ParentId - The ID of the parent item.\n * @param {string} data[].ParentName - The label for the parent item.\n * @param {string|number} data[].value - The unique value of the item.\n * @param {string} data[].label - The label for the item.\n * @returns {Array<Object>} The tree structure containing parent and child nodes.\n */\nconst buildTree = (data = []) => {\n  const tree = {};\n  data.forEach((item) => {\n    if (item.ParentId && tree[item.ParentId]) {\n      tree[item.ParentId].children.push({\n        value: item.value?.toString(),\n        label: item.label\n      });\n    } else {\n      tree[item.ParentId] = {\n        label: item.ParentName,\n        value: \"Parent\" + item.ParentId.toString(),\n        children: [{\n          value: item.value?.toString(),\n          label: item.label\n        }]\n      };\n    }\n  });\n  return Object.values(tree);\n};\n\n/**\n * Renders a tree view component with checkboxes for selection.\n * \n * @param {Object} props - The properties passed to the component.\n * @param {Object} props.column - The column metadata, including lookup information.\n * @param {string} props.field - The name of the field in the form to bind.\n * @param {Object} props.formik - The Formik instance for managing form state.\n * @param {Object} props.lookups - The lookup data for populating tree items.\n * @param {Array<Object>} props.data - Additional data for the tree.\n * @param {Object} props.otherProps - Other props for customization.\n * @param {Object} props.model - The model configuration.\n * @param {Object} props.fieldConfigs - Configuration for the field, including disabled state.\n * @param {string} props.mode - The mode of the form, such as 'edit' or 'copy'.\n * @returns {JSX.Element} The rendered tree view component.\n */\nexport default function treeCheckBox({ column, field, formik, lookups, fieldConfigs, mode }) {\n  const options = lookups ? lookups[column.lookup] : [];\n  const tree = buildTree(options);\n  const inputValue = formik.values[field]?.length ? formik.values[field].split(\", \") : [];\n  let isDisabled;\n  if (mode !== 'copy') {\n    isDisabled = fieldConfigs?.disabled;\n  }\n  const handleChange = (_, newValue) => {\n    formik.setFieldValue(field, newValue?.join(', ') || '');\n  };\n  return (\n    <Box sx={{ minHeight: 350 }}>\n      <SimpleTreeView\n        selectedItems={inputValue}\n        onSelectedItemsChange={handleChange}\n        disabled={isDisabled}\n        multiSelect\n        checkboxSelection\n      >\n        {tree.map((node) => (\n          <TreeItem key={node.value} itemId={node.value} label={node.label}>\n            {node.children.map((child) => (\n              <TreeItem key={child.value} itemId={child.value} label={child.label} />\n            ))}\n          </TreeItem>\n        ))}\n      </SimpleTreeView>\n    </Box>\n  );\n}\n","import React, { useState } from \"react\";\nimport { Box, RadioGroup, FormControlLabel, Radio, TextField, Button, Typography, Tooltip, CircularProgress } from \"@mui/material\";\nimport { useRouter, useStateContext } from \"../../useRouter/StateProvider\";\nimport { transport } from \"../../Grid/httpRequest\";\nimport { useSnackbar } from \"../../SnackBar\";\nimport utils from \"../../utils\";\n\nconst consts = { maxLength: 500 }; // Default max length for document link\nconst { errorMapping } = utils;\nconst MB = 1024 * 1024;\nfunction FileUpload({ column, field, formik }) {\n    const inputValue = formik.values[field] || \"\";\n    const { stateData } = useStateContext();\n    const { maxSize, formats } = column;\n    const { uploadApi, mediaApi, Url } = stateData?.gridSettings?.permissions;\n    const [formState, setFormState] = useState({\n        isExternal: \"no\",\n        selectedFile: null\n    });\n    const [loading, setLoading] = useState(false); // Add loading state\n    const snackbar = useSnackbar();\n    const { getParams, useParams } = useRouter();\n    const { associationId } = useParams() || getParams;\n    const id = associationId?.split(\"-\")[0] || 1;\n\n    const handleRadioChange = (event) => {\n        const isExternal = event.target.value;\n        setFormState({\n            ...formState,\n            isExternal,\n            selectedFile: null\n        });\n        formik.setFieldValue(field, formik.values[field]); // Reset form field value\n    };\n\n    const handleInputChange = (e) => {\n        formik.setFieldValue(field, e.target.value);\n    };\n\n    const handleFileChange = (event) => {\n        const selectedFile = event.target.files[0];\n        if (!selectedFile) return;\n        if (maxSize && selectedFile.size > maxSize * MB) {\n            snackbar.showError(`File size exceeds the maximum limit of ${maxSize} MB.`);\n            return;\n        }\n        if (Array.isArray(formats) && !formats.includes(selectedFile.type)) {\n            snackbar.showError(`Invalid file format. Allowed formats: ${formats.join(\", \")}.`);\n            return;\n        }\n        setFormState((prev) => ({ ...prev, selectedFile }));\n    };\n\n    const handleFileUpload = async () => {\n        if (!formState.selectedFile) return;\n\n        setLoading(true); // Start loading\n        try {\n            const formData = new FormData();\n            formData.append(\"file\", formState.selectedFile);\n            formData.append(\"DocumentGroupId\", formik.values.DocumentGroupId); // Doc group ID\n            formData.append(\"AssociationId\", id); // Association ID\n            const response = await transport({\n                method: 'POST',\n                url: uploadApi,\n                data: formData,\n                headers: { 'Content-Type': 'multipart/form-data' },\n                credentials: 'include'\n            });\n            const data = response.data || {};\n            if (!data.success) {\n                snackbar.showError(data.message || \"Upload failed\");\n                return;\n            }\n            const fileUrl = mediaApi + '/' + data.filePath;\n            formik.setFieldValue(field, fileUrl);\n        } catch (error) {\n            const statusCode = (error.message.match(/status code (\\d{3})/) || [])[1];\n            snackbar.showError(errorMapping[statusCode]);\n        } finally {\n            setLoading(false); // Stop loading\n        }\n    };\n\n    const host = new URL(Url, window.location.origin).hostname.toLowerCase();\n    React.useEffect(() => {\n        setFormState({\n            ...formState,\n            isExternal: !inputValue.toLowerCase().includes(host) ? \"yes\" : \"no\"\n        });\n    }, [inputValue, setFormState]);\n\n    const isLengthExceeded = formik.values[field]?.length > (column.max || consts.maxLength);\n    const colorScheme = isLengthExceeded ? 'red' : '';\n\n    return (\n        <Box>\n            {/* Radio group */}\n            <Box sx={{ display: \"flex\", alignItems: \"center\", marginBottom: 2 }}>\n                <Typography variant=\"body1\" sx={{ width: \"150px\", marginRight: 2 }}>\n                    External Link?\n                </Typography>\n                <RadioGroup\n                    row\n                    value={formState.isExternal}\n                    onChange={handleRadioChange}\n                    aria-label=\"is-external-link\"\n                    name=\"is-external-link\"\n                >\n                    <FormControlLabel value=\"yes\" control={<Radio />} label=\"Yes\" />\n                    <FormControlLabel value=\"no\" control={<Radio />} label=\"No\" />\n                </RadioGroup>\n            </Box>\n\n            {/* Document link */}\n            <Box sx={{ display: \"flex\", alignItems: \"center\", marginBottom: 2 }}>\n                <Typography variant=\"body1\" sx={{ width: \"150px\", marginRight: 2 }}>\n                    Document Link\n                </Typography>\n                <Box sx={{ flex: 1, display: \"flex\", flexDirection: \"column\" }}>\n                    {formState.isExternal === \"yes\" ? (\n                        <TextField\n                            fullWidth\n                            value={inputValue}\n                            sx={{\n                                \"& .MuiOutlinedInput-root\": {\n                                    \"& fieldset\": { borderColor: colorScheme },\n                                    \"&.Mui-focused fieldset\": { borderColor: colorScheme },\n                                    \"&:hover fieldset\": { borderColor: colorScheme }\n                                }\n                            }}\n                            onChange={handleInputChange}\n                            placeholder=\"Enter external link\"\n                        />\n                    ) : (\n                        <TextField\n                            fullWidth\n                            value={inputValue}\n                            placeholder=\"Link autopopulated once uploaded\"\n                            InputProps={{ readOnly: true }}\n                        />\n                    )}\n                    {isLengthExceeded && <Typography sx={{ color: 'red' }}>Maximum allowed length for the document link is {column.max} characters.</Typography>}\n                </Box>\n            </Box>\n\n            {/* File upload */}\n            {formState.isExternal === \"no\" && (\n                <Box sx={{ display: \"flex\", alignItems: \"center\", gap: 2 }}>\n                    <Button\n                        variant=\"outlined\"\n                        component=\"label\"\n                        disabled={loading} // Disable while loading\n                    >\n                        Choose File\n                        <input type=\"file\" hidden onChange={handleFileChange} />\n                    </Button>\n                    {formState.selectedFile && (\n                        <Tooltip title={formState.selectedFile.name} arrow>\n                            <Typography variant=\"body2\">\n                                {formState.selectedFile.name.length > 20\n                                    ? `${formState.selectedFile.name.substring(0, 20)}...`\n                                    : formState.selectedFile.name}\n                            </Typography>\n                        </Tooltip>\n                    )}\n\n                    <Button\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={handleFileUpload}\n                        disabled={!formState.selectedFile || loading} // Disable while loading\n                    >\n                        {loading ? <CircularProgress size={24} color=\"inherit\" /> : \"Upload File\"}\n                    </Button>\n                </Box>\n            )}\n        </Box>\n    );\n}\n\nexport default FileUpload;\n","import * as React from 'react';\nimport FormControl from '@mui/material/FormControl';\nimport Input from '@mui/material/Input';\nimport Typography from '@mui/material/Typography';\nimport useDebounce from '../../../hooks/useDebounce';\n\nconst Field = ({ field, formik }) => {\n    const [state, setState] = React.useState({});\n    const debouncedState = useDebounce(state, 300);\n\n    React.useEffect(() => {\n        if (!formik.values[field]) return;\n        try {\n            const inputJSON = JSON.parse(formik.values[field]);\n            setState(inputJSON);\n        } catch (e) {\n            setState({});\n        }\n    }, [formik.values[field]]);\n\n    // Update formik when debounced state changes\n    React.useEffect(() => {\n        const nextValue = JSON.stringify(debouncedState);\n        if (formik.values[field] !== nextValue) {\n            formik.setFieldValue(field, nextValue);\n        }\n    }, [debouncedState, field, formik, formik.values[field]]);\n\n    const handleChange = (key, value) => {\n        const updatedState = { ...state, [key]: value };\n        setState(updatedState);\n    };\n\n    return (\n        <FormControl\n            fullWidth\n            key={field}\n            variant=\"standard\"\n            error={formik.touched[field] && Boolean(formik.errors[field])}\n            style={{ marginBottom: '1rem' }}\n        >\n            {Object.keys(state).map((key) => (\n                <div\n                    key={key}\n                    style={{\n                        display: 'flex',\n                        alignItems: 'center',\n                        justifyContent: 'space-between',\n                        marginBottom: '0.5rem'\n                    }}\n                >\n                    <Typography variant=\"body1\" sx={{ width: \"180px\", marginRight: 2 }}>\n                        {key}:\n                    </Typography>\n                    <Input\n                        id={key}\n                        name={key}\n                        value={state[key]}\n                        onChange={(e) => handleChange(key, e.target.value)}\n                        fullWidth\n                        style={{ flex: 2 }}\n                    />\n                </div>\n            ))}\n        </FormControl>\n    );\n};\n\nexport default Field;\n","import * as React from 'react';\nimport Box from '@mui/material/Box';\nimport BooleanField from './fields/boolean';\nimport StringField from './fields/string';\nimport NumberField from './fields/number';\nimport PasswordField from './fields/password';\nimport DateField from './fields/date';\nimport DateTimeField from './fields/dateTime';\nimport TimeField from './fields/time';\nimport SelectField from './fields/select';\nimport GridTransfer from './fields/grid-transfer';\nimport Grid from '@mui/material/Grid';\nimport RadioField from './fields/radio';\nimport AutocompleteField from './fields/autocomplete';\nimport Stepper from '@mui/material/Stepper';\nimport Step from '@mui/material/Step';\nimport StepLabel from '@mui/material/StepLabel';\nimport Button from '@mui/material/Button';\nimport DaySelection from './fields/dayRadio';\nimport { Typography } from '@mui/material';\nimport { ActiveStepContext } from './Form';\nimport styled from '@emotion/styled';\nimport ChipInput from './fields/chipInput';\nimport TreeCheckbox from './fields/treeCheckBox';\nimport FileUpload from './fields/fileUpload';\nimport JSONInput from './fields/jsonInput';\nimport utils from '../utils';\n\nconst fieldMappers = {\n    \"boolean\": BooleanField,\n    \"select\": SelectField,\n    \"string\": StringField,\n    \"number\": NumberField,\n    \"password\": PasswordField,\n    \"date\": DateField,\n    \"dateTime\": DateTimeField,\n    \"time\": TimeField,\n    \"oneToMany\": GridTransfer,\n    \"radio\": RadioField,\n    \"autocomplete\": AutocompleteField,\n    \"dayRadio\": DaySelection,\n    \"email\": StringField,\n    \"chipInput\": ChipInput,\n    \"treeCheckbox\": TreeCheckbox,\n    \"fileUpload\": FileUpload,\n    \"json\": JSONInput\n};\n\nconst gridContainerStyle = { paddingTop: \"2.5px\", paddingBottom: \"2.5px\" };\n\nconst ImportantSpan = styled('span')({\n  color: 'red !important',\n});\n\nconst RenderSteps = ({ tabColumns, model, formik, data, onChange, combos, lookups, fieldConfigs, mode, handleSubmit }) => {\n    const [skipped, setSkipped] = React.useState(new Set());\n\n    const { activeStep, setActiveStep } = React.useContext(ActiveStepContext);\n\n    const skipSteps = {};\n    for (let index = 0, len = model.columns.length; index < len; index++) {\n        const { field, skip } = model.columns[index];\n        if (skip) {\n            skipSteps[skip.step] = formik.values[field];\n        }\n    }\n\n    const isStepSkipped = (step) => {\n        return skipped.has(step) || skipSteps[step];\n    };\n\n    const isLastStep = () => {\n        for (let nextStep = activeStep + 1; nextStep < tabColumns.length; nextStep++) {\n            if (!isStepSkipped(nextStep)) {\n                return false;\n            }\n        }\n        return true;\n    };\n    const handleNext = () => {\n        let nextStep = activeStep + 1;\n        while (skipSteps[nextStep]) {\n            nextStep++;\n        }\n\n        setSkipped((prevSkipped) => new Set(prevSkipped).add(activeStep));\n\n        if (nextStep >= tabColumns.length || isLastStep()) {\n            handleSubmit();\n        } else {\n            setActiveStep(nextStep);\n        }\n    };\n\n    const handleBack = () => {\n        let prevStep = activeStep - 1;\n\n        while (skipSteps[prevStep] && prevStep > 0) {\n            prevStep--;\n        }\n        setActiveStep(prevStep);\n    };\n\n    if (!tabColumns?.length) {\n        return null;\n    }\n\n    const currentStep = tabColumns[activeStep];\n    return (\n        <>\n            <Stepper activeStep={activeStep} sx={{ marginBottom: '20px' }}>\n                {tabColumns.map(({ title, key }, index) => {\n                    return (\n                        <Step key={key} completed={isStepSkipped(index)}>\n                            <StepLabel>\n                                <Typography sx={{ fontSize: '20px' }}>{title}</Typography>\n                            </StepLabel>\n                        </Step>\n                    );\n                })}\n            </Stepper>\n            <React.Fragment>\n                <RenderColumns formElements={currentStep.items} model={model} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} fieldConfigs={fieldConfigs} mode={mode} />\n                <Box sx={{ display: 'flex', flexDirection: 'row', pt: 2, mr: 2 }}>\n                    {activeStep !== 0 ? <Button color=\"inherit\" disabled={activeStep === 0} onClick={handleBack} variant=\"contained\" sx={{ mr: 2 }}> {'Back'}</Button> : null}\n                    <Button onClick={handleNext} variant=\"contained\">{isLastStep() ? \"Finish\" : \"Next\"}</Button>\n                </Box>\n            </React.Fragment>\n        </>\n    );\n};\n\nconst RenderColumns = ({ formElements, model, formik, data, onChange, combos, lookups, fieldConfigs, mode, isAdd }) => {\n    if (!formElements?.length) {\n        return null;\n    }\n    return (\n        <>\n            {\n                formElements.map(({ Component, column, field, label, otherProps }, key) => {\n                    const isGridComponent = typeof column.relation === 'function';\n                    return (\n                        <Grid container spacing={2} key={key} sx={{ marginTop: \"1rem\", marginBottom: \"1rem\" }} alignItems={isGridComponent ? \"flex-start\" : \"center\"}>\n                            {column?.showLabel !== false ?\n                                <Grid size={{ xs: 3 }} sx={gridContainerStyle}>\n                                    <Typography sx={{ fontSize: \"16px\", fontWeight: \"bold\" }}>{column.label || field}: {column.required && <ImportantSpan>*</ImportantSpan>}</Typography>\n                                </Grid>\n                                : null\n                            }\n                            <Grid size={{ xs: isGridComponent ? 12 : 9 }} sx={gridContainerStyle}>\n                                <Component isAdd={isAdd} model={model} fieldConfigs={fieldConfigs[field]} mode={mode} column={column} field={field} label={label} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} {...otherProps} />\n                            </Grid>\n                        </Grid >\n                    );\n                })\n            }\n        </>\n    );\n};\n\nconst getFormConfig = function ({ columns, tabs = {}, id, searchParams }) {\n    const formElements = [], tabColumns = {};\n    for (const tab in tabs) {\n        tabColumns[tab] = [];\n    }\n    for (const column of columns) {\n        const fieldType = column.type;\n        if (column.label === null) { /* If the field should not be shown in form mode, specify label as null */\n            continue;\n        }\n        const { field, label, tab } = column;\n        const otherProps = {};\n        if (column.options) {\n            otherProps.options = column.options;\n        }\n        if (column.dependsOn) {\n            otherProps.dependsOn = column.dependsOn;\n        }\n        const Component = fieldMappers[fieldType];\n        if (!Component || (column.hideInAddGrid && id === '0')) {\n            continue;\n        }\n\n        const target = tab && tabs[tab] ? tabColumns[tab] : formElements;\n        target.push({ Component, field, label, column: { ...column, readOnly: searchParams.has('showRelation') || column.readOnly }, otherProps });\n    }\n    const tabsData = [];\n    for (const tabColumn in tabColumns) {\n        tabsData.push({ key: tabColumn, title: tabs[tabColumn], items: tabColumns[tabColumn] });\n    }\n    return { formElements, tabColumns: tabsData };\n};\n\nconst FormLayout = ({ model, formik, data, combos, onChange, lookups, id: displayId, fieldConfigs, mode, handleSubmit }) => {\n    const isAdd = utils.emptyIdValues.includes(displayId);\n    const { formElements, tabColumns } = React.useMemo(() => {\n        const showTabs = model.formConfig?.showTabbed;\n        const searchParams = new URLSearchParams(window.location.search);\n        const { formElements, tabColumns } = getFormConfig({ columns: model.columns, tabs: showTabs ? model.tabs : {}, id: displayId, searchParams });\n        return { formElements, tabColumns, showTabs: showTabs && tabColumns.length > 0 };\n    }, [model]);\n    return (\n        <div>\n            <RenderColumns isAdd={isAdd} formElements={formElements} model={model} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} fieldConfigs={fieldConfigs} mode={mode} />\n            <div style={{ marginTop: '20px' }}>\n                <RenderSteps tabColumns={tabColumns} model={model} formik={formik} data={data} onChange={onChange} combos={combos} lookups={lookups} fieldConfigs={fieldConfigs} mode={mode} handleSubmit={handleSubmit} />\n            </div>\n        </div>\n    );\n};\n\nexport {\n    BooleanField,\n    StringField,\n    NumberField,\n    PasswordField,\n    DateField,\n    TimeField,\n    SelectField,\n    GridTransfer,\n    fieldMappers\n};\n\nexport default FormLayout;\n","import React, {\n  memo,\n  useState\n} from \"react\";\nimport Tab from \"@mui/material/Tab\";\nimport Box from \"@mui/material/Box\";\nimport Tabs from '@mui/material/Tabs';\nimport { UiModel } from \"../Grid/ui-models\";\n\nfunction CustomTabPanel(props) {\n  const { children, value, index, ...other } = props;\n  return (\n    <div\n      role=\"tabpanel\"\n      hidden={value !== index}\n      id={`simple-tabpanel-${index}`}\n      aria-labelledby={`simple-tab-${index}`}\n      {...other}\n    >\n      {value === index && <Box sx={{ p: 3 }}>{children}</Box>}\n    </div>\n  );\n}\n\nfunction a11yProps(index) {\n  return {\n    id: `simple-tab-${index}`,\n    'aria-controls': `simple-tabpanel-${index}`\n  };\n}\n\n/**\n * Memoized ChildGrid Component\n * @param {Object} params - Parameters for rendering the child grid\n * @param {string} params.relation - Name of the related model\n * @param {Object} params.parentFilters - Filters to apply to the parent\n * @param {Object} params.parent - Parent data\n * @param {Object} params.where - Conditions for the grid\n * @param {Array} params.models - List of available models\n */\nconst ChildGrid = memo(({ relation, parentFilters, parent, where, models, readOnly }) => {\n  const modelConfigOfChildGrid = models.find(({ name }) => name === relation);\n  if (!modelConfigOfChildGrid) return null;\n  const config = { ...modelConfigOfChildGrid, hideBreadcrumb: true };\n  const ChildModel = config instanceof UiModel ? config : new UiModel(config);\n  if (!ChildModel) return null;\n\n  return (\n    <ChildModel.ChildGrid\n      readOnly={readOnly}\n      parentFilters={parentFilters}\n      parent={parent}\n      model={config}\n      where={where}\n      isChildGrid={true}\n    />\n  );\n});\n\n/**\n * Relations component using MUI Tabs\n * Renders a tab for each relation, and a ChildGrid in each panel\n */\nconst Relations = React.memo(({ relations, parent, where = [], models, relationFilters, readOnly }) => {\n  const [tabIndex, setTabIndex] = useState(0);\n\n  const handleChange = (_, newValue) => {\n    setTabIndex(newValue);\n  };\n\n  return (\n    <Box sx={{ width: '100%' }}>\n      <Box sx={{ borderBottom: 1, borderColor: 'divider' }}>\n        <Tabs value={tabIndex} onChange={handleChange} aria-label=\"relations tabs\">\n          {relations.map((relation, idx) => {\n            const modelConfigOfChildGrid = models.find(({ name }) => name === relation) || {};\n            const label = modelConfigOfChildGrid.listTitle || modelConfigOfChildGrid.title || relation;\n            return (\n              <Tab\n                key={relation}\n                label={label}\n                {...a11yProps(idx)}\n              />\n            );\n          })}\n        </Tabs>\n      </Box>\n      {relations.map((relation, idx) => (\n        <CustomTabPanel value={tabIndex} index={idx} key={relation}>\n          <ChildGrid\n            readOnly={readOnly}\n            relation={relation}\n            key={relation}\n            models={models}\n            parentFilters={relationFilters[relation] || []}\n            parent={parent}\n            where={where}\n          />\n        </CustomTabPanel>\n      ))}\n    </Box>\n  );\n});\n\nexport default Relations;\n","import React from \"react\";\nimport { useFormik } from \"formik\";\nimport { useState, useEffect, createContext, useMemo } from \"react\";\nimport {\n  getRecord,\n  saveRecord,\n  deleteRecord\n} from \"../Grid/crud-helper\";\nimport Button from \"@mui/material/Button\";\nimport Paper from \"@mui/material/Paper\";\nimport Stack from \"@mui/material/Stack\";\nimport CircularProgress from \"@mui/material/CircularProgress\";\nimport Box from \"@mui/material/Box\";\nimport FormLayout from \"./field-mapper\";\nimport { useSnackbar } from \"../SnackBar\";\nimport { DialogComponent } from \"../Dialog\";\nimport { useStateContext, useRouter } from \"../useRouter/StateProvider\";\nimport actionsStateProvider from \"../useRouter/actions\";\nimport PageTitle from \"../PageTitle\";\nimport utils, { getPermissions } from \"../utils\";\nimport Relations from \"./relations\";\nexport const ActiveStepContext = createContext(1);\nconst defaultFieldConfigs = {};\nconst consts = {\n  object: \"object\",\n  function: \"function\",\n  baseData: \"baseData\",\n  string: \"string\",\n  create: \"Create\",\n  copy: \"Copy\",\n  edit: \"Edit\",\n  number: \"number\"\n};\n\nconst Form = ({\n  model,\n  api,\n  models,\n  relationFilters = {},\n  permissions = {},\n  Layout = FormLayout,\n  baseSaveData = {},\n  sx,\n  readOnly,\n  beforeSubmit,\n  deletePromptText\n}) => {\n  const formTitle = model.formTitle || model.title;\n  const { navigate, getParams, useParams, pathname } = useRouter();\n  const { relations = [] } = model;\n  const { dispatchData, stateData } = useStateContext();\n  const params = useParams() || getParams;\n  const { id: idWithOptions = \"\" } = params;\n  const id = idWithOptions.split(\"-\")[0];\n  const searchParams = new URLSearchParams(window.location.search);\n  const baseDataFromParams = searchParams.has(consts.baseData) && searchParams.get(consts.baseData);\n  if (baseDataFromParams) {\n    const parsedData = JSON.parse(baseDataFromParams);\n    if (typeof parsedData === consts.object && parsedData !== null) {\n      baseSaveData = { ...baseSaveData, ...parsedData };\n    }\n  }\n  const [isLoading, setIsLoading] = useState(true);\n  const [data, setData] = useState({});\n  const [lookups, setLookups] = useState(null);\n  const [isDeleting, setIsDeleting] = useState(false);\n  const snackbar = useSnackbar();\n  const [validationSchema, setValidationSchema] = useState(null);\n  const [activeStep, setActiveStep] = useState(0);\n  const [isDiscardDialogOpen, setIsDiscardDialogOpen] = useState(false);\n  const [deleteError, setDeleteError] = useState(null);\n  const [errorMessage, setErrorMessage] = useState(\"\");\n  const url = stateData?.gridSettings?.permissions?.Url || '';\n  const fieldConfigs = typeof model.applyFieldConfig === consts.function\n    ? model.applyFieldConfig({ data, lookups })\n    : defaultFieldConfigs;\n  const gridApi = useMemo(() => `${url}${model.api || api || ''}`, [url, model.api, api]);\n  const { mode } = stateData.dataForm;\n  const userData = stateData.getUserData || {};\n  const userDefinedPermissions = {\n    add: true,\n    edit: true,\n    delete: true,\n    ...model.permissions,\n    ...permissions\n  };\n  const { canEdit } = getPermissions({\n    userData,\n    model,\n    userDefinedPermissions\n  });\n  const { hideBreadcrumb = false, navigateBack } = model;\n\n  const handleNavigation = () => {\n    let navigatePath;\n    switch (typeof navigateBack) {\n      case consts.function:\n        navigatePath = navigateBack({ params, searchParams, data });\n        break;\n      case consts.number:\n      case consts.string:\n        navigatePath = navigateBack;\n        break;\n      default:\n        navigatePath = pathname.substring(0, pathname.lastIndexOf(\"/\"));\n        break;\n    }\n    navigate(navigatePath);\n  };\n\n  const isNew = useMemo(() => utils.emptyIdValues.includes(id), [id]);\n\n  const initialValues = useMemo(() => isNew\n    ? { ...model.initialValues, ...data, ...baseSaveData }\n    : { ...baseSaveData, ...model.initialValues, ...data }, [model.initialValues, data, id]);\n\n  useEffect(() => {\n    if (!url) return;\n    setValidationSchema(model.getValidationSchema({ id, snackbar }));\n    const options = idWithOptions.split(\"-\");\n    const params = {\n      api: api || gridApi,\n      model,\n      setError: errorOnLoad\n    };\n    getRecord({\n      ...params,\n      id: options.length > 1 ? options[1] : options[0],\n      setIsLoading,\n      setActiveRecord\n    });\n\n  }, [id, idWithOptions, model, url]);\n\n  const formik = useFormik({\n    enableReinitialize: true,\n    initialValues,\n    validationSchema: validationSchema,\n    validateOnBlur: false,\n    onSubmit: async (values, { resetForm }) => {\n      Object.keys(values).forEach(key => {\n        if (typeof values[key] === consts.string) {\n          values[key] = values[key].trim();\n        }\n      });\n      setIsLoading(true);\n      saveRecord({\n        id,\n        api: gridApi,\n        values: values,\n        setIsLoading,\n        setError: snackbar.showError,\n      })\n        .then((success) => {\n          if (!success) return;\n          if (model.reloadOnSave) {\n            return window.location.reload();\n          }\n          const message = success.info ? success.info : `Record ${id === 0 ? \"Added\" : \"Updated\"} Successfully.`;\n          snackbar.showMessage(message);\n          /**\n          * Handle navigation after form operations\n          * By default, the form navigates back to the grid after save/cancel operations.\n          * This behavior can be controlled by setting navigateBack \"false\" / false in model config which disables navigation completely.\n          */\n          navigateBack !== false && handleNavigation();\n          resetForm({ values: formik.values});\n        })\n        .catch((err) => {\n          snackbar.showError(\n            \"An error occured.\",\n            err\n          );\n          if (model.reloadOnSave) {\n            resetForm();\n          }\n        })\n        .finally(() => setIsLoading(false));\n    }\n  });\n\n  const handleDiscardChanges = () => {\n    formik.resetForm();\n    setIsDiscardDialogOpen(false);\n    navigateBack !== false && handleNavigation();\n  };\n\n  const errorOnLoad = function (title, error) {\n    snackbar.showError(title, error);\n    handleNavigation();\n  };\n\n  const setActiveRecord = function ({ id, title, record, lookups }) {\n    const isCopy = idWithOptions.indexOf(\"-\") > -1;\n    const isNew = !id || id === \"0\";\n    const pageTitle = isNew ? consts.create : isCopy ? consts.copy : consts.edit;\n    const linkColumn = isNew ? \"\" : record[model.linkColumn];\n    const breadcrumbs = [{ text: model.breadCrumbs }, { text: pageTitle }];\n    if (isCopy) {\n      record[model.linkColumn] = \"\";\n    }\n    model.columns.forEach((item) => {\n      if (item.skipCopy && isCopy) {\n        record[item.field] = \"\";\n      }\n    });\n    setData(record);\n    setLookups(lookups);\n    if (linkColumn !== \"\") {\n      breadcrumbs.push({ text: linkColumn });\n    }\n    dispatchData({\n      type: actionsStateProvider.PAGE_TITLE_DETAILS,\n      payload: {\n        showBreadcrumbs: true,\n        breadcrumbs: breadcrumbs\n      }\n    });\n  };\n  const handleFormCancel = function (event) {\n    if (formik.dirty && recordEditable) {\n      setIsDiscardDialogOpen(true);\n    } else {\n      navigateBack !== false && handleNavigation();\n    }\n    event.preventDefault();\n  };\n  const handleDelete = async function () {\n    try {\n      setIsDeleting(true);\n      const response = await deleteRecord({\n        id,\n        api: api || model.api,\n        setIsLoading,\n        setError: snackbar.showError,\n        setErrorMessage\n      });\n      if (response === true) {\n        snackbar.showMessage(\"Record Deleted Successfully.\");\n        navigateBack !== false && handleNavigation();\n      }\n    } catch (error) {\n      snackbar.showError(\"An error occurred, please try after some time.\");\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n  const clearError = () => {\n    setErrorMessage(null)\n    setIsDeleting(false);\n  };\n  if (isLoading) {\n    return (\n      <Box sx={{ display: \"flex\", pt: \"20%\", justifyContent: \"center\" }}>\n        <CircularProgress />\n      </Box>\n    );\n  }\n  const handleChange = function (e) {\n    const { name, value } = e.target;\n    setData({ ...data, [name]: value });\n  };\n\n  const handleSubmit = async function (e) {\n    if (e) e.preventDefault();\n    if (typeof beforeSubmit === consts.function) {\n      await beforeSubmit({ formik });\n    }\n    const { errors } = formik;\n    formik.handleSubmit();\n    const fieldName = Object.keys(errors)[0];\n    const errorMessage = errors[fieldName];\n    if (errorMessage) {\n      snackbar.showError(errorMessage, null, \"error\");\n    }\n    const fieldConfig = model.columns.find(\n      (column) => column.field === fieldName\n    ) || {};\n    if (fieldConfig.tab) {\n      setActiveStep(Object.keys(model.tabs).indexOf(fieldConfig.tab));\n    }\n  };\n\n  const breadcrumbs = [\n    { text: formTitle },\n    { text: id === \"0\" ? \"New\" : \"Update\" }\n  ];\n  const showRelations = Number(id) !== 0 && Boolean(relations.length);\n  const showSaveButton = searchParams.has(\"showRelation\");\n  const recordEditable = !(\"canEdit\" in data) || data.canEdit;\n  const readOnlyRelations = !recordEditable || data.readOnlyRelations;\n  deletePromptText = deletePromptText || \"Are you sure you want to delete ?\";\n  return (\n    <>\n      <PageTitle\n        navigate={navigate}\n        title={formTitle}\n        showBreadcrumbs={!hideBreadcrumb}\n        breadcrumbs={breadcrumbs}\n        model={model}\n      />\n      <ActiveStepContext.Provider value={{ activeStep, setActiveStep }}>\n        <Paper sx={{ padding: 2, ...sx }}>\n          <form>\n            <Stack\n              direction=\"row\"\n              spacing={2}\n              justifyContent=\"flex-end\"\n              mb={1}\n            >\n              {canEdit && recordEditable && !showSaveButton && !readOnly && (\n                <Button\n                  variant=\"contained\"\n                  type=\"submit\"\n                  color=\"success\"\n                  onClick={handleSubmit}\n                >{`${\"Save\"}`}</Button>\n              )}\n              <Button\n                variant=\"contained\"\n                type=\"cancel\"\n                color=\"error\"\n                onClick={handleFormCancel}\n              >{`${\"Cancel\"}`}</Button>\n              {permissions.delete && (\n                <Button\n                  variant=\"contained\"\n                  color=\"error\"\n                  onClick={() => setIsDeleting(true)}\n                >{`${\"Delete\"}`}</Button>\n              )}\n            </Stack>\n            <Layout\n              model={model}\n              formik={formik}\n              data={data}\n              fieldConfigs={fieldConfigs}\n              onChange={handleChange}\n              lookups={lookups}\n              id={id}\n              handleSubmit={handleSubmit}\n              mode={mode}\n            />\n          </form>\n          {errorMessage && (\n            <DialogComponent\n              open={!!errorMessage}\n              onConfirm={clearError}\n              onCancel={clearError}\n              title=\"Info\"\n              hideCancelButton={true}\n            >\n              {\" \"}\n              {errorMessage}\n            </DialogComponent>\n          )}\n          <DialogComponent\n            open={isDiscardDialogOpen}\n            onConfirm={handleDiscardChanges}\n            onCancel={() => setIsDiscardDialogOpen(false)}\n            title=\"Changes not saved\"\n            okText=\"Discard\"\n            cancelText=\"Continue\"\n          >\n            {\"Would you like to continue to edit or discard changes?\"}\n          </DialogComponent>\n          <DialogComponent\n            open={isDeleting}\n            onConfirm={handleDelete}\n            onCancel={() => {\n              setIsDeleting(false);\n              setDeleteError(null);\n            }}\n            title={deleteError ? \"Error Deleting Record\" : \"Confirm Delete\"}\n          >{deletePromptText}</DialogComponent>\n          {showRelations ? (\n            <Relations\n              readOnly={readOnlyRelations}\n              models={models}\n              relationFilters={relationFilters}\n              relations={relations}\n              parent={model.name || model.title || \"\"}\n            />\n          ) : null}\n        </Paper>\n      </ActiveStepContext.Provider>\n    </>\n  );\n};\nexport default Form;\n","import GridBase from './index';\nimport React from 'react';\nimport * as yup from 'yup';\nimport { Divider } from '@mui/material';\nimport Form from '../Form/Form';\n\nconst regexConfig = {\n\tpassword: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&])[A-Za-z\\d@$!%*?&]{8,50}$/,\n\tnonAlphaNumeric: /[^a-zA-Z0-9]/g,\n\tcompareValidatorRegex: /^compare:(.+)$/,\n\temail: /^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Za-z]{2,}$/\n};\n\nconst customStyle = {};\nconst showRowsSelected = true;\nconst defaultValueConfigs = {\n\t\"string\": \"\",\n\t\"boolean\": false,\n\t\"radio\": false,\n\t\"oneToMany\": \"\"\n};\n\nclass UiModel {\n\n\tstatic defaultPermissions = {\n\t\tadd: true,\n\t\tedit: true,\n\t\tdelete: true\n\t};\n\n\tconstructor(modelConfig) {\n\t\tconst { title = \"\", controllerType } = modelConfig;\n\t\tlet { api, idProperty = api + 'Id' } = modelConfig;\n\t\tconst module = \"module\" in modelConfig ? modelConfig.module : title.replace(/[^\\w\\s]/gi, \"\");\n\t\tif (!api) {\n\t\t\tapi = `${title.replaceAll(regexConfig.nonAlphaNumeric, '-').toLowerCase()}`;\n\t\t\tidProperty = title.replaceAll(' ', '') + 'Id';\n\t\t}\n\t\tapi = controllerType === 'cs' ? `${api}.ashx` : `${api}`;\n\t\tconst defaultValues = { ...modelConfig.defaultValues };\n\t\tconst name = module || title;\n\t\tObject.assign(this, {\n\t\t\tstandard: true,\n\t\t\tname,\n\t\t\tpermissions: { ...UiModel.defaultPermissions },\n\t\t\tidProperty,\n\t\t\tlinkColumn: `${name}Name`,\n\t\t\toverrideFileName: title,\n\t\t\tpreferenceId: name,\n\t\t\ttableName: name,\n\t\t\tmodule,\n\t\t\t...modelConfig,\n\t\t\tapi\n\t\t});\n\t\tthis.columnVisibilityModel = this._getColumnVisibilityModel();\n\t\tthis.defaultValues = this._getDefaultValues(defaultValues);\n\t}\n\n\t_getColumnVisibilityModel() {\n\t\tconst columnVisibilityModel = {};\n\t\tfor (const col of this.columns) {\n\t\t\tif (col.hide === true) {\n\t\t\t\tcolumnVisibilityModel[col.id || col.field] = false;\n\t\t\t}\n\t\t}\n\t\treturn columnVisibilityModel;\n\t}\n\n\t_getDefaultValues(defaultValues) {\n\t\tfor (const col of this.columns) {\n\t\t\tconst name = col.field || col.id;\n\t\t\tdefaultValues[name] = col.defaultValue === undefined ? (defaultValueConfigs[col.type] || \"\") : col.defaultValue;\n\t\t}\n\t\treturn defaultValues;\n\t}\n\n\tgetValidationSchema({ id }) {\n\t\tconst { columns } = this;\n\t\tconst validationConfig = {};\n\t\tfor (const column of columns) {\n\t\t\tconst { field, label, header, type = 'string', requiredIfNew = false, required = false, min = '', max = '', validate } = column;\n\t\t\tconst formLabel = label || header || field;\n\t\t\tif (!formLabel) {\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet config;\n\t\t\tswitch (type) {\n\t\t\t\tcase 'string':\n\t\t\t\t\tconfig = yup.string().nullable().trim().label(formLabel);\n\t\t\t\t\tif (min && !isNaN(Number(min))) {\n\t\t\t\t\t\tconfig = config.min(Number(min), `${formLabel} must be at least ${min} characters long`);\n\t\t\t\t\t}\n\t\t\t\t\tif (max && !isNaN(Number(max))) {\n\t\t\t\t\t\tconfig = config.max(Number(max), `${formLabel} must be at most ${max} characters long`);\n\t\t\t\t\t}\n\t\t\t\t\tif (required) {\n\t\t\t\t\t\tconfig = config.trim().required(`${formLabel} is required`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'boolean':\n\t\t\t\t\tconfig = yup.bool().nullable().transform((value, originalValue) => {\n\t\t\t\t\t\tif (originalValue === '') return null;\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}).label(formLabel);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'radio':\n\t\t\t\tcase 'dayRadio':\n\t\t\t\t\tconfig = yup.mixed().label(formLabel).required(`Select at least one option for ${formLabel}`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'date':\n\t\t\t\t\tconfig = yup.date().nullable().transform((value, originalValue) => {\n\t\t\t\t\t\tif (originalValue === '' || originalValue === null) return null;\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t}).label(formLabel).required(`${formLabel} is required`);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'dateTime':\n\t\t\t\t\tconfig = yup\n\t\t\t\t\t\t.date()\n\t\t\t\t\t\t.nullable() // Allow null values\n\t\t\t\t\t\t.transform((value, originalValue) => {\n\t\t\t\t\t\t\t// Transform empty strings or null values into null\n\t\t\t\t\t\t\tif (originalValue === '' || originalValue === null) return null;\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.label(formLabel); // Set a label for better error messages\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'select':\n\t\t\t\tcase 'autocomplete':\n\t\t\t\t\tif (required) {\n\t\t\t\t\t\tconfig = yup.string().trim().label(formLabel).required(`Select at least one ${formLabel}`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig = yup.string().nullable();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'password':\n\t\t\t\t\tconfig = yup.string()\n\t\t\t\t\t\t.label(formLabel)\n\t\t\t\t\t\t.test(\"ignore-asterisks\", `${formLabel} must be a valid password.`, (value) => {\n\t\t\t\t\t\t\t// Skip further validations if value is exactly \"******\"\n\t\t\t\t\t\t\tif (value === \"******\") return true;\n\t\t\t\t\t\t\tconst minlength = Number(min) || 8;\n\t\t\t\t\t\t\tconst maxlength = Number(max) || 50;\n\t\t\t\t\t\t\tconst regex = column.regex || regexConfig.password;\n\t\t\t\t\t\t\t// Check minimum length, maximum length, and pattern if not \"******\"\n\t\t\t\t\t\t\treturn yup.string()\n\t\t\t\t\t\t\t\t.min(minlength, `${formLabel} must be at least ${minlength} characters`)\n\t\t\t\t\t\t\t\t.max(maxlength, `${formLabel} must be at most ${maxlength} characters`)\n\t\t\t\t\t\t\t\t.matches(\n\t\t\t\t\t\t\t\t\tregex,\n\t\t\t\t\t\t\t\t\t`${formLabel} must contain at least one lowercase letter, one uppercase letter, one digit, and one special character`\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.isValidSync(value);\n\t\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'email':\n\t\t\t\t\tconfig = yup\n\t\t\t\t\t\t.string()\n\t\t\t\t\t\t.trim()\n\t\t\t\t\t\t.matches(\n\t\t\t\t\t\t\t(column.regex || regexConfig.email),\n\t\t\t\t\t\t\t'Email must be a valid email'\n\t\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'number':\n\t\t\t\t\tif (required) {\n\t\t\t\t\t\tconfig = yup.number().label(formLabel).required(`${formLabel} is required.`);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconfig = yup.number().nullable();\n\t\t\t\t\t}\n\t\t\t\t\tif (min !== undefined && min !== '' && !isNaN(Number(min))) {\n\t\t\t\t\t\tconfig = config.min(Number(min), `${formLabel} must be greater than or equal to ${min}`);\n\t\t\t\t\t}\n\t\t\t\t\tif (max !== undefined && max !== '' && !isNaN(Number(max))) {\n\t\t\t\t\t\tconfig = config.max(Number(max), `${formLabel} must be less than or equal to ${max}`);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'fileUpload':\n\t\t\t\t\tconfig = yup.string().trim().label(formLabel);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tconfig = yup.mixed().nullable().label(formLabel);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (required && type !== \"string\") {\n\t\t\t\tconfig = config.required(`${formLabel} is required`);\n\t\t\t}\n\t\t\tif (requiredIfNew && (!id || id === '')) {\n\t\t\t\tconfig = config.trim().required(`${formLabel} is required`);\n\t\t\t}\n\t\t\tif (validate) {\n\t\t\t\tconst compareValidator = regexConfig.compareValidatorRegex.exec(validate);\n\t\t\t\tif (compareValidator) {\n\t\t\t\t\tconst compareFieldName = compareValidator[1];\n\t\t\t\t\tconst compareField = columns.find(\n\t\t\t\t\t\t(f) => (f.formField === compareFieldName || f.field) === compareFieldName\n\t\t\t\t\t);\n\t\t\t\t\tconfig = config.oneOf(\n\t\t\t\t\t\t[yup.ref(compareFieldName)],\n\t\t\t\t\t\t`${formLabel} must match ${compareField.label}`\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvalidationConfig[field] = config;\n\t\t}\n\n\t\treturn yup.object({ ...validationConfig, ...this.validationSchema });\n\t}\n\n\tForm = ({ match, ...props }) => {\n\t\treturn <Form model={this} Layout={this.Layout} {...props} />;\n\t};\n\n\tGrid = ({ match, ...props }) => {\n\t\treturn <GridBase model={this} showRowsSelected={showRowsSelected} {...props} />;\n\t};\n\tChildGrid = (props) => {\n\t\treturn <>\n\t\t\t<GridBase model={this} {...props} customStyle={customStyle} showRowsSelected={showRowsSelected} />\n\t\t\t<Divider orientation='horizontal' sx={{ mt: 2 }} />\n\t\t</>;\n\t};\n}\n\nexport {\n\tUiModel\n};\n\n\n"],"names":["SnackbarContext","createContext","vertical","horizontal","Alert","React","props","ref","jsx","MuiAlert","SnackbarProvider","children","message","setMessage","useState","open","setOpen","severity","setSeverity","handleAction","setHandleAction","showMessage","title","onAction","showError","handleClose","jsxs","Fragment","Snackbar","useSnackbar","useContext","DialogComponent","onConfirm","onCancel","okText","cancelText","yesNo","maxWidth","fullWidth","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","Button","actionsStateProvider","pendingRequests","HTTP_STATUS_CODES","getFormData","formData","key","exportRequest","url","query","newURL","value","transport","config","method","data","headers","credentials","rest","fetchOptions","response","contentType","DATA_PARSERS","request","params","history","jsonPayload","additionalParams","additionalHeaders","disableLoader","dispatchData","dataParser","onParseError","reqParams","parseError","ex","dateDataTypes","lookupDataTypes","timeInterval","isLocalTime","dateValue","handleCommonErrors","setError","shouldApplyFilter","filter","operator","type","isUnaryOperator","hasValidValue","getList","gridColumns","setIsLoading","setData","page","pageSize","sortModel","filterModel","api","parentFilters","action","extraParams","columns","controllerType","template","configFileName","showFullScreenLoader","model","baseFilters","isElasticExport","lookups","lookupWithDeps","dateColumns","lookup","field","keepLocal","keepLocalDate","filterable","dependsOn","where","filterField","item","e","requestData","sort","form","v","hiddenTag","prevData","records","record","column","userTimezoneOffset","displayIndex","error","getRecord","id","setActiveRecord","searchParams","lookupsToFetch","columnConfig","a","lookupValue","defaultValues","deleteRecord","result","saveRecord","values","getLookups","scopeId","crudHelper","Footer","pagination","apiRef","tTranslate","rowsPerPage","totalRows","totalPages","translate","i18n","useTranslation","tOpts","pageNumber","setPageNumber","handleChange","useEffect","onPageChange","targetPage","handleKeyPress","event","keyCode","keyValue","GridFooterContainer","Box","Typography","TextField","GridFooter","defaultTemplate","replaceTags","source","tags","keepMissingTags","match","g1","g2","g3","container","MuiTypography","variant","component","text","name","useMobile","onlyMobile","initialValue","checkDevice","view","setView","handleWindowSizeChange","userAgent","mobile","tablet","currentOrientation","stateReducer","state","initialState","daDKGrid","mergedLocalizationDatadaDK","locales","deDEGrid","mergedLocalizationDatadeDE","elGRGrid","mergedLocalizationDataelGR","esESGrid","mergedLocalizationDataesES","frFRGrid","mergedLocalizationDatafrFR","itITGrid","mergedLocalizationDataitIT","trTRGrid","mergedLocalizationDatatrTR","ptPT","count","visibleCount","totalCount","enUSGrid","mergedLocalizationDataenUS","dayjs","utc","timezone","StateContext","RouterContext","StateProvider","initialApiEndpoints","stateData","useReducer","apiEndpoints","useRef","setApiEndpoint","endpoint","getApiEndpoint","buildUrl","systemDateTimeFormat","isDateFormatOnly","showOnlyDate","userData","userDateFormat","formatDate","useSystemFormat","timeZone","format","useLocalization","currentLocaleData","localeData","getLocalizedString","RouterProvider","useRouter","useStateContext","context","HelpModal","height","setHeight","loading","setLoading","openModal","ratio","zoom","updateHeight","widthPercentage","calculatedHeight","maxHeight","resetIframe","iframe","Grid","Replay","Close","PageTitle","titleHeading","navigate","RightComponent","mobileRightComponent","titleClass","showBreadcrumbs","breadcrumbs","enableBackButton","breadcrumbColor","showHelpButton","isMobile","breadcrumbsLasIndex","needToShowBreadcrumbs","handleBack","Card","CardContent","Breadcrumbs","breadcrumb","index","MuiLink","IconButton","HelpIcon","PageTitle$1","withTranslation","utils","getPermissions","userDefinedPermissions","permissions","userPermissions","utcPlugin","componentMap","DatePicker","DateTimePicker","DATEPICKER_MARGIN_TOP","DATEPICKER_MARGIN_BOTTOM","LocalizedDatePicker","fixedFilterFormat","applyValue","convert","columnType","filterFormat","isValidDate","date","parsedDate","handleFilterChange","newValue","getMonthAbbreviation","parts","ComponentToRender","Dateformatvalue","LocalizationProvider","AdapterDayjs","localizedDateFormat","colProps","getGridDateOperators","actionTypes","DIALOG_TYPES","GridActionsCellItem","Tooltip","EditIcon","DeleteIcon","initialValues","paginationModel","pageSizeOptions","GridPreferences","gridRef","onPreferenceChange","t","preferenceApi","preferenceKey","useGridApiRef","snackbar","dialogState","setDialogState","menuAnchorEl","setMenuAnchorEl","openPreferenceExistsModal","setOpenPreferenceExistsModal","openConfirmDeleteDialog","setOpenConfirmDeleteDialog","preferences","setPreferences","currentPreference","setCurrentPreference","nonDefaultPreferences","useMemo","pref","validationSchema","yup","handleOpen","handleDialogClose","resetToDefault","loadPreferences","useCallback","applyDefault","defaultPref","applyPreference","prefId","preferencesArray","prefsToSearch","preference","ele","gridState","savePreference","prefName","caseInsensitivePrefName","deletePreference","onCellClick","cellParams","formik","openDialog","useFormik","isManageDialog","isFormDialog","SettingsIcon","Menu","List","MenuItem","ListItemButton","ListItemIcon","prefDesc","ListItem","ListItemText","FormControlLabel","Checkbox","Stack","SaveIcon","CloseIcon","DataGridPremium","row","GridOperators","CustomDropdownMenu","lookupData","options","label","useGridSelector","gridFilterModelSelector","currentFieldFilters","inputValue","element","newitem","FormControl","Select","option","convertDefaultSort","defaultSort","constants","sortRegex","sortField","sortInfo","direction","ExportMenuItem","handleExport","isPivotExport","icon","CustomExportButton","exportFormats","GridToolbarExportContainer","GridOn","TableChart","Code","Language","DataObjectIcon","areEqual","prevProps","nextProps","equal","o","defaultPageSize","recordCounts","iconMapper","ArticleIcon","auditColumnMappings","booleanIconRenderer","CheckIcon","DeleteContentText","styled","ButtonWithMargin","GridToolBar","Toolbar","CustomCheckBox","selectedSet","handleSelectRow","idProperty","rowId","isChecked","CustomToolbar","isReadOnly","canAdd","forAssignment","showAddIcon","onAdd","selectionApi","selectAll","available","onAssign","assigned","onUnassign","effectivePermissions","clearFilters","toolbarItems","addText","activeFilterCount","AddIcon","RemoveIcon","ColumnsPanelTrigger","triggerProps","ViewColumnIcon","FilterPanelTrigger","Badge","FilterListIcon","FilterListOffIcon","GridBase","memo","parent","showPageTitle","selected","disableCellRedirect","onAssignChange","customStyle","showRowsSelected","customFilters","onRowDoubleClick","onRowClick","gridStyle","reRenderKey","additionalFilters","onCellDoubleClickOverride","onAddOverride","dynamicColumns","readOnly","onListParamsChange","propsApiRef","setPaginationModel","isLoading","rowsSelected","selection","setSelection","isDeleting","setIsDeleting","setRecord","visibilityModel","showAddConfirmation","setShowAddConfirmation","paginationMode","errorMessage","setErrorMessage","setSortModel","initialFilterModel","setFilterModel","getParams","useParams","pathname","idWithOptions","showHeaderFilters","disableRowSelectionOnClick","hideTopFilters","updatePageTitle","isElasticScreen","navigateBack","isDoubleClicked","dataRef","toLink","link","emptyIsAnyOfOperatorFilters","documentField","canEdit","canDelete","addUrlParamKey","searchParamKey","hideBreadcrumb","tableName","showHistory","hideBreadcrumbInGrid","disablePivoting","columnHeaderHeight","gridTitle","preferencesReady","setPreferencesReady","backendApi","preferenceName","baseDataFromParams","baseSaveData","parsedData","setSelectedSet","prevSet","newSet","gridColumnTypes","items","acc","lookupOptions","lookupMapParam","customActions","pinnedColumns","lookupMap","baseColumnList","GRID_CHECKBOX_SELECTION_COL_DEF","finalColumns","overrides","operators","getGridStringOperators","op","getGridBooleanOperators","headerName","auditColumns","header","actions","CopyIcon","HistoryIcon","color","FileDownloadIcon","rowActions","isDisabled","fetchData","baseUrl","filters","finalBaseFilters","listParams","openForm","mode","path","handleDownload","documentLink","onCellClickHandler","details","el","foundCustomAction","ca","historyObject","handleDelete","clearError","processRowUpdate","updatedRow","onCellDoubleClick","handleAddRecords","selectedIds","recordMap","selectedRecords","err","updateAssignment","unassign","assign","assignedValues","finalValues","allIds","getGridRowId","orderedFields","columnVisibilityModel","hiddenColumns","nonExportColumns","col","visibleColumns","updateFilters","updatedItems","isNumber","updateSort","isKeywordField","obj","pageTitle","breadCrumbs","from","to","Field","otherProps","checked","FormHelperText","theme","useTheme","rows","useDebounce","delay","debouncedValue","setDebouncedValue","timer","resolveValue","inputComponentMap","OutlinedInput","FilledInput","Input","NumberFieldAdornment","InputAdornment","BaseNumberField","KeyboardArrowUpIcon","KeyboardArrowDownIcon","min","max","resolvedMin","resolvedMax","formikFieldValue","setInputValue","handleValueChange","handleBlur","inputId","useId","InputComponent","baseProps","inputProps","showPassword","setShowPassword","handleClickShowPassword","show","handleMouseDownPassword","disabled","VisibilityOffIcon","VisibilityIcon","StringField","fieldConfigs","createElement","isoString","TimePicker","emptyValues","useCascadingLookup","isAutoComplete","userSelected","setOptions","dependencyValues","toReturn","dependency","dep","initialOptions","newOptions","requestBody","SelectField","placeHolder","isDefaultOption","InputLabel","DivSpacing","TransferField","setFieldValue","Component","orientation","isError","FormLabel","RadioGroup","Radio","consts","filteredCombos","handleAutoCompleteChange","_","toSave","val","Autocomplete","brandBackgroundColor","days","CustomAvator","Avatar","isSelected","grey","DayAvatar","day","onClick","DaySelection","expired","isWeekend","isWeekdays","defaultVal","selectedDays","setSelectedDays","radioValue","setRadioValue","presetSelected","setPresetSelected","finalValue","baseValue","isAdd","fixedOptions","lastElement","tagValue","getTagProps","tagProps","Chip","buildTree","tree","treeCheckBox","SimpleTreeView","node","TreeItem","child","errorMapping","MB","FileUpload","maxSize","formats","uploadApi","mediaApi","Url","formState","setFormState","associationId","handleRadioChange","isExternal","handleInputChange","handleFileChange","selectedFile","prev","handleFileUpload","fileUrl","statusCode","host","isLengthExceeded","colorScheme","CircularProgress","setState","debouncedState","inputJSON","nextValue","updatedState","fieldMappers","BooleanField","NumberField","PasswordField","DateField","DateTimeField","TimeField","GridTransfer","RadioField","AutocompleteField","ChipInput","TreeCheckbox","JSONInput","gridContainerStyle","ImportantSpan","RenderSteps","tabColumns","onChange","combos","handleSubmit","skipped","setSkipped","activeStep","setActiveStep","ActiveStepContext","skipSteps","len","skip","isStepSkipped","step","isLastStep","nextStep","handleNext","prevSkipped","prevStep","currentStep","Stepper","Step","StepLabel","RenderColumns","formElements","isGridComponent","getFormConfig","tabs","tab","fieldType","tabsData","tabColumn","FormLayout","displayId","showTabs","CustomTabPanel","other","a11yProps","ChildGrid","relation","models","modelConfigOfChildGrid","ChildModel","UiModel","Relations","relations","relationFilters","tabIndex","setTabIndex","Tabs","idx","Tab","defaultFieldConfigs","Form","Layout","sx","beforeSubmit","deletePromptText","formTitle","setLookups","setValidationSchema","isDiscardDialogOpen","setIsDiscardDialogOpen","deleteError","setDeleteError","gridApi","handleNavigation","navigatePath","isNew","errorOnLoad","resetForm","success","handleDiscardChanges","isCopy","linkColumn","handleFormCancel","recordEditable","errors","fieldName","fieldConfig","showRelations","showSaveButton","readOnlyRelations","Paper","regexConfig","defaultValueConfigs","modelConfig","module","validationConfig","requiredIfNew","required","validate","formLabel","originalValue","minlength","maxlength","regex","compareValidator","compareFieldName","compareField","f","Divider"],"mappings":"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"}